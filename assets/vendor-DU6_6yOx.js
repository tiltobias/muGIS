var Tl=Object.defineProperty;var Ll=(r,s,a)=>s in r?Tl(r,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[s]=a;var at=(r,s,a)=>Ll(r,typeof s!="symbol"?s+"":s,a);import{R as ga,r as Rl}from"./vendor-react-8VqwBF9v.js";function wu(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Or={exports:{}},Mr={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ya;function Ol(){return ya||(ya=1,function(r){function s(b,A){var D=b.length;b.push(A);t:for(;0<D;){var V=D-1>>>1,H=b[V];if(0<l(H,A))b[V]=A,b[D]=H,D=V;else break t}}function a(b){return b.length===0?null:b[0]}function u(b){if(b.length===0)return null;var A=b[0],D=b.pop();if(D!==A){b[0]=D;t:for(var V=0,H=b.length,et=H>>>1;V<et;){var st=2*(V+1)-1,yt=b[st],nt=st+1,lt=b[nt];if(0>l(yt,D))nt<H&&0>l(lt,yt)?(b[V]=lt,b[nt]=D,V=nt):(b[V]=yt,b[st]=D,V=st);else if(nt<H&&0>l(lt,D))b[V]=lt,b[nt]=D,V=nt;else break t}}return A}function l(b,A){var D=b.sortIndex-A.sortIndex;return D!==0?D:b.id-A.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;r.unstable_now=function(){return h.now()}}else{var y=Date,f=y.now();r.unstable_now=function(){return y.now()-f}}var p=[],m=[],_=1,d=null,w=3,N=!1,S=!1,R=!1,B=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function U(b){for(var A=a(m);A!==null;){if(A.callback===null)u(m);else if(A.startTime<=b)u(m),A.sortIndex=A.expirationTime,s(p,A);else break;A=a(m)}}function K(b){if(R=!1,U(b),!S)if(a(p)!==null)S=!0,M();else{var A=a(m);A!==null&&L(K,A.startTime-b)}}var $=!1,Z=-1,W=5,E=-1;function k(){return!(r.unstable_now()-E<W)}function C(){if($){var b=r.unstable_now();E=b;var A=!0;try{t:{S=!1,R&&(R=!1,Y(Z),Z=-1),N=!0;var D=w;try{e:{for(U(b),d=a(p);d!==null&&!(d.expirationTime>b&&k());){var V=d.callback;if(typeof V=="function"){d.callback=null,w=d.priorityLevel;var H=V(d.expirationTime<=b);if(b=r.unstable_now(),typeof H=="function"){d.callback=H,U(b),A=!0;break e}d===a(p)&&u(p),U(b)}else u(p);d=a(p)}if(d!==null)A=!0;else{var et=a(m);et!==null&&L(K,et.startTime-b),A=!1}}break t}finally{d=null,w=D,N=!1}A=void 0}}finally{A?F():$=!1}}}var F;if(typeof O=="function")F=function(){O(C)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,q=P.port2;P.port1.onmessage=C,F=function(){q.postMessage(null)}}else F=function(){B(C,0)};function M(){$||($=!0,F())}function L(b,A){Z=B(function(){b(r.unstable_now())},A)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(b){b.callback=null},r.unstable_continueExecution=function(){S||N||(S=!0,M())},r.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<b?Math.floor(1e3/b):5},r.unstable_getCurrentPriorityLevel=function(){return w},r.unstable_getFirstCallbackNode=function(){return a(p)},r.unstable_next=function(b){switch(w){case 1:case 2:case 3:var A=3;break;default:A=w}var D=w;w=A;try{return b()}finally{w=D}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(b,A){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var D=w;w=b;try{return A()}finally{w=D}},r.unstable_scheduleCallback=function(b,A,D){var V=r.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?V+D:V):D=V,b){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=D+H,b={id:_++,callback:A,priorityLevel:b,startTime:D,expirationTime:H,sortIndex:-1},D>V?(b.sortIndex=D,s(m,b),a(p)===null&&b===a(m)&&(R?(Y(Z),Z=-1):R=!0,L(K,D-V))):(b.sortIndex=H,s(p,b),S||N||(S=!0,M())),b},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(b){var A=w;return function(){var D=w;w=A;try{return b.apply(this,arguments)}finally{w=D}}}}(Mr)),Mr}var va;function cg(){return va||(va=1,Or.exports=Ol()),Or.exports}const ma=r=>{let s;const a=new Set,u=(m,_)=>{const d=typeof m=="function"?m(s):m;if(!Object.is(d,s)){const w=s;s=_??(typeof d!="object"||d===null)?d:Object.assign({},s,d),a.forEach(N=>N(s,w))}},l=()=>s,f={setState:u,getState:l,getInitialState:()=>p,subscribe:m=>(a.add(m),()=>a.delete(m))},p=s=r(u,l,f);return f},hg=r=>r?ma(r):ma;var qn={},da;function fg(){return da||(da=1,qn.RADIUS=6378137,qn.FLATTENING=1/298.257223563,qn.POLAR_RADIUS=63567523142e-4),qn}let gg=(r,s=21)=>(a=s)=>{let u="",l=a|0;for(;l--;)u+=r[Math.random()*r.length|0];return u};var Pr,pa;function Ml(){return pa||(pa=1,Pr=function r(s,a){if(s===a)return!0;if(s&&a&&typeof s=="object"&&typeof a=="object"){if(s.constructor!==a.constructor)return!1;var u,l,h;if(Array.isArray(s)){if(u=s.length,u!=a.length)return!1;for(l=u;l--!==0;)if(!r(s[l],a[l]))return!1;return!0}if(s.constructor===RegExp)return s.source===a.source&&s.flags===a.flags;if(s.valueOf!==Object.prototype.valueOf)return s.valueOf()===a.valueOf();if(s.toString!==Object.prototype.toString)return s.toString()===a.toString();if(h=Object.keys(s),u=h.length,u!==Object.keys(a).length)return!1;for(l=u;l--!==0;)if(!Object.prototype.hasOwnProperty.call(a,h[l]))return!1;for(l=u;l--!==0;){var y=h[l];if(!r(s[y],a[y]))return!1}return!0}return s!==s&&a!==a}),Pr}var Pl=Ml();const yg=wu(Pl);var Wt=63710088e-1,Iu={centimeters:Wt*100,centimetres:Wt*100,degrees:360/(2*Math.PI),feet:Wt*3.28084,inches:Wt*39.37,kilometers:Wt/1e3,kilometres:Wt/1e3,meters:Wt,metres:Wt,miles:Wt/1609.344,millimeters:Wt*1e3,millimetres:Wt*1e3,nauticalmiles:Wt/1852,radians:1,yards:Wt*1.0936};function me(r,s,a={}){const u={type:"Feature"};return(a.id===0||a.id)&&(u.id=a.id),a.bbox&&(u.bbox=a.bbox),u.properties=s||{},u.geometry=r,u}function yn(r,s,a={}){if(!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!xa(r[0])||!xa(r[1]))throw new Error("coordinates must contain numbers");return me({type:"Point",coordinates:r},s,a)}function si(r,s,a={}){for(const l of r){if(l.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(l[l.length-1].length!==l[0].length)throw new Error("First and last Position are not equivalent.");for(let h=0;h<l[l.length-1].length;h++)if(l[l.length-1][h]!==l[0][h])throw new Error("First and last Position are not equivalent.")}return me({type:"Polygon",coordinates:r},s,a)}function Hr(r,s,a={}){if(r.length<2)throw new Error("coordinates must be an array of two or more positions");return me({type:"LineString",coordinates:r},s,a)}function qt(r,s={}){const a={type:"FeatureCollection"};return s.id&&(a.id=s.id),s.bbox&&(a.bbox=s.bbox),a.features=r,a}function Al(r,s,a={}){return me({type:"MultiPoint",coordinates:r},s,a)}function Jn(r,s,a={}){return me({type:"MultiPolygon",coordinates:r},s,a)}function Nu(r,s="kilometers"){const a=Iu[s];if(!a)throw new Error(s+" units is invalid");return r*a}function Dl(r,s="kilometers"){const a=Iu[s];if(!a)throw new Error(s+" units is invalid");return r/a}function _a(r){return r%(2*Math.PI)*180/Math.PI}function vn(r){return r%360*Math.PI/180}function xa(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}function hs(r){return r!==null&&typeof r=="object"&&!Array.isArray(r)}function rr(r,s,a){if(r!==null)for(var u,l,h,y,f,p,m,_=0,d=0,w,N=r.type,S=N==="FeatureCollection",R=N==="Feature",B=S?r.features.length:1,Y=0;Y<B;Y++){m=S?r.features[Y].geometry:R?r.geometry:r,w=m?m.type==="GeometryCollection":!1,f=w?m.geometries.length:1;for(var O=0;O<f;O++){var U=0,K=0;if(y=w?m.geometries[O]:m,y!==null){p=y.coordinates;var $=y.type;switch(_=0,$){case null:break;case"Point":if(s(p,d,Y,U,K)===!1)return!1;d++,U++;break;case"LineString":case"MultiPoint":for(u=0;u<p.length;u++){if(s(p[u],d,Y,U,K)===!1)return!1;d++,$==="MultiPoint"&&U++}$==="LineString"&&U++;break;case"Polygon":case"MultiLineString":for(u=0;u<p.length;u++){for(l=0;l<p[u].length-_;l++){if(s(p[u][l],d,Y,U,K)===!1)return!1;d++}$==="MultiLineString"&&U++,$==="Polygon"&&K++}$==="Polygon"&&U++;break;case"MultiPolygon":for(u=0;u<p.length;u++){for(K=0,l=0;l<p[u].length;l++){for(h=0;h<p[u][l].length-_;h++){if(s(p[u][l][h],d,Y,U,K)===!1)return!1;d++}K++}U++}break;case"GeometryCollection":for(u=0;u<y.geometries.length;u++)if(rr(y.geometries[u],s)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function De(r,s){if(r.type==="Feature")s(r,0);else if(r.type==="FeatureCollection")for(var a=0;a<r.features.length&&s(r.features[a],a)!==!1;a++);}function Fl(r,s,a){var u=a;return De(r,function(l,h){h===0&&a===void 0?u=l:u=s(u,l,h)}),u}function ze(r,s){var a,u,l,h,y,f,p,m,_,d,w=0,N=r.type==="FeatureCollection",S=r.type==="Feature",R=N?r.features.length:1;for(a=0;a<R;a++){for(f=N?r.features[a].geometry:S?r.geometry:r,m=N?r.features[a].properties:S?r.properties:{},_=N?r.features[a].bbox:S?r.bbox:void 0,d=N?r.features[a].id:S?r.id:void 0,p=f?f.type==="GeometryCollection":!1,y=p?f.geometries.length:1,l=0;l<y;l++){if(h=p?f.geometries[l]:f,h===null){if(s(null,w,m,_,d)===!1)return!1;continue}switch(h.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(h,w,m,_,d)===!1)return!1;break}case"GeometryCollection":{for(u=0;u<h.geometries.length;u++)if(s(h.geometries[u],w,m,_,d)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}w++}}function sr(r,s){ze(r,function(a,u,l,h,y){var f=a===null?null:a.type;switch(f){case null:case"Point":case"LineString":case"Polygon":return s(me(a,l,{bbox:h,id:y}),u,0)===!1?!1:void 0}var p;switch(f){case"MultiPoint":p="Point";break;case"MultiLineString":p="LineString";break;case"MultiPolygon":p="Polygon";break}for(var m=0;m<a.coordinates.length;m++){var _=a.coordinates[m],d={type:p,coordinates:_};if(s(me(d,l),u,m)===!1)return!1}})}function he(r,s={}){if(r.bbox!=null&&s.recompute!==!0)return r.bbox;const a=[1/0,1/0,-1/0,-1/0];return rr(r,u=>{a[0]>u[0]&&(a[0]=u[0]),a[1]>u[1]&&(a[1]=u[1]),a[2]<u[0]&&(a[2]=u[0]),a[3]<u[1]&&(a[3]=u[1])}),a}function ql(r,s={}){const a=he(r),u=(a[0]+a[2])/2,l=(a[1]+a[3])/2;return yn([u,l],s.properties,s)}var Pi={exports:{}},Gl=Pi.exports,Ea;function Bl(){return Ea||(Ea=1,function(r,s){(function(a,u){r.exports=u()})(Gl,function(){function a(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,n=Array(t);e<t;e++)n[e]=i[e];return n}function u(i,t,e){return t=_(t),function(n,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(n)}(i,w()?Reflect.construct(t,e||[],_(i).constructor):t.apply(i,e))}function l(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function h(i,t,e){if(w())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var o=new(i.bind.apply(i,n));return e&&N(o,e.prototype),o}function y(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,B(n.key),n)}}function f(i,t,e){return t&&y(i.prototype,t),e&&y(i,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function p(i,t){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=Y(i))||t){e&&(i=e);var n=0,o=function(){};return{s:o,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(x){throw x},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,g=!0,v=!1;return{s:function(){e=e.call(i)},n:function(){var x=e.next();return g=x.done,x},e:function(x){v=!0,c=x},f:function(){try{g||e.return==null||e.return()}finally{if(v)throw c}}}}function m(){return m=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(i,t,e){var n=function(c,g){for(;!{}.hasOwnProperty.call(c,g)&&(c=_(c))!==null;);return c}(i,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?i:e):o.value}},m.apply(null,arguments)}function _(i){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_(i)}function d(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),t&&N(i,t)}function w(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w=function(){return!!i})()}function N(i,t){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},N(i,t)}function S(i,t,e,n){var o=m(_(1&n?i.prototype:i),t,e);return 2&n&&typeof o=="function"?function(c){return o.apply(e,c)}:o}function R(i){return function(t){if(Array.isArray(t))return a(t)}(i)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(i)||Y(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function B(i){var t=function(e,n){if(typeof e!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var c=o.call(e,n);if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i,"string");return typeof t=="symbol"?t:t+""}function Y(i,t){if(i){if(typeof i=="string")return a(i,t);var e={}.toString.call(i).slice(8,-1);return e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set"?Array.from(i):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(i,t):void 0}}function O(i){var t=typeof Map=="function"?new Map:void 0;return O=function(e){if(e===null||!function(o){try{return Function.toString.call(o).indexOf("[native code]")!==-1}catch{return typeof o=="function"}}(e))return e;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return h(e,arguments,_(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),N(n,e)},O(i)}var U=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(t){this._quadrantSegments=t,this._quadrantSegments===0&&(this._joinStyle=i.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=i.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==i.JOIN_ROUND&&(this._quadrantSegments=i.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(t){this._joinStyle=t}},{key:"setSimplifyFactor",value:function(t){this._simplifyFactor=t<0?0:t}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(t){this._endCapStyle=t}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(t){this._mitreLimit=t}},{key:"setSingleSided",value:function(t){this._isSingleSided=t}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=i.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=i.CAP_ROUND,this._joinStyle=i.JOIN_ROUND,this._mitreLimit=i.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=i.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(arguments.length===4){var o=arguments[0],c=arguments[1],g=arguments[2],v=arguments[3];this.setQuadrantSegments(o),this.setEndCapStyle(c),this.setJoinStyle(g),this.setMitreLimit(v)}}}},{key:"bufferDistanceError",value:function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)}}])}();U.CAP_ROUND=1,U.CAP_FLAT=2,U.CAP_SQUARE=3,U.JOIN_ROUND=1,U.JOIN_MITRE=2,U.JOIN_BEVEL=3,U.DEFAULT_QUADRANT_SEGMENTS=8,U.DEFAULT_MITRE_LIMIT=5,U.DEFAULT_SIMPLIFY_FACTOR=.01;var K=function(i){function t(e){var n;return l(this,t),(n=u(this,t,[e])).name=Object.keys({Exception:t})[0],n}return d(t,i),f(t,[{key:"toString",value:function(){return this.message}}])}(O(Error)),$=function(i){function t(e){var n;return l(this,t),(n=u(this,t,[e])).name=Object.keys({IllegalArgumentException:t})[0],n}return d(t,i),f(t)}(K),Z=function(){return f(function i(){l(this,i)},[{key:"filter",value:function(i){}}])}();function W(){}function E(){}function k(){}var C,F,P,q,M,L,b,A,D=function(){return f(function i(){l(this,i)},null,[{key:"equalsWithTolerance",value:function(i,t,e){return Math.abs(i-t)<=e}}])}(),V=function(){return f(function i(t,e){l(this,i),this.low=e||0,this.high=t||0},null,[{key:"toBinaryString",value:function(i){var t,e="";for(t=2147483648;t>0;t>>>=1)e+=(i.high&t)===t?"1":"0";for(t=2147483648;t>0;t>>>=1)e+=(i.low&t)===t?"1":"0";return e}}])}();function H(){}function et(){}H.NaN=NaN,H.isNaN=function(i){return Number.isNaN(i)},H.isInfinite=function(i){return!Number.isFinite(i)},H.MAX_VALUE=Number.MAX_VALUE,H.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,H.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(L=2146435072,b=new Float64Array(1),A=new Int32Array(b.buffer),H.doubleToLongBits=function(i){b[0]=i;var t=0|A[0],e=0|A[1];return(e&L)===L&&1048575&e&&t!==0&&(t=0,e=2146959360),new V(e,t)},H.longBitsToDouble=function(i){return A[0]=i.low,A[1]=i.high,b[0]}):(C=1023,F=Math.log2,P=Math.floor,q=Math.pow,M=function(){for(var i=53;i>0;i--){var t=q(2,i)-1;if(P(F(t))+1===i)return t}return 0}(),H.doubleToLongBits=function(i){var t,e,n,o,c,g,v,x,I;if(i<0||1/i===Number.NEGATIVE_INFINITY?(g=1<<31,i=-i):g=0,i===0)return new V(x=g,I=0);if(i===1/0)return new V(x=2146435072|g,I=0);if(i!=i)return new V(x=2146959360,I=0);if(o=0,I=0,(t=P(i))>1)if(t<=M)(o=P(F(t)))<=20?(I=0,x=t<<20-o&1048575):(I=t%(e=q(2,n=o-20))<<32-n,x=t/e&1048575);else for(n=t,I=0;(n=P(e=n/2))!==0;)o++,I>>>=1,I|=(1&x)<<31,x>>>=1,e!==n&&(x|=524288);if(v=o+C,c=t===0,t=i-t,o<52&&t!==0)for(n=0;;){if((e=2*t)>=1?(t=e-1,c?(v--,c=!1):(n<<=1,n|=1,o++)):(t=e,c?--v==0&&(o++,c=!1):(n<<=1,o++)),o===20)x|=n,n=0;else if(o===52){I|=n;break}if(e===1){o<20?x|=n<<20-o:o<52&&(I|=n<<52-o);break}}return x|=v<<20,new V(x|=g,I)},H.longBitsToDouble=function(i){var t,e,n,o,c=i.high,g=i.low,v=c&1<<31?-1:1;for(n=((2146435072&c)>>20)-C,o=0,e=1<<19,t=1;t<=20;t++)c&e&&(o+=q(2,-t)),e>>>=1;for(e=1<<31,t=21;t<=52;t++)g&e&&(o+=q(2,-t)),e>>>=1;if(n===-1023){if(o===0)return 0*v;n=-1022}else{if(n===1024)return o===0?v/0:NaN;o+=1}return v*o*q(2,n)});var st=function(i){function t(e){var n;return l(this,t),(n=u(this,t,[e])).name=Object.keys({RuntimeException:t})[0],n}return d(t,i),f(t)}(K),yt=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,null,[{key:"constructor_",value:function(){if(arguments.length===0)st.constructor_.call(this);else if(arguments.length===1){var e=arguments[0];st.constructor_.call(this,e)}}}])}(st),nt=function(){function i(){l(this,i)}return f(i,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)i.shouldNeverReachHere(null);else if(arguments.length===1){var t=arguments[0];throw new yt("Should never reach here"+(t!==null?": "+t:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var t=arguments[0];i.isTrue(t,null)}else if(arguments.length===2){var e=arguments[1];if(!arguments[0])throw e===null?new yt:new yt(e)}}},{key:"equals",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];i.equals(t,e,null)}else if(arguments.length===3){var n=arguments[0],o=arguments[1],c=arguments[2];if(!o.equals(n))throw new yt("Expected "+n+" but encountered "+o+(c!==null?": "+c:""))}}}])}(),lt=new ArrayBuffer(8),wt=new Float64Array(lt),At=new Int32Array(lt),z=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getM",value:function(){return H.NaN}},{key:"setOrdinate",value:function(t,e){switch(t){case i.X:this.x=e;break;case i.Y:this.y=e;break;case i.Z:this.setZ(e);break;default:throw new $("Invalid ordinate index: "+t)}}},{key:"equals2D",value:function(){if(arguments.length===1){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(arguments.length===2){var e=arguments[0],n=arguments[1];return!!D.equalsWithTolerance(this.x,e.x,n)&&!!D.equalsWithTolerance(this.y,e.y,n)}}},{key:"setM",value:function(t){throw new $("Invalid ordinate index: "+i.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(t){switch(t){case i.X:return this.x;case i.Y:return this.y;case i.Z:return this.getZ()}throw new $("Invalid ordinate index: "+t)}},{key:"equals3D",value:function(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||H.isNaN(this.getZ())&&H.isNaN(t.getZ()))}},{key:"equals",value:function(t){return t instanceof i&&this.equals2D(t)}},{key:"equalInZ",value:function(t,e){return D.equalsWithTolerance(this.getZ(),t.getZ(),e)}},{key:"setX",value:function(t){this.x=t}},{key:"compareTo",value:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(t){this.z=t}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return nt.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}},{key:"copy",value:function(){return new i(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(t){var e=this.x-t.x,n=this.y-t.y,o=this.getZ()-t.getZ();return Math.sqrt(e*e+n*n+o*o)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(t){this.y=t}},{key:"distance",value:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return t=37*(t=37*t+i.hashCode(this.x))+i.hashCode(this.y)}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}},{key:"interfaces_",get:function(){return[W,E,k]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)i.constructor_.call(this,0,0);else if(arguments.length===1){var t=arguments[0];i.constructor_.call(this,t.x,t.y,t.getZ())}else if(arguments.length===2){var e=arguments[0],n=arguments[1];i.constructor_.call(this,e,n,i.NULL_ORDINATE)}else if(arguments.length===3){var o=arguments[0],c=arguments[1],g=arguments[2];this.x=o,this.y=c,this.z=g}}},{key:"hashCode",value:function(t){return wt[0]=t,At[0]^At[1]}}])}(),bn=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"compare",value:function(t,e){var n=i.compare(t.x,e.x);if(n!==0)return n;var o=i.compare(t.y,e.y);return o!==0?o:this._dimensionsToTest<=2?0:i.compare(t.getZ(),e.getZ())}},{key:"interfaces_",get:function(){return[et]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)i.constructor_.call(this,2);else if(arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new $("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}},{key:"compare",value:function(t,e){return t<e?-1:t>e?1:H.isNaN(t)?H.isNaN(e)?0:-1:H.isNaN(e)?1:0}}])}();z.DimensionalComparator=bn,z.NULL_ORDINATE=H.NaN,z.X=0,z.Y=1,z.Z=2,z.M=3;var It=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(t){if(!(t instanceof i))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()}},{key:"intersection",value:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new i;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny;return new i(e,this._maxx<t._maxx?this._maxx:t._maxx,n,this._maxy<t._maxy?this._maxy:t._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof z){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof i){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(arguments.length===2){var n=arguments[0],o=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&o>=this._miny&&o<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof z){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(arguments.length===2){if(arguments[0]instanceof z&&arguments[1]instanceof z){var n=arguments[0],o=arguments[1];return!this.isNull()&&!((n.x<o.x?n.x:o.x)>this._maxx)&&!((n.x>o.x?n.x:o.x)<this._minx)&&!((n.y<o.y?n.y:o.y)>this._maxy)&&!((n.y>o.y?n.y:o.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var c=arguments[0],g=arguments[1];return!this.isNull()&&!(c>this._maxx||c<this._minx||g>this._maxy||g<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof z){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof i){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(arguments.length===2){var n=arguments[0],o=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=o,this._maxy=o):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),o<this._miny&&(this._miny=o),o>this._maxy&&(this._maxy=o))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}},{key:"translate",value:function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}},{key:"copy",value:function(){return new i(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(t){return!(!this.isNull()&&!t.isNull())||t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}},{key:"expandBy",value:function(){if(arguments.length===1){var t=arguments[0];this.expandBy(t,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof z){var e=arguments[0];return this.covers(e)}}else if(arguments.length===2){var n=arguments[0],o=arguments[1];return this.covers(n,o)}}},{key:"centre",value:function(){return this.isNull()?null:new z((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof z){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof i){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(arguments.length===2){var n=arguments[0],o=arguments[1];this.init(n.x,o.x,n.y,o.y)}else if(arguments.length===4){var c=arguments[0],g=arguments[1],v=arguments[2],x=arguments[3];c<g?(this._minx=c,this._maxx=g):(this._minx=g,this._maxx=c),v<x?(this._miny=v,this._maxy=x):(this._miny=x,this._maxy=v)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),e===0?n:n===0?e:Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+z.hashCode(this._minx))+z.hashCode(this._maxx))+z.hashCode(this._miny))+z.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[W,k]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof z){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof i){var e=arguments[0];this.init(e)}}else if(arguments.length===2){var n=arguments[0],o=arguments[1];this.init(n.x,o.x,n.y,o.y)}else if(arguments.length===4){var c=arguments[0],g=arguments[1],v=arguments[2],x=arguments[3];this.init(c,g,v,x)}}},{key:"intersects",value:function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(arguments.length===4){var o=arguments[0],c=arguments[1],g=arguments[2],v=arguments[3],x=Math.min(g.x,v.x),I=Math.max(g.x,v.x),G=Math.min(o.x,c.x),X=Math.max(o.x,c.x);return!(G>I)&&!(X<x)&&(x=Math.min(g.y,v.y),I=Math.max(g.y,v.y),G=Math.min(o.y,c.y),X=Math.max(o.y,c.y),!(G>I)&&!(X<x))}}}])}(),it=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===i.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(t){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(t){return this===t||this.equalsExact(t,0)}},{key:"geometryChanged",value:function(){this.apply(i.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(t){return t!==null&&this.norm().equalsExact(t.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var t;if(arguments.length===1){var e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(arguments.length===2){var n=arguments[0],o=arguments[1];return t=n,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(n,o)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(t){if(t.getTypeCode()===i.TYPECODE_GEOMETRYCOLLECTION)throw new $("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(t,e,n){return n===0?t.equals(e):t.distance(e)<=n}},{key:"norm",value:function(){var t=this.copy();return t.normalize(),t}},{key:"reverse",value:function(){var t=this.reverseInternal();return this.envelope!=null&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}},{key:"copy",value:function(){var t=this.copyInternal();return t.envelope=this._envelope==null?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new It(this._envelope)}},{key:"setSRID",value:function(t){this._SRID=t}},{key:"setUserData",value:function(t){this._userData=t}},{key:"compare",value:function(t,e){for(var n=t.iterator(),o=e.iterator();n.hasNext()&&o.hasNext();){var c=n.next(),g=o.next(),v=c.compareTo(g);if(v!==0)return v}return n.hasNext()?1:o.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(t){return this.getClass()===t.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===i.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===i.TYPECODE_MULTIPOINT||this.getTypeCode()===i.TYPECODE_MULTILINESTRING||this.getTypeCode()===i.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[E,W,k]}},{key:"getClass",value:function(){return i}}],[{key:"hasNonEmptyElements",value:function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(t){for(var e=0;e<t.length;e++)if(t[e]===null)return!0;return!1}}])}();it.constructor_=function(i){i&&(this._envelope=null,this._userData=null,this._factory=i,this._SRID=i.getSRID())},it.TYPECODE_POINT=0,it.TYPECODE_MULTIPOINT=1,it.TYPECODE_LINESTRING=2,it.TYPECODE_LINEARRING=3,it.TYPECODE_MULTILINESTRING=4,it.TYPECODE_POLYGON=5,it.TYPECODE_MULTIPOLYGON=6,it.TYPECODE_GEOMETRYCOLLECTION=7,it.TYPENAME_POINT="Point",it.TYPENAME_MULTIPOINT="MultiPoint",it.TYPENAME_LINESTRING="LineString",it.TYPENAME_LINEARRING="LinearRing",it.TYPENAME_MULTILINESTRING="MultiLineString",it.TYPENAME_POLYGON="Polygon",it.TYPENAME_MULTIPOLYGON="MultiPolygon",it.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",it.geometryChangedFilter={get interfaces_(){return[Z]},filter:function(i){i.geometryChangedAction()}};var T=function(){function i(){l(this,i)}return f(i,null,[{key:"toLocationSymbol",value:function(t){switch(t){case i.EXTERIOR:return"e";case i.BOUNDARY:return"b";case i.INTERIOR:return"i";case i.NONE:return"-"}throw new $("Unknown location value: "+t)}}])}();T.INTERIOR=0,T.BOUNDARY=1,T.EXTERIOR=2,T.NONE=-1;var Tt=function(){return f(function i(){l(this,i)},[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])}(),Mt=function(i){function t(e){var n;return l(this,t),(n=u(this,t,[e])).name=Object.keys({NoSuchElementException:t})[0],n}return d(t,i),f(t)}(K),_t=function(i){function t(e){var n;return l(this,t),(n=u(this,t,[e])).name=Object.keys({UnsupportedOperationException:t})[0],n}return d(t,i),f(t)}(K),_s=function(i){function t(){return l(this,t),u(this,t,arguments)}return d(t,i),f(t,[{key:"contains",value:function(){}}])}(Tt),hr=function(i){function t(e){var n;return l(this,t),(n=u(this,t)).map=new Map,e instanceof Tt&&n.addAll(e),n}return d(t,i),f(t,[{key:"contains",value:function(e){var n=e.hashCode?e.hashCode():e;return!!this.map.has(n)}},{key:"add",value:function(e){var n=e.hashCode?e.hashCode():e;return!this.map.has(n)&&!!this.map.set(n,e)}},{key:"addAll",value:function(e){var n,o=p(e);try{for(o.s();!(n=o.n()).done;){var c=n.value;this.add(c)}}catch(g){o.e(g)}finally{o.f()}return!0}},{key:"remove",value:function(){throw new _t}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new wo(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])}(_s),wo=function(){return f(function i(t){l(this,i),this.iterator=t.values();var e=this.iterator.next(),n=e.done,o=e.value;this.done=n,this.value=o},[{key:"next",value:function(){if(this.done)throw new Mt;var i=this.value,t=this.iterator.next(),e=t.done,n=t.value;return this.done=e,this.value=n,i}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new _t}}])}(),J=function(){function i(){l(this,i)}return f(i,null,[{key:"opposite",value:function(t){return t===i.LEFT?i.RIGHT:t===i.RIGHT?i.LEFT:t}}])}();J.ON=0,J.LEFT=1,J.RIGHT=2;var xs=function(i){function t(e){var n;return l(this,t),(n=u(this,t,[e])).name=Object.keys({EmptyStackException:t})[0],n}return d(t,i),f(t)}(K),Es=function(i){function t(e){var n;return l(this,t),(n=u(this,t,[e])).name=Object.keys({IndexOutOfBoundsException:t})[0],n}return d(t,i),f(t)}(K),Ue=function(i){function t(){return l(this,t),u(this,t,arguments)}return d(t,i),f(t,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])}(Tt),Io=function(i){function t(){var e;return l(this,t),(e=u(this,t)).array=[],e}return d(t,i),f(t,[{key:"add",value:function(e){return this.array.push(e),!0}},{key:"get",value:function(e){if(e<0||e>=this.size())throw new Es;return this.array[e]}},{key:"push",value:function(e){return this.array.push(e),e}},{key:"pop",value:function(){if(this.array.length===0)throw new xs;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new xs;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(e){return this.array.indexOf(e)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])}(Ue);function gt(i,t){return i.interfaces_&&i.interfaces_.indexOf(t)>-1}var Cn=function(){return f(function i(t){l(this,i),this.str=t},[{key:"append",value:function(i){this.str+=i}},{key:"setCharAt",value:function(i,t){this.str=this.str.substr(0,i)+t+this.str.substr(i+1)}},{key:"toString",value:function(){return this.str}}])}(),oi=function(){function i(t){l(this,i),this.value=t}return f(i,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(t){return this.value<t?-1:this.value>t?1:0}}],[{key:"compare",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"isNan",value:function(t){return Number.isNaN(t)}},{key:"valueOf",value:function(t){return new i(t)}}])}(),fr=function(){return f(function i(){l(this,i)},null,[{key:"isWhitespace",value:function(i){return i<=32&&i>=0||i===127}},{key:"toUpperCase",value:function(i){return i.toUpperCase()}}])}(),ct=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"le",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}},{key:"extractSignificantDigits",value:function(t,e){var n=this.abs(),o=i.magnitude(n._hi),c=i.TEN.pow(o);(n=n.divide(c)).gt(i.TEN)?(n=n.divide(i.TEN),o+=1):n.lt(i.ONE)&&(n=n.multiply(i.TEN),o-=1);for(var g=o+1,v=new Cn,x=i.MAX_PRINT_DIGITS-1,I=0;I<=x;I++){t&&I===g&&v.append(".");var G=Math.trunc(n._hi);if(G<0)break;var X=!1,j=0;G>9?(X=!0,j="9"):j="0"+G,v.append(j),n=n.subtract(i.valueOf(G)).multiply(i.TEN),X&&n.selfAdd(i.TEN);var tt=!0,rt=i.magnitude(n._hi);if(rt<0&&Math.abs(rt)>=x-I&&(tt=!1),!tt)break}return e[0]=o,v.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return this.add(t.negate())}if(typeof arguments[0]=="number"){var e=arguments[0];return this.add(-e)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof i){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(t){return this.le(t)?this:t}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfDivide(e,0)}}else if(arguments.length===2){var n,o,c,g,v=arguments[0],x=arguments[1],I=null,G=null,X=null,j=null;return c=this._hi/v,j=(I=(X=i.SPLIT*c)-(I=X-c))*(G=(j=i.SPLIT*v)-(G=j-v))-(g=c*v)+I*(o=v-G)+(n=c-I)*G+n*o,j=c+(X=(this._hi-g-j+this._lo-c*x)/v),this._hi=j,this._lo=c-j+X,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof i){var t,e,n,o,c=arguments[0],g=null,v=null,x=null,I=null;return t=(n=this._hi/c._hi)-(g=(x=i.SPLIT*n)-(g=x-n)),I=g*(v=(I=i.SPLIT*c._hi)-(v=I-c._hi))-(o=n*c._hi)+g*(e=c._hi-v)+t*v+t*e,new i(I=n+(x=(this._hi-o-I+this._lo-n*c._lo)/c._hi),n-I+x)}if(typeof arguments[0]=="number"){var G=arguments[0];return H.isNaN(G)?i.createNaN():i.copy(this).selfDivide(G,0)}}},{key:"ge",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}},{key:"pow",value:function(t){if(t===0)return i.valueOf(1);var e=new i(this),n=i.valueOf(1),o=Math.abs(t);if(o>1)for(;o>0;)o%2==1&&n.selfMultiply(e),(o/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n}},{key:"ceil",value:function(){if(this.isNaN())return i.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new i(t,e)}},{key:"compareTo",value:function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return this.init(t),this}if(typeof arguments[0]=="number"){var e=arguments[0];return this.init(e),this}}},{key:"max",value:function(t){return this.ge(t)?this:t}},{key:"sqrt",value:function(){if(this.isZero())return i.valueOf(0);if(this.isNegative())return i.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=i.valueOf(e),o=this.subtract(n.sqr())._hi*(.5*t);return n.add(o)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if(typeof arguments[0]=="number"){var e,n,o,c,g,v=arguments[0],x=null;return x=(o=this._hi+v)-(c=o-this._hi),n=(g=(x=v-c+(this._hi-x))+this._lo)+(o-(e=o+g)),this._hi=e+n,this._lo=n+(e-this._hi),this}}else if(arguments.length===2){var I,G,X,j,tt=arguments[0],rt=arguments[1],ut=null,dt=null,vt=null;X=this._hi+tt,G=this._lo+rt,dt=X-(vt=X-this._hi),ut=G-(j=G-this._lo);var Nt=(I=X+(vt=(dt=tt-vt+(this._hi-dt))+G))+(vt=(ut=rt-j+(this._lo-ut))+(vt+(X-I))),Gt=vt+(I-Nt);return this._hi=Nt,this._lo=Gt,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfMultiply(e,0)}}else if(arguments.length===2){var n,o,c=arguments[0],g=arguments[1],v=null,x=null,I=null,G=null;v=(I=i.SPLIT*this._hi)-this._hi,G=i.SPLIT*c,v=I-v,n=this._hi-v,x=G-c;var X=(I=this._hi*c)+(G=v*(x=G-x)-I+v*(o=c-x)+n*x+n*o+(this._hi*g+this._lo*c)),j=G+(v=I-X);return this._hi=X,this._lo=j,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return i.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new i(t,e)}},{key:"negate",value:function(){return this.isNaN()?this:new i(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}},{key:"multiply",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return t.isNaN()?i.createNaN():i.copy(this).selfMultiply(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return H.isNaN(e)?i.createNaN():i.copy(this).selfMultiply(e,0)}}},{key:"isNaN",value:function(){return H.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var t=i.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),o=e[0]+1,c=n;if(n.charAt(0)===".")c="0"+n;else if(o<0)c="0."+i.stringOfChar("0",-o)+n;else if(n.indexOf(".")===-1){var g=o-n.length;c=n+i.stringOfChar("0",g)+".0"}return this.isNegative()?"-"+c:c}},{key:"reciprocal",value:function(){var t,e,n,o,c=null,g=null,v=null,x=null;t=(n=1/this._hi)-(c=(v=i.SPLIT*n)-(c=v-n)),g=(x=i.SPLIT*this._hi)-this._hi;var I=n+(v=(1-(o=n*this._hi)-(x=c*(g=x-g)-o+c*(e=this._hi-g)+t*g+t*e)-n*this._lo)/this._hi);return new i(I,n-I+v)}},{key:"toSciNotation",value:function(){if(this.isZero())return i.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),o=i.SCI_NOT_EXPONENT_CHAR+e[0];if(n.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+n);var c="";n.length>1&&(c=n.substring(1));var g=n.charAt(0)+"."+c;return this.isNegative()?"-"+g+o:g+o}},{key:"abs",value:function(){return this.isNaN()?i.NaN:this.isNegative()?this.negate():new i(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}},{key:"add",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return i.copy(this).selfAdd(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return i.copy(this).selfAdd(e)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof i){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(arguments.length===2){var n=arguments[0],o=arguments[1];this._hi=n,this._lo=o}}},{key:"gt",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?i.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[k,W,E]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof i){var e=arguments[0];this.init(e)}else if(typeof arguments[0]=="string"){var n=arguments[0];i.constructor_.call(this,i.parse(n))}}else if(arguments.length===2){var o=arguments[0],c=arguments[1];this.init(o,c)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1],n=arguments[2],o=arguments[3];return i.determinant(i.valueOf(t),i.valueOf(e),i.valueOf(n),i.valueOf(o))}if(arguments[3]instanceof i&&arguments[2]instanceof i&&arguments[0]instanceof i&&arguments[1]instanceof i){var c=arguments[1],g=arguments[2],v=arguments[3];return arguments[0].multiply(v).selfSubtract(c.multiply(g))}}},{key:"sqr",value:function(t){return i.valueOf(t).selfMultiply(t)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var t=arguments[0];return i.parse(t)}if(typeof arguments[0]=="number")return new i(arguments[0])}},{key:"sqrt",value:function(t){return i.valueOf(t).sqrt()}},{key:"parse",value:function(t){for(var e=0,n=t.length;fr.isWhitespace(t.charAt(e));)e++;var o=!1;if(e<n){var c=t.charAt(e);c!=="-"&&c!=="+"||(e++,c==="-"&&(o=!0))}for(var g=new i,v=0,x=0,I=0,G=!1;!(e>=n);){var X=t.charAt(e);if(e++,fr.isDigit(X)){var j=X-"0";g.selfMultiply(i.TEN),g.selfAdd(j),v++}else{if(X!=="."){if(X==="e"||X==="E"){var tt=t.substring(e);try{I=oi.parseInt(tt)}catch(Nt){throw Nt instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+tt+" in string "+t):Nt}break}throw new NumberFormatException("Unexpected character '"+X+"' at position "+e+" in string "+t)}x=v,G=!0}}var rt=g;G||(x=v);var ut=v-x-I;if(ut===0)rt=g;else if(ut>0){var dt=i.TEN.pow(ut);rt=g.divide(dt)}else if(ut<0){var vt=i.TEN.pow(-ut);rt=g.multiply(vt)}return o?rt.negate():rt}},{key:"createNaN",value:function(){return new i(H.NaN,H.NaN)}},{key:"copy",value:function(t){return new i(t)}},{key:"magnitude",value:function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),o=Math.trunc(Math.floor(n));return 10*Math.pow(10,o)<=e&&(o+=1),o}},{key:"stringOfChar",value:function(t,e){for(var n=new Cn,o=0;o<e;o++)n.append(t);return n.toString()}}])}();ct.PI=new ct(3.141592653589793,12246467991473532e-32),ct.TWO_PI=new ct(6.283185307179586,24492935982947064e-32),ct.PI_2=new ct(1.5707963267948966,6123233995736766e-32),ct.E=new ct(2.718281828459045,14456468917292502e-32),ct.NaN=new ct(H.NaN,H.NaN),ct.EPS=123259516440783e-46,ct.SPLIT=134217729,ct.MAX_PRINT_DIGITS=32,ct.TEN=ct.valueOf(10),ct.ONE=ct.valueOf(1),ct.SCI_NOT_EXPONENT_CHAR="E",ct.SCI_NOT_ZERO="0.0E0";var gr=function(){function i(){l(this,i)}return f(i,null,[{key:"orientationIndex",value:function(t,e,n){var o=i.orientationIndexFilter(t,e,n);if(o<=1)return o;var c=ct.valueOf(e.x).selfAdd(-t.x),g=ct.valueOf(e.y).selfAdd(-t.y),v=ct.valueOf(n.x).selfAdd(-e.x),x=ct.valueOf(n.y).selfAdd(-e.y);return c.selfMultiply(x).selfSubtract(g.selfMultiply(v)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof ct&&arguments[2]instanceof ct&&arguments[0]instanceof ct&&arguments[1]instanceof ct){var t=arguments[1],e=arguments[2],n=arguments[3];return arguments[0].multiply(n).selfSubtract(t.multiply(e)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var o=arguments[0],c=arguments[1],g=arguments[2],v=arguments[3],x=ct.valueOf(o),I=ct.valueOf(c),G=ct.valueOf(g),X=ct.valueOf(v);return x.multiply(X).selfSubtract(I.multiply(G)).signum()}}},{key:"intersection",value:function(t,e,n,o){var c=new ct(t.y).selfSubtract(e.y),g=new ct(e.x).selfSubtract(t.x),v=new ct(t.x).selfMultiply(e.y).selfSubtract(new ct(e.x).selfMultiply(t.y)),x=new ct(n.y).selfSubtract(o.y),I=new ct(o.x).selfSubtract(n.x),G=new ct(n.x).selfMultiply(o.y).selfSubtract(new ct(o.x).selfMultiply(n.y)),X=g.multiply(G).selfSubtract(I.multiply(v)),j=x.multiply(v).selfSubtract(c.multiply(G)),tt=c.multiply(I).selfSubtract(x.multiply(g)),rt=X.selfDivide(tt).doubleValue(),ut=j.selfDivide(tt).doubleValue();return H.isNaN(rt)||H.isInfinite(rt)||H.isNaN(ut)||H.isInfinite(ut)?null:new z(rt,ut)}},{key:"orientationIndexFilter",value:function(t,e,n){var o=null,c=(t.x-n.x)*(e.y-n.y),g=(t.y-n.y)*(e.x-n.x),v=c-g;if(c>0){if(g<=0)return i.signum(v);o=c+g}else{if(!(c<0)||g>=0)return i.signum(v);o=-c-g}var x=i.DP_SAFE_EPSILON*o;return v>=x||-v>=x?i.signum(v):2}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}}])}();gr.DP_SAFE_EPSILON=1e-15;var mt=function(){return f(function i(){l(this,i)},[{key:"getM",value:function(i){if(this.hasM()){var t=this.getDimension()-this.getMeasures();return this.getOrdinate(i,t)}return H.NaN}},{key:"setOrdinate",value:function(i,t,e){}},{key:"getZ",value:function(i){return this.hasZ()?this.getOrdinate(i,2):H.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(i,t){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(i){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(i){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(i){}},{key:"copy",value:function(){}},{key:"getY",value:function(i){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[E]}}])}();mt.X=0,mt.Y=1,mt.Z=2,mt.M=3;var ht=function(){function i(){l(this,i)}return f(i,null,[{key:"index",value:function(t,e,n){return gr.orientationIndex(t,e,n)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var t=arguments[0],e=t.length-1;if(e<3)throw new $("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],o=0,c=1;c<=e;c++){var g=t[c];g.y>n.y&&(n=g,o=c)}var v=o;do(v-=1)<0&&(v=e);while(t[v].equals2D(n)&&v!==o);var x=o;do x=(x+1)%e;while(t[x].equals2D(n)&&x!==o);var I=t[v],G=t[x];if(I.equals2D(n)||G.equals2D(n)||I.equals2D(G))return!1;var X=i.index(I,n,G);return X===0?I.x>G.x:X>0}if(gt(arguments[0],mt)){var j=arguments[0],tt=j.size()-1;if(tt<3)throw new $("Ring has fewer than 4 points, so orientation cannot be determined");for(var rt=j.getCoordinate(0),ut=0,dt=1;dt<=tt;dt++){var vt=j.getCoordinate(dt);vt.y>rt.y&&(rt=vt,ut=dt)}var Nt=null,Gt=ut;do(Gt-=1)<0&&(Gt=tt),Nt=j.getCoordinate(Gt);while(Nt.equals2D(rt)&&Gt!==ut);var Yt=null,Ke=ut;do Ke=(Ke+1)%tt,Yt=j.getCoordinate(Ke);while(Yt.equals2D(rt)&&Ke!==ut);if(Nt.equals2D(rt)||Yt.equals2D(rt)||Nt.equals2D(Yt))return!1;var Fn=i.index(Nt,rt,Yt);return Fn===0?Nt.x>Yt.x:Fn>0}}}])}();ht.CLOCKWISE=-1,ht.RIGHT=ht.CLOCKWISE,ht.COUNTERCLOCKWISE=1,ht.LEFT=ht.COUNTERCLOCKWISE,ht.COLLINEAR=0,ht.STRAIGHT=ht.COLLINEAR;var No=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(i,t){var e=this.getRightmostSideOfSegment(i,t);return e<0&&(e=this.getRightmostSideOfSegment(i,t-1)),e<0&&(this._minCoord=null,this.checkForRightmostCoordinate(i)),e}},{key:"findRightmostEdgeAtVertex",value:function(){var i=this._minDe.getEdge().getCoordinates();nt.isTrue(this._minIndex>0&&this._minIndex<i.length,"rightmost point expected to be interior vertex of edge");var t=i[this._minIndex-1],e=i[this._minIndex+1],n=ht.index(this._minCoord,e,t),o=!1;(t.y<this._minCoord.y&&e.y<this._minCoord.y&&n===ht.COUNTERCLOCKWISE||t.y>this._minCoord.y&&e.y>this._minCoord.y&&n===ht.CLOCKWISE)&&(o=!0),o&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(i,t){var e=i.getEdge().getCoordinates();if(t<0||t+1>=e.length||e[t].y===e[t+1].y)return-1;var n=J.LEFT;return e[t].y<e[t+1].y&&(n=J.RIGHT),n}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(i){for(var t=i.getEdge().getCoordinates(),e=0;e<t.length-1;e++)(this._minCoord===null||t[e].x>this._minCoord.x)&&(this._minDe=i,this._minIndex=e,this._minCoord=t[e])}},{key:"findRightmostEdgeAtNode",value:function(){var i=this._minDe.getNode().getEdges();this._minDe=i.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(i){for(var t=i.iterator();t.hasNext();){var e=t.next();e.isForward()&&this.checkForRightmostCoordinate(e)}nt.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===J.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])}(),Te=function(i){function t(e,n){var o;return l(this,t),(o=u(this,t,[n?e+" [ "+n+" ]":e])).pt=n?new z(n):void 0,o.name=Object.keys({TopologyException:t})[0],o}return d(t,i),f(t,[{key:"getCoordinate",value:function(){return this.pt}}])}(st),So=function(){return f(function i(){l(this,i),this.array=[]},[{key:"addLast",value:function(i){this.array.push(i)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])}(),ot=function(i){function t(e){var n;return l(this,t),(n=u(this,t)).array=[],e instanceof Tt&&n.addAll(e),n}return d(t,i),f(t,[{key:"interfaces_",get:function(){return[Ue,Tt]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(e){return arguments.length===1?this.array.push(e):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(e){var n,o=p(e);try{for(o.s();!(n=o.n()).done;){var c=n.value;this.array.push(c)}}catch(g){o.e(g)}finally{o.f()}}},{key:"set",value:function(e,n){var o=this.array[e];return this.array[e]=n,o}},{key:"iterator",value:function(){return new bo(this)}},{key:"get",value:function(e){if(e<0||e>=this.size())throw new Es;return this.array[e]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(e){e?this.array.sort(function(n,o){return e.compare(n,o)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(e){for(var n=0,o=this.array.length;n<o;n++)if(this.array[n]===e)return!!this.array.splice(n,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])}(Ue),bo=function(){return f(function i(t){l(this,i),this.arrayList=t,this.position=0},[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new Mt;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(i){return this.arrayList.set(this.position-1,i)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])}(),Co=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"clearVisitedEdges",value:function(){for(var i=this._dirEdgeList.iterator();i.hasNext();)i.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(i){for(var t=null,e=i.getEdges().iterator();e.hasNext();){var n=e.next();if(n.isVisited()||n.getSym().isVisited()){t=n;break}}if(t===null)throw new Te("unable to find edge to compute depths at "+i.getCoordinate());i.getEdges().computeDepths(t);for(var o=i.getEdges().iterator();o.hasNext();){var c=o.next();c.setVisited(!0),this.copySymDepths(c)}}},{key:"computeDepth",value:function(i){this.clearVisitedEdges();var t=this._finder.getEdge();t.getNode(),t.getLabel(),t.setEdgeDepths(J.RIGHT,i),this.copySymDepths(t),this.computeDepths(t)}},{key:"create",value:function(i){this.addReachable(i),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var i=this._dirEdgeList.iterator();i.hasNext();){var t=i.next();t.getDepth(J.RIGHT)>=1&&t.getDepth(J.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}}},{key:"computeDepths",value:function(i){var t=new hr,e=new So,n=i.getNode();for(e.addLast(n),t.add(n),i.setVisited(!0);!e.isEmpty();){var o=e.removeFirst();t.add(o),this.computeNodeDepth(o);for(var c=o.getEdges().iterator();c.hasNext();){var g=c.next().getSym();if(!g.isVisited()){var v=g.getNode();t.contains(v)||(e.addLast(v),t.add(v))}}}}},{key:"compareTo",value:function(i){var t=i;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var i=new It,t=this._dirEdgeList.iterator();t.hasNext();)for(var e=t.next().getEdge().getCoordinates(),n=0;n<e.length-1;n++)i.expandToInclude(e[n]);this._env=i}return this._env}},{key:"addReachable",value:function(i){var t=new Io;for(t.add(i);!t.empty();){var e=t.pop();this.add(e,t)}}},{key:"copySymDepths",value:function(i){var t=i.getSym();t.setDepth(J.LEFT,i.getDepth(J.RIGHT)),t.setDepth(J.RIGHT,i.getDepth(J.LEFT))}},{key:"add",value:function(i,t){i.setVisited(!0),this._nodes.add(i);for(var e=i.getEdges().iterator();e.hasNext();){var n=e.next();this._dirEdgeList.add(n);var o=n.getSym().getNode();o.isVisited()||t.push(o)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new ot,this._nodes=new ot,this._rightMostCoord=null,this._env=null,this._finder=new No}}])}(),yr=function(){return f(function i(){l(this,i)},null,[{key:"intersection",value:function(i,t,e,n){var o=i.x<t.x?i.x:t.x,c=i.y<t.y?i.y:t.y,g=i.x>t.x?i.x:t.x,v=i.y>t.y?i.y:t.y,x=e.x<n.x?e.x:n.x,I=e.y<n.y?e.y:n.y,G=e.x>n.x?e.x:n.x,X=e.y>n.y?e.y:n.y,j=((o>x?o:x)+(g<G?g:G))/2,tt=((c>I?c:I)+(v<X?v:X))/2,rt=i.x-j,ut=i.y-tt,dt=t.x-j,vt=t.y-tt,Nt=e.x-j,Gt=e.y-tt,Yt=n.x-j,Ke=n.y-tt,Fn=ut-vt,ua=dt-rt,oa=rt*vt-dt*ut,la=Gt-Ke,ca=Yt-Nt,ha=Nt*Ke-Yt*Gt,fa=Fn*ca-la*ua,Lr=(ua*ha-ca*oa)/fa,Rr=(la*oa-Fn*ha)/fa;return H.isNaN(Lr)||H.isInfinite(Lr)||H.isNaN(Rr)||H.isInfinite(Rr)?null:new z(Lr+j,Rr+tt)}}])}(),ne=function(){return f(function i(){l(this,i)},null,[{key:"arraycopy",value:function(i,t,e,n,o){for(var c=0,g=t;g<t+o;g++)e[n+c]=i[g],c++}},{key:"getProperty",value:function(i){return{"line.separator":`
`}[i]}}])}(),Tn=function(){function i(){l(this,i)}return f(i,null,[{key:"log10",value:function(t){var e=Math.log(t);return H.isInfinite(e)||H.isNaN(e)?e:e/i.LOG_10}},{key:"min",value:function(t,e,n,o){var c=t;return e<c&&(c=e),n<c&&(c=n),o<c&&(c=o),c}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var o=arguments[0],c=arguments[1],g=arguments[2];return o<c?c:o>g?g:o}}},{key:"wrap",value:function(t,e){return t<0?e- -t%e:t%e}},{key:"max",value:function(){if(arguments.length===3){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(arguments.length===4){var o=arguments[1],c=arguments[2],g=arguments[3],v=arguments[0];return o>v&&(v=o),c>v&&(v=c),g>v&&(v=g),v}}},{key:"average",value:function(t,e){return(t+e)/2}}])}();Tn.LOG_10=Math.log(10);var de=function(){function i(){l(this,i)}return f(i,null,[{key:"segmentToSegment",value:function(t,e,n,o){if(t.equals(e))return i.pointToSegment(t,n,o);if(n.equals(o))return i.pointToSegment(o,t,e);var c=!1;if(It.intersects(t,e,n,o)){var g=(e.x-t.x)*(o.y-n.y)-(e.y-t.y)*(o.x-n.x);if(g===0)c=!0;else{var v=(t.y-n.y)*(o.x-n.x)-(t.x-n.x)*(o.y-n.y),x=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/g,I=v/g;(I<0||I>1||x<0||x>1)&&(c=!0)}}else c=!0;return c?Tn.min(i.pointToSegment(t,n,o),i.pointToSegment(e,n,o),i.pointToSegment(n,t,e),i.pointToSegment(o,t,e)):0}},{key:"pointToSegment",value:function(t,e,n){if(e.x===n.x&&e.y===n.y)return t.distance(e);var o=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),c=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/o;if(c<=0)return t.distance(e);if(c>=1)return t.distance(n);var g=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/o;return Math.abs(g)*Math.sqrt(o)}},{key:"pointToLinePerpendicular",value:function(t,e,n){var o=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),c=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/o;return Math.abs(c)*Math.sqrt(o)}},{key:"pointToSegmentString",value:function(t,e){if(e.length===0)throw new $("Line array must contain at least one vertex");for(var n=t.distance(e[0]),o=0;o<e.length-1;o++){var c=i.pointToSegment(t,e[o],e[o+1]);c<n&&(n=c)}return n}}])}(),ks=function(){return f(function i(){l(this,i)},[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||gt(arguments[0],mt);else if(arguments.length!==2){if(arguments.length===3){var i=arguments[0],t=arguments[1];return this.create(i,t)}}}}])}(),li=function(){return f(function i(){l(this,i)},[{key:"filter",value:function(i){}}])}(),To=function(){return f(function i(){l(this,i)},null,[{key:"ofLine",value:function(i){var t=i.size();if(t<=1)return 0;var e=0,n=new z;i.getCoordinate(0,n);for(var o=n.x,c=n.y,g=1;g<t;g++){i.getCoordinate(g,n);var v=n.x,x=n.y,I=v-o,G=x-c;e+=Math.sqrt(I*I+G*G),o=v,c=x}return e}}])}(),ws=f(function i(){l(this,i)}),Ve=function(){function i(){l(this,i)}return f(i,null,[{key:"copyCoord",value:function(t,e,n,o){for(var c=Math.min(t.getDimension(),n.getDimension()),g=0;g<c;g++)n.setOrdinate(o,g,t.getOrdinate(e,g))}},{key:"isRing",value:function(t){var e=t.size();return e===0||!(e<=3)&&t.getOrdinate(0,mt.X)===t.getOrdinate(e-1,mt.X)&&t.getOrdinate(0,mt.Y)===t.getOrdinate(e-1,mt.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(gt(arguments[0],mt)&&Number.isInteger(arguments[1])){var t=arguments[0],e=arguments[1];i.scroll(t,e,i.isRing(t))}else if(gt(arguments[0],mt)&&arguments[1]instanceof z){var n=arguments[0],o=arguments[1],c=i.indexOf(o,n);if(c<=0)return null;i.scroll(n,c)}}else if(arguments.length===3){var g=arguments[0],v=arguments[1],x=arguments[2];if(v<=0)return null;for(var I=g.copy(),G=x?g.size()-1:g.size(),X=0;X<G;X++)for(var j=0;j<g.getDimension();j++)g.setOrdinate(X,j,I.getOrdinate((v+X)%G,j));if(x)for(var tt=0;tt<g.getDimension();tt++)g.setOrdinate(G,tt,g.getOrdinate(0,tt))}}},{key:"isEqual",value:function(t,e){var n=t.size();if(n!==e.size())return!1;for(var o=Math.min(t.getDimension(),e.getDimension()),c=0;c<n;c++)for(var g=0;g<o;g++){var v=t.getOrdinate(c,g),x=e.getOrdinate(c,g);if(t.getOrdinate(c,g)!==e.getOrdinate(c,g)&&(!H.isNaN(v)||!H.isNaN(x)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var t=arguments[0];return i.minCoordinateIndex(t,0,t.size()-1)}if(arguments.length===3){for(var e=arguments[0],n=arguments[2],o=-1,c=null,g=arguments[1];g<=n;g++){var v=e.getCoordinate(g);(c===null||c.compareTo(v)>0)&&(c=v,o=g)}return o}}},{key:"extend",value:function(t,e,n){var o=t.create(n,e.getDimension()),c=e.size();if(i.copy(e,0,o,0,c),c>0)for(var g=c;g<n;g++)i.copy(e,c-1,o,g,1);return o}},{key:"reverse",value:function(t){for(var e=t.size()-1,n=Math.trunc(e/2),o=0;o<=n;o++)i.swap(t,o,e-o)}},{key:"swap",value:function(t,e,n){if(e===n)return null;for(var o=0;o<t.getDimension();o++){var c=t.getOrdinate(e,o);t.setOrdinate(e,o,t.getOrdinate(n,o)),t.setOrdinate(n,o,c)}}},{key:"copy",value:function(t,e,n,o,c){for(var g=0;g<c;g++)i.copyCoord(t,e+g,n,o+g)}},{key:"ensureValidRing",value:function(t,e){var n=e.size();return n===0?e:n<=3?i.createClosedRing(t,e,4):e.getOrdinate(0,mt.X)===e.getOrdinate(n-1,mt.X)&&e.getOrdinate(0,mt.Y)===e.getOrdinate(n-1,mt.Y)?e:i.createClosedRing(t,e,n+1)}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.size();n++)if(t.x===e.getOrdinate(n,mt.X)&&t.y===e.getOrdinate(n,mt.Y))return n;return-1}},{key:"createClosedRing",value:function(t,e,n){var o=t.create(n,e.getDimension()),c=e.size();i.copy(e,0,o,0,c);for(var g=c;g<n;g++)i.copy(e,0,o,g,1);return o}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.size();n++){var o=t.getCoordinate(n);(e===null||e.compareTo(o)>0)&&(e=o)}return e}}])}(),Q=function(){function i(){l(this,i)}return f(i,null,[{key:"toDimensionSymbol",value:function(t){switch(t){case i.FALSE:return i.SYM_FALSE;case i.TRUE:return i.SYM_TRUE;case i.DONTCARE:return i.SYM_DONTCARE;case i.P:return i.SYM_P;case i.L:return i.SYM_L;case i.A:return i.SYM_A}throw new $("Unknown dimension value: "+t)}},{key:"toDimensionValue",value:function(t){switch(fr.toUpperCase(t)){case i.SYM_FALSE:return i.FALSE;case i.SYM_TRUE:return i.TRUE;case i.SYM_DONTCARE:return i.DONTCARE;case i.SYM_P:return i.P;case i.SYM_L:return i.L;case i.SYM_A:return i.A}throw new $("Unknown dimension symbol: "+t)}}])}();Q.P=0,Q.L=1,Q.A=2,Q.FALSE=-1,Q.TRUE=-2,Q.DONTCARE=-3,Q.SYM_FALSE="F",Q.SYM_TRUE="T",Q.SYM_DONTCARE="*",Q.SYM_P="0",Q.SYM_L="1",Q.SYM_A="2";var ci=function(){return f(function i(){l(this,i)},[{key:"filter",value:function(i){}}])}(),hi=function(){return f(function i(){l(this,i)},[{key:"filter",value:function(i,t){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])}(),Ln=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new It:this._points.expandEnvelope(new It)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new t(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof it){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var o=e;if(this._points.size()!==o._points.size())return!1;for(var c=0;c<this._points.size();c++)if(!this.equal(this._points.getCoordinate(c),o._points.getCoordinate(c),n))return!1;return!0}return S(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var e=0;e<Math.trunc(this._points.size()/2);e++){var n=this._points.size()-1-e;if(!this._points.getCoordinate(e).equals(this._points.getCoordinate(n))){if(this._points.getCoordinate(e).compareTo(this._points.getCoordinate(n))>0){var o=this._points.copy();Ve.reverse(o),this._points=o}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Q.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var e=this._points.copy();return Ve.reverse(e),this.getFactory().createLineString(e)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return it.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return To.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var e=arguments[0],n=0,o=0;n<this._points.size()&&o<e._points.size();){var c=this._points.getCoordinate(n).compareTo(e._points.getCoordinate(o));if(c!==0)return c;n++,o++}return n<this._points.size()?1:o<e._points.size()?-1:0}if(arguments.length===2){var g=arguments[0];return arguments[1].compare(this._points,g._points)}}},{key:"apply",value:function(){if(gt(arguments[0],li))for(var e=arguments[0],n=0;n<this._points.size();n++)e.filter(this._points.getCoordinate(n));else if(gt(arguments[0],hi)){var o=arguments[0];if(this._points.size()===0)return null;for(var c=0;c<this._points.size()&&(o.filter(this._points,c),!o.isDone());c++);o.isGeometryChanged()&&this.geometryChanged()}else gt(arguments[0],ci)?arguments[0].filter(this):gt(arguments[0],Z)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new _t}},{key:"isEquivalentClass",value:function(e){return e instanceof t}},{key:"getCoordinateN",value:function(e){return this._points.getCoordinate(e)}},{key:"getGeometryType",value:function(){return it.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(e){if(e===null&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),e.size()===1)throw new $("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this._points=e}},{key:"isCoordinate",value:function(e){for(var n=0;n<this._points.size();n++)if(this._points.getCoordinate(n).equals(e))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(e){return this.getFactory().createPoint(this._points.getCoordinate(e))}},{key:"interfaces_",get:function(){return[ws]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var e=arguments[0],n=arguments[1];it.constructor_.call(this,n),this.init(e)}}}}])}(it),Is=f(function i(){l(this,i)}),vr=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new It;var e=new It;return e.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),e}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new t(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof it){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return S(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return Q.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return it.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var e=arguments[0];return this.getCoordinate().compareTo(e.getCoordinate())}if(arguments.length===2){var n=arguments[0];return arguments[1].compare(this._coordinates,n._coordinates)}}},{key:"apply",value:function(){if(gt(arguments[0],li)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.getCoordinate())}else if(gt(arguments[0],hi)){var n=arguments[0];if(this.isEmpty())return null;n.filter(this._coordinates,0),n.isGeometryChanged()&&this.geometryChanged()}else gt(arguments[0],ci)?arguments[0].filter(this):gt(arguments[0],Z)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return it.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(e){e===null&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),nt.isTrue(e.size()<=1),this._coordinates=e}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[Is]}}],[{key:"constructor_",value:function(){this._coordinates=null;var e=arguments[0],n=arguments[1];it.constructor_.call(this,n),this.init(e)}}])}(it),Ns=function(){function i(){l(this,i)}return f(i,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];return Math.abs(i.ofRingSigned(t))}if(gt(arguments[0],mt)){var e=arguments[0];return Math.abs(i.ofRingSigned(e))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,o=1;o<t.length-1;o++){var c=t[o].x-n,g=t[o+1].y;e+=c*(t[o-1].y-g)}return e/2}if(gt(arguments[0],mt)){var v=arguments[0],x=v.size();if(x<3)return 0;var I=new z,G=new z,X=new z;v.getCoordinate(0,G),v.getCoordinate(1,X);var j=G.x;X.x-=j;for(var tt=0,rt=1;rt<x-1;rt++)I.y=G.y,G.x=X.x,G.y=X.y,v.getCoordinate(rt+1,X),X.x-=j,tt+=G.x*(I.y-X.y);return tt/2}}}])}(),He=function(){return f(function i(){l(this,i)},null,[{key:"sort",value:function(){var i=arguments,t=arguments[0];if(arguments.length===1)t.sort(function(j,tt){return j.compareTo(tt)});else if(arguments.length===2)t.sort(function(j,tt){return i[1].compare(j,tt)});else if(arguments.length===3){var e=t.slice(arguments[1],arguments[2]);e.sort();var n=t.slice(0,arguments[1]).concat(e,t.slice(arguments[2],t.length));t.splice(0,t.length);var o,c=p(n);try{for(c.s();!(o=c.n()).done;){var g=o.value;t.push(g)}}catch(j){c.e(j)}finally{c.f()}}else if(arguments.length===4){var v=t.slice(arguments[1],arguments[2]);v.sort(function(j,tt){return i[3].compare(j,tt)});var x=t.slice(0,arguments[1]).concat(v,t.slice(arguments[2],t.length));t.splice(0,t.length);var I,G=p(x);try{for(G.s();!(I=G.n()).done;){var X=I.value;t.push(X)}}catch(j){G.e(j)}finally{G.f()}}}},{key:"asList",value:function(i){var t,e=new ot,n=p(i);try{for(n.s();!(t=n.n()).done;){var o=t.value;e.add(o)}}catch(c){n.e(c)}finally{n.f()}return e}},{key:"copyOf",value:function(i,t){return i.slice(0,t)}}])}(),Ss=f(function i(){l(this,i)}),fi=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var e=new Array(this.getNumPoints()).fill(null),n=-1,o=this._shell.getCoordinates(),c=0;c<o.length;c++)e[++n]=o[c];for(var g=0;g<this._holes.length;g++)for(var v=this._holes[g].getCoordinates(),x=0;x<v.length;x++)e[++n]=v[x];return e}},{key:"getArea",value:function(){var e=0;e+=Ns.ofRing(this._shell.getCoordinateSequence());for(var n=0;n<this._holes.length;n++)e-=Ns.ofRing(this._holes[n].getCoordinateSequence());return e}},{key:"copyInternal",value:function(){for(var e=this._shell.copy(),n=new Array(this._holes.length).fill(null),o=0;o<this._holes.length;o++)n[o]=this._holes[o].copy();return new t(e,n,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var e=this._shell.getCoordinateSequence(),n=this.getEnvelopeInternal(),o=0;o<5;o++){var c=e.getX(o);if(c!==n.getMinX()&&c!==n.getMaxX())return!1;var g=e.getY(o);if(g!==n.getMinY()&&g!==n.getMaxY())return!1}for(var v=e.getX(0),x=e.getY(0),I=1;I<=4;I++){var G=e.getX(I),X=e.getY(I);if(G!==v==(X!==x))return!1;v=G,x=X}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof it){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var o=e,c=this._shell,g=o._shell;if(!c.equalsExact(g,n)||this._holes.length!==o._holes.length)return!1;for(var v=0;v<this._holes.length;v++)if(!this._holes[v].equalsExact(o._holes[v],n))return!1;return!0}return S(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var e=0;e<this._holes.length;e++)this._holes[e]=this.normalized(this._holes[e],!1);He.sort(this._holes)}else if(arguments.length===2){var n=arguments[0],o=arguments[1];if(n.isEmpty())return null;var c=n.getCoordinateSequence(),g=Ve.minCoordinateIndex(c,0,c.size()-2);Ve.scroll(c,g,!0),ht.isCCW(c)===o&&Ve.reverse(c)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var e=this.getExteriorRing().reverse(),n=new Array(this.getNumInteriorRing()).fill(null),o=0;o<n.length;o++)n[o]=this.getInteriorRingN(o).reverse();return this.getFactory().createPolygon(e,n)}},{key:"getTypeCode",value:function(){return it.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var e=0;e+=this._shell.getLength();for(var n=0;n<this._holes.length;n++)e+=this._holes[n].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=this._shell.getNumPoints(),n=0;n<this._holes.length;n++)e+=this._holes[n].getNumPoints();return e}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(e,n){var o=e.copy();return this.normalize(o,n),o}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var e=arguments[0],n=this._shell,o=e._shell;return n.compareToSameClass(o)}if(arguments.length===2){var c=arguments[1],g=arguments[0],v=this._shell,x=g._shell,I=v.compareToSameClass(x,c);if(I!==0)return I;for(var G=this.getNumInteriorRing(),X=g.getNumInteriorRing(),j=0;j<G&&j<X;){var tt=this.getInteriorRingN(j),rt=g.getInteriorRingN(j),ut=tt.compareToSameClass(rt,c);if(ut!==0)return ut;j++}return j<G?1:j<X?-1:0}}},{key:"apply",value:function(){if(gt(arguments[0],li)){var e=arguments[0];this._shell.apply(e);for(var n=0;n<this._holes.length;n++)this._holes[n].apply(e)}else if(gt(arguments[0],hi)){var o=arguments[0];if(this._shell.apply(o),!o.isDone())for(var c=0;c<this._holes.length&&(this._holes[c].apply(o),!o.isDone());c++);o.isGeometryChanged()&&this.geometryChanged()}else if(gt(arguments[0],ci))arguments[0].filter(this);else if(gt(arguments[0],Z)){var g=arguments[0];g.filter(this),this._shell.apply(g);for(var v=0;v<this._holes.length;v++)this._holes[v].apply(g)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var e=new Array(this._holes.length+1).fill(null);e[0]=this._shell;for(var n=0;n<this._holes.length;n++)e[n+1]=this._holes[n];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)}},{key:"getGeometryType",value:function(){return it.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(e){return this._holes[e]}},{key:"interfaces_",get:function(){return[Ss]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var e=arguments[0],n=arguments[1],o=arguments[2];if(it.constructor_.call(this,o),e===null&&(e=this.getFactory().createLinearRing()),n===null&&(n=[]),it.hasNullElements(n))throw new $("holes must not contain null elements");if(e.isEmpty()&&it.hasNonEmptyElements(n))throw new $("shell is empty but holes are not");this._shell=e,this._holes=n}}])}(it),Lo=function(i){function t(){return l(this,t),u(this,t,arguments)}return d(t,i),f(t)}(_s),bs=function(i){function t(e){var n;return l(this,t),(n=u(this,t)).array=[],e instanceof Tt&&n.addAll(e),n}return d(t,i),f(t,[{key:"contains",value:function(e){var n,o=p(this.array);try{for(o.s();!(n=o.n()).done;)if(n.value.compareTo(e)===0)return!0}catch(c){o.e(c)}finally{o.f()}return!1}},{key:"add",value:function(e){if(this.contains(e))return!1;for(var n=0,o=this.array.length;n<o;n++)if(this.array[n].compareTo(e)===1)return!!this.array.splice(n,0,e);return this.array.push(e),!0}},{key:"addAll",value:function(e){var n,o=p(e);try{for(o.s();!(n=o.n()).done;){var c=n.value;this.add(c)}}catch(g){o.e(g)}finally{o.f()}return!0}},{key:"remove",value:function(){throw new _t}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new Ro(this.array)}}])}(Lo),Ro=function(){return f(function i(t){l(this,i),this.array=t,this.position=0},[{key:"next",value:function(){if(this.position===this.array.length)throw new Mt;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new _t}}])}(),jt=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"computeEnvelopeInternal",value:function(){for(var e=new It,n=0;n<this._geometries.length;n++)e.expandToInclude(this._geometries[n].getEnvelopeInternal());return e}},{key:"getGeometryN",value:function(e){return this._geometries[e]}},{key:"getCoordinates",value:function(){for(var e=new Array(this.getNumPoints()).fill(null),n=-1,o=0;o<this._geometries.length;o++)for(var c=this._geometries[o].getCoordinates(),g=0;g<c.length;g++)e[++n]=c[g];return e}},{key:"getArea",value:function(){for(var e=0,n=0;n<this._geometries.length;n++)e+=this._geometries[n].getArea();return e}},{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof it){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var o=e;if(this._geometries.length!==o._geometries.length)return!1;for(var c=0;c<this._geometries.length;c++)if(!this._geometries[c].equalsExact(o._geometries[c],n))return!1;return!0}return S(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var e=0;e<this._geometries.length;e++)this._geometries[e].normalize();He.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var e=Q.FALSE,n=0;n<this._geometries.length;n++)e=Math.max(e,this._geometries[n].getBoundaryDimension());return e}},{key:"reverseInternal",value:function(){for(var e=this._geometries.length,n=new ot(e),o=0;o<e;o++)n.add(this._geometries[o].reverse());return this.getFactory().buildGeometry(n)}},{key:"getTypeCode",value:function(){return it.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var e=Q.FALSE,n=0;n<this._geometries.length;n++)e=Math.max(e,this._geometries[n].getDimension());return e}},{key:"getLength",value:function(){for(var e=0,n=0;n<this._geometries.length;n++)e+=this._geometries[n].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=0,n=0;n<this._geometries.length;n++)e+=this._geometries[n].getNumPoints();return e}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var e=arguments[0],n=new bs(He.asList(this._geometries)),o=new bs(He.asList(e._geometries));return this.compare(n,o)}if(arguments.length===2){for(var c=arguments[1],g=arguments[0],v=this.getNumGeometries(),x=g.getNumGeometries(),I=0;I<v&&I<x;){var G=this.getGeometryN(I),X=g.getGeometryN(I),j=G.compareToSameClass(X,c);if(j!==0)return j;I++}return I<v?1:I<x?-1:0}}},{key:"apply",value:function(){if(gt(arguments[0],li))for(var e=arguments[0],n=0;n<this._geometries.length;n++)this._geometries[n].apply(e);else if(gt(arguments[0],hi)){var o=arguments[0];if(this._geometries.length===0)return null;for(var c=0;c<this._geometries.length&&(this._geometries[c].apply(o),!o.isDone());c++);o.isGeometryChanged()&&this.geometryChanged()}else if(gt(arguments[0],ci)){var g=arguments[0];g.filter(this);for(var v=0;v<this._geometries.length;v++)this._geometries[v].apply(g)}else if(gt(arguments[0],Z)){var x=arguments[0];x.filter(this);for(var I=0;I<this._geometries.length;I++)this._geometries[I].apply(x)}}},{key:"getBoundary",value:function(){return it.checkNotGeometryCollection(this),nt.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return it.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var e=arguments[0],n=arguments[1];if(it.constructor_.call(this,n),e===null&&(e=[]),it.hasNullElements(e))throw new $("geometries must not contain null elements");this._geometries=e}}}}])}(it),mr=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof it){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&S(t,"equalsExact",this,1).call(this,e,n)}return S(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var e=arguments[0];return this._geometries[e].getCoordinate()}return S(t,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return Q.FALSE}},{key:"getTypeCode",value:function(){return it.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return it.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[Is]}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];jt.constructor_.call(this,e,n)}}])}(jt),Rn=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"copyInternal",value:function(){return new t(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return Q.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||S(t,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var e=this._points.copy();return Ve.reverse(e),this.getFactory().createLinearRing(e)}},{key:"getTypeCode",value:function(){return it.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!S(t,"isClosed",this,1).call(this))throw new $("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new $("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return it.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];Ln.constructor_.call(this,e,n),this.validateConstruction()}}])}(Ln);Rn.MINIMUM_VALID_SIZE=4;var We=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"setOrdinate",value:function(e,n){switch(e){case t.X:this.x=n;break;case t.Y:this.y=n;break;default:throw new $("Invalid ordinate index: "+e)}}},{key:"getZ",value:function(){return z.NULL_ORDINATE}},{key:"getOrdinate",value:function(e){switch(e){case t.X:return this.x;case t.Y:return this.y}throw new $("Invalid ordinate index: "+e)}},{key:"setZ",value:function(e){throw new $("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)z.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof t){var e=arguments[0];z.constructor_.call(this,e.x,e.y)}else if(arguments[0]instanceof z){var n=arguments[0];z.constructor_.call(this,n.x,n.y)}}else if(arguments.length===2){var o=arguments[0],c=arguments[1];z.constructor_.call(this,o,c,z.NULL_ORDINATE)}}}])}(z);We.X=0,We.Y=1,We.Z=-1,We.M=-1;var Ze=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(e,n){switch(e){case t.X:this.x=n;break;case t.Y:this.y=n;break;case t.M:this._m=n;break;default:throw new $("Invalid ordinate index: "+e)}}},{key:"setM",value:function(e){this._m=e}},{key:"getZ",value:function(){return z.NULL_ORDINATE}},{key:"getOrdinate",value:function(e){switch(e){case t.X:return this.x;case t.Y:return this.y;case t.M:return this._m}throw new $("Invalid ordinate index: "+e)}},{key:"setZ",value:function(e){throw new $("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)z.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof t){var e=arguments[0];z.constructor_.call(this,e.x,e.y),this._m=e._m}else if(arguments[0]instanceof z){var n=arguments[0];z.constructor_.call(this,n.x,n.y),this._m=this.getM()}}else if(arguments.length===3){var o=arguments[0],c=arguments[1],g=arguments[2];z.constructor_.call(this,o,c,z.NULL_ORDINATE),this._m=g}}}])}(z);Ze.X=0,Ze.Y=1,Ze.Z=-1,Ze.M=2;var dr=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(e,n){switch(e){case z.X:this.x=n;break;case z.Y:this.y=n;break;case z.Z:this.z=n;break;case z.M:this._m=n;break;default:throw new $("Invalid ordinate index: "+e)}}},{key:"setM",value:function(e){this._m=e}},{key:"getOrdinate",value:function(e){switch(e){case z.X:return this.x;case z.Y:return this.y;case z.Z:return this.getZ();case z.M:return this.getM()}throw new $("Invalid ordinate index: "+e)}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)z.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof t){var e=arguments[0];z.constructor_.call(this,e),this._m=e._m}else if(arguments[0]instanceof z){var n=arguments[0];z.constructor_.call(this,n),this._m=this.getM()}}else if(arguments.length===4){var o=arguments[0],c=arguments[1],g=arguments[2],v=arguments[3];z.constructor_.call(this,o,c,g),this._m=v}}}])}(z),gi=function(){function i(){l(this,i)}return f(i,null,[{key:"measures",value:function(t){return t instanceof We?0:t instanceof Ze||t instanceof dr?1:0}},{key:"dimension",value:function(t){return t instanceof We?2:t instanceof Ze?3:t instanceof dr?4:3}},{key:"create",value:function(){if(arguments.length===1){var t=arguments[0];return i.create(t,0)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return e===2?new We:e===3&&n===0?new z:e===3&&n===1?new Ze:e===4&&n===1?new dr:new z}}}])}(),On=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"getCoordinate",value:function(e){return this.get(e)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&gt(arguments[0],Tt)){for(var e=arguments[1],n=!1,o=arguments[0].iterator();o.hasNext();)this.add(o.next(),e),n=!0;return n}return S(t,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var e=S(t,"clone",this,1).call(this),n=0;n<this.size();n++)e.add(n,this.get(n).clone());return e}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(t.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(t.coordArrayType);for(var e=this.size(),n=new Array(e).fill(null),o=0;o<e;o++)n[o]=this.get(e-o-1);return n}}},{key:"add",value:function(){if(arguments.length===1){var e=arguments[0];return S(t,"add",this,1).call(this,e)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var n=arguments[0],o=arguments[1];return this.add(n,o,!0),!0}if(arguments[0]instanceof z&&typeof arguments[1]=="boolean"){var c=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(c))return null;S(t,"add",this,1).call(this,c)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var g=arguments[0],v=arguments[1];return this.add(g,v),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var x=arguments[0],I=arguments[1];if(arguments[2])for(var G=0;G<x.length;G++)this.add(x[G],I);else for(var X=x.length-1;X>=0;X--)this.add(x[X],I);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof z){var j=arguments[0],tt=arguments[1];if(!arguments[2]){var rt=this.size();if(rt>0&&(j>0&&this.get(j-1).equals2D(tt)||j<rt&&this.get(j).equals2D(tt)))return null}S(t,"add",this,1).call(this,j,tt)}}else if(arguments.length===4){var ut=arguments[0],dt=arguments[1],vt=arguments[2],Nt=arguments[3],Gt=1;vt>Nt&&(Gt=-1);for(var Yt=vt;Yt!==Nt;Yt+=Gt)this.add(ut[Yt],dt);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var e=this.get(0).copy();this.add(e,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(arguments.length===2){var n=arguments[0],o=arguments[1];this.ensureCapacity(n.length),this.add(n,o)}}}}])}(ot);On.coordArrayType=new Array(0).fill(null);var Dt=function(){function i(){l(this,i)}return f(i,null,[{key:"isRing",value:function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])}},{key:"ptNotInList",value:function(t,e){for(var n=0;n<t.length;n++){var o=t[n];if(i.indexOf(o,e)<0)return o}return null}},{key:"scroll",value:function(t,e){var n=i.indexOf(e,t);if(n<0)return null;var o=new Array(t.length).fill(null);ne.arraycopy(t,n,o,0,t.length-n),ne.arraycopy(t,0,o,t.length-n,n),ne.arraycopy(o,0,t,0,t.length)}},{key:"equals",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(t===null||e===null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(arguments.length===3){var o=arguments[0],c=arguments[1],g=arguments[2];if(o===c)return!0;if(o===null||c===null||o.length!==c.length)return!1;for(var v=0;v<o.length;v++)if(g.compare(o[v],c[v])!==0)return!1;return!0}}},{key:"intersection",value:function(t,e){for(var n=new On,o=0;o<t.length;o++)e.intersects(t[o])&&n.add(t[o],!0);return n.toCoordinateArray()}},{key:"measures",value:function(t){if(t===null||t.length===0)return 0;var e,n=0,o=p(t);try{for(o.s();!(e=o.n()).done;){var c=e.value;n=Math.max(n,gi.measures(c))}}catch(g){o.e(g)}finally{o.f()}return n}},{key:"hasRepeatedPoints",value:function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(t){return i.hasRepeatedPoints(t)?new On(t,!1).toCoordinateArray():t}},{key:"reverse",value:function(t){for(var e=t.length-1,n=Math.trunc(e/2),o=0;o<=n;o++){var c=t[o];t[o]=t[e-o],t[e-o]=c}}},{key:"removeNull",value:function(t){for(var e=0,n=0;n<t.length;n++)t[n]!==null&&e++;var o=new Array(e).fill(null);if(e===0)return o;for(var c=0,g=0;g<t.length;g++)t[g]!==null&&(o[c++]=t[g]);return o}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=t[n].copy();return e}if(arguments.length===5)for(var o=arguments[0],c=arguments[1],g=arguments[2],v=arguments[3],x=arguments[4],I=0;I<x;I++)g[v+I]=o[c+I].copy()}},{key:"isEqualReversed",value:function(t,e){for(var n=0;n<t.length;n++){var o=t[n],c=e[t.length-n-1];if(o.compareTo(c)!==0)return!1}return!0}},{key:"envelope",value:function(t){for(var e=new It,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e}},{key:"toCoordinateArray",value:function(t){return t.toArray(i.coordArrayType)}},{key:"dimension",value:function(t){if(t===null||t.length===0)return 3;var e,n=0,o=p(t);try{for(o.s();!(e=o.n()).done;){var c=e.value;n=Math.max(n,gi.dimension(c))}}catch(g){o.e(g)}finally{o.f()}return n}},{key:"atLeastNCoordinatesOrNothing",value:function(t,e){return e.length>=t?e:[]}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1}},{key:"increasingDirection",value:function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,o=t[e].compareTo(t[n]);if(o!==0)return o}return 1}},{key:"compare",value:function(t,e){for(var n=0;n<t.length&&n<e.length;){var o=t[n].compareTo(e[n]);if(o!==0)return o;n++}return n<e.length?-1:n<t.length?1:0}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.length;n++)(e===null||e.compareTo(t[n])>0)&&(e=t[n]);return e}},{key:"extract",value:function(t,e,n){e=Tn.clamp(e,0,t.length);var o=(n=Tn.clamp(n,-1,t.length))-e+1;n<0&&(o=0),e>=t.length&&(o=0),n<e&&(o=0);var c=new Array(o).fill(null);if(o===0)return c;for(var g=0,v=e;v<=n;v++)c[g++]=t[v];return c}}])}(),Oo=function(){return f(function i(){l(this,i)},[{key:"compare",value:function(i,t){var e=i,n=t;return Dt.compare(e,n)}},{key:"interfaces_",get:function(){return[et]}}])}(),Mo=function(){return f(function i(){l(this,i)},[{key:"compare",value:function(i,t){var e=i,n=t;if(e.length<n.length)return-1;if(e.length>n.length)return 1;if(e.length===0)return 0;var o=Dt.compare(e,n);return Dt.isEqualReversed(e,n)?0:o}},{key:"OLDcompare",value:function(i,t){var e=i,n=t;if(e.length<n.length)return-1;if(e.length>n.length)return 1;if(e.length===0)return 0;for(var o=Dt.increasingDirection(e),c=Dt.increasingDirection(n),g=o>0?0:e.length-1,v=c>0?0:e.length-1,x=0;x<e.length;x++){var I=e[g].compareTo(n[v]);if(I!==0)return I;g+=o,v+=c}return 0}},{key:"interfaces_",get:function(){return[et]}}])}();Dt.ForwardComparator=Oo,Dt.BidirectionalComparator=Mo,Dt.coordArrayType=new Array(0).fill(null);var yi=function(){return f(function i(t){l(this,i),this.str=t},[{key:"append",value:function(i){this.str+=i}},{key:"setCharAt",value:function(i,t){this.str=this.str.substr(0,i)+t+this.str.substr(i+1)}},{key:"toString",value:function(){return this.str}}])}(),Mn=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getM",value:function(t){return this.hasM()?this._coordinates[t].getM():H.NaN}},{key:"setOrdinate",value:function(t,e,n){switch(e){case mt.X:this._coordinates[t].x=n;break;case mt.Y:this._coordinates[t].y=n;break;default:this._coordinates[t].setOrdinate(e,n)}}},{key:"getZ",value:function(t){return this.hasZ()?this._coordinates[t].getZ():H.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(t,e){switch(e){case mt.X:return this._coordinates[t].x;case mt.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var t=arguments[0];return this._coordinates[t]}if(arguments.length===2){var e=arguments[0];arguments[1].setCoordinate(this._coordinates[e])}}},{key:"getCoordinateCopy",value:function(t){var e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}},{key:"createCoordinate",value:function(){return gi.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(t){return this._coordinates[t].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}},{key:"copy",value:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++){var n=this.createCoordinate();n.setCoordinate(this._coordinates[e]),t[e]=n}return new i(t,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var t=new yi(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}},{key:"getY",value:function(t){return this._coordinates[t].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[mt,k]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];i.constructor_.call(this,t,Dt.dimension(t),Dt.measures(t))}else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)this._coordinates[n]=new z}else if(gt(arguments[0],mt)){var o=arguments[0];if(o===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=o.getDimension(),this._measures=o.getMeasures(),this._coordinates=new Array(o.size()).fill(null);for(var c=0;c<this._coordinates.length;c++)this._coordinates[c]=o.getCoordinateCopy(c)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var g=arguments[0],v=arguments[1];i.constructor_.call(this,g,v,Dt.measures(g))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var x=arguments[0],I=arguments[1];this._coordinates=new Array(x).fill(null),this._dimension=I;for(var G=0;G<x;G++)this._coordinates[G]=gi.create(I)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var X=arguments[0],j=arguments[1],tt=arguments[2];this._dimension=j,this._measures=tt,this._coordinates=X===null?new Array(0).fill(null):X}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var rt=arguments[0],ut=arguments[1],dt=arguments[2];this._coordinates=new Array(rt).fill(null),this._dimension=ut,this._measures=dt;for(var vt=0;vt<rt;vt++)this._coordinates[vt]=this.createCoordinate()}}}}])}(),pr=function(){function i(){l(this,i)}return f(i,[{key:"readResolve",value:function(){return i.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new Mn(arguments[0]);if(gt(arguments[0],mt))return new Mn(arguments[0])}else{if(arguments.length===2){var t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new Mn(arguments[0],t)}if(arguments.length===3){var e=arguments[2],n=arguments[1]-e;return e>1&&(e=1),n>3&&(n=3),n<2&&(n=2),new Mn(arguments[0],n+e,e)}}}},{key:"interfaces_",get:function(){return[ks,k]}}],[{key:"instance",value:function(){return i.instanceObject}}])}();pr.instanceObject=new pr;var _r=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof it){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&S(t,"equalsExact",this,1).call(this,e,n)}return S(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return it.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var e=new ot,n=0;n<this._geometries.length;n++)for(var o=this._geometries[n].getBoundary(),c=0;c<o.getNumGeometries();c++)e.add(o.getGeometryN(c));var g=new Array(e.size()).fill(null);return this.getFactory().createMultiLineString(e.toArray(g))}},{key:"getGeometryType",value:function(){return it.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[Ss]}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];jt.constructor_.call(this,e,n)}}])}(jt),Cs=function(){return f(function i(){l(this,i)},[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])}(),Po=function(i){function t(){var e;return l(this,t),(e=u(this,t)).map=new Map,e}return d(t,i),f(t,[{key:"get",value:function(e){return this.map.get(e)||null}},{key:"put",value:function(e,n){return this.map.set(e,n),n}},{key:"values",value:function(){for(var e=new ot,n=this.map.values(),o=n.next();!o.done;)e.add(o.value),o=n.next();return e}},{key:"entrySet",value:function(){var e=new hr;return this.map.entries().forEach(function(n){return e.add(n)}),e}},{key:"size",value:function(){return this.map.size()}}])}(Cs),fe=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"equals",value:function(t){if(!(t instanceof i))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale}},{key:"compareTo",value:function(t){var e=t,n=this.getMaximumSignificantDigits(),o=e.getMaximumSignificantDigits();return oi.compare(n,o)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===i.FLOATING||this._modelType===i.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var t="UNKNOWN";return this._modelType===i.FLOATING?t="Floating":this._modelType===i.FLOATING_SINGLE?t="Floating-Single":this._modelType===i.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var t=arguments[0];return H.isNaN(t)||this._modelType===i.FLOATING_SINGLE?t:this._modelType===i.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof z){var e=arguments[0];if(this._modelType===i.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}}},{key:"getMaximumSignificantDigits",value:function(){var t=16;return this._modelType===i.FLOATING?t=16:this._modelType===i.FLOATING_SINGLE?t=6:this._modelType===i.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}},{key:"setScale",value:function(t){this._scale=Math.abs(t)}},{key:"interfaces_",get:function(){return[k,W]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=i.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof rn){var t=arguments[0];this._modelType=t,t===i.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var e=arguments[0];this._modelType=i.FIXED,this.setScale(e)}else if(arguments[0]instanceof i){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}}}},{key:"mostPrecise",value:function(t,e){return t.compareTo(e)>=0?t:e}}])}(),rn=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"readResolve",value:function(){return i.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){this._name=null;var t=arguments[0];this._name=t,i.nameToTypeMap.put(t,this)}}])}();rn.nameToTypeMap=new Po,fe.Type=rn,fe.FIXED=new rn("FIXED"),fe.FLOATING=new rn("FLOATING"),fe.FLOATING_SINGLE=new rn("FLOATING SINGLE"),fe.maximumPreciseValue=9007199254740992;var xr=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof it){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&S(t,"equalsExact",this,1).call(this,e,n)}return S(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Q.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return it.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new _t}},{key:"getGeometryType",value:function(){return it.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[ws]}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];jt.constructor_.call(this,e,n)}}])}(jt),sn=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"createEmpty",value:function(t){switch(t){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new $("Invalid dimension: "+t)}}},{key:"toGeometry",value:function(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new z(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new z(t.getMinX(),t.getMinY()),new z(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new z(t.getMinX(),t.getMinY()),new z(t.getMinX(),t.getMaxY()),new z(t.getMaxX(),t.getMaxY()),new z(t.getMaxX(),t.getMinY()),new z(t.getMinX(),t.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(gt(arguments[0],mt))return new Ln(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new xr(null,this):arguments.length===1?new xr(arguments[0],this):void 0}},{key:"buildGeometry",value:function(t){for(var e=null,n=!1,o=!1,c=t.iterator();c.hasNext();){var g=c.next(),v=g.getTypeCode();e===null&&(e=v),v!==e&&(n=!0),g instanceof jt&&(o=!0)}if(e===null)return this.createGeometryCollection();if(n||o)return this.createGeometryCollection(i.toGeometryArray(t));var x=t.iterator().next();if(t.size()>1){if(x instanceof fi)return this.createMultiPolygon(i.toPolygonArray(t));if(x instanceof Ln)return this.createMultiLineString(i.toLineStringArray(t));if(x instanceof vr)return this.createMultiPoint(i.toPointArray(t));nt.shouldNeverReachHere("Unhandled geometry type: "+x.getGeometryType())}return x}},{key:"createMultiPointFromCoords",value:function(t){return this.createMultiPoint(t!==null?this.getCoordinateSequenceFactory().create(t):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof z){var t=arguments[0];return this.createPoint(t!==null?this.getCoordinateSequenceFactory().create([t]):null)}if(gt(arguments[0],mt))return new vr(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(gt(arguments[0],mt)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Rn){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2)return new fi(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new jt(null,this):arguments.length===1?new jt(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(gt(arguments[0],mt))return new Rn(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new _r(null,this):arguments.length===1?new _r(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new mr(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new mr(arguments[0],this);if(gt(arguments[0],mt)){var t=arguments[0];if(t===null)return this.createMultiPoint(new Array(0).fill(null));for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var o=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());Ve.copy(t,n,o,0,1),e[n]=this.createPoint(o)}return this.createMultiPoint(e)}}}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)i.constructor_.call(this,new fe,0);else if(arguments.length===1){if(gt(arguments[0],ks)){var t=arguments[0];i.constructor_.call(this,new fe,0,t)}else if(arguments[0]instanceof fe){var e=arguments[0];i.constructor_.call(this,e,0,i.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var n=arguments[0],o=arguments[1];i.constructor_.call(this,n,o,i.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var c=arguments[0],g=arguments[1],v=arguments[2];this._precisionModel=c,this._coordinateSequenceFactory=v,this._SRID=g}}},{key:"toMultiPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toGeometryArray",value:function(t){if(t===null)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return pr.instance()}},{key:"toMultiLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toMultiPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLinearRingArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"createPointFromInternalCoord",value:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}}])}(),Er="XY",Ao="XYZ",Do="XYM",Fo="XYZM",Ts={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Ls="EMPTY",vi=1,Le=2,Ge=3,Rs=4,an=5,qo=6;for(var Go in Ts)Ts[Go].toUpperCase();var Bo=function(){return f(function i(t){l(this,i),this.wkt=t,this.index_=-1},[{key:"isAlpha_",value:function(i){return i>="a"&&i<="z"||i>="A"&&i<="Z"}},{key:"isNumeric_",value:function(i,t){return i>="0"&&i<="9"||i=="."&&!(t!==void 0&&t)}},{key:"isWhiteSpace_",value:function(i){return i==" "||i=="	"||i=="\r"||i==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var i,t=this.nextChar_(),e=this.index_,n=t;if(t=="(")i=Le;else if(t==",")i=an;else if(t==")")i=Ge;else if(this.isNumeric_(t)||t=="-")i=Rs,n=this.readNumber_();else if(this.isAlpha_(t))i=vi,n=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(t!=="")throw new Error("Unexpected character: "+t);i=qo}return{position:e,value:n,type:i}}},{key:"readNumber_",value:function(){var i,t=this.index_,e=!1,n=!1;do i=="."?e=!0:i!="e"&&i!="E"||(n=!0),i=this.nextChar_();while(this.isNumeric_(i,e)||!n&&(i=="e"||i=="E")||n&&(i=="-"||i=="+"));return parseFloat(this.wkt.substring(t,this.index_--))}},{key:"readText_",value:function(){var i,t=this.index_;do i=this.nextChar_();while(this.isAlpha_(i));return this.wkt.substring(t,this.index_--).toUpperCase()}}])}(),Yo=function(){return f(function i(t,e){l(this,i),this.lexer_=t,this.token_,this.layout_=Er,this.factory=e},[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(i){return this.token_.type==i}},{key:"match",value:function(i){var t=this.isTokenType(i);return t&&this.consume_(),t}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var i=Er,t=this.token_;if(this.isTokenType(vi)){var e=t.value;e==="Z"?i=Ao:e==="M"?i=Do:e==="ZM"&&(i=Fo),i!==Er&&this.consume_()}return i}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(Le)){var i=[];do i.push(this.parseGeometry_());while(this.match(an));if(this.match(Ge))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(Le)){var i=this.parsePoint_();if(this.match(Ge))return i}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(Le)){var i=this.parsePointList_();if(this.match(Ge))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(Le)){var i=this.parseLineStringTextList_();if(this.match(Ge))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var i;if(this.match(Le)){if(i=this.token_.type==Le?this.parsePointTextList_():this.parsePointList_(),this.match(Ge))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(Le)){var i=this.parseLineStringTextList_();if(this.match(Ge))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(Le)){var i=this.parsePolygonTextList_();if(this.match(Ge))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var i=[],t=this.layout_.length,e=0;e<t;++e){var n=this.token_;if(!this.match(Rs))break;i.push(n.value)}if(i.length==t)return i;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var i=[this.parsePoint_()];this.match(an);)i.push(this.parsePoint_());return i}},{key:"parsePointTextList_",value:function(){for(var i=[this.parsePointText_()];this.match(an);)i.push(this.parsePointText_());return i}},{key:"parseLineStringTextList_",value:function(){for(var i=[this.parseLineStringText_()];this.match(an);)i.push(this.parseLineStringText_());return i}},{key:"parsePolygonTextList_",value:function(){for(var i=[this.parsePolygonText_()];this.match(an);)i.push(this.parsePolygonText_());return i}},{key:"isEmptyGeometry_",value:function(){var i=this.isTokenType(vi)&&this.token_.value==Ls;return i&&this.consume_(),i}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var i=this.factory,t=function(ut){return h(z,R(ut))},e=function(ut){var dt=ut.map(function(vt){return i.createLinearRing(vt.map(t))});return dt.length>1?i.createPolygon(dt[0],dt.slice(1)):i.createPolygon(dt[0])},n=this.token_;if(this.match(vi)){var o=n.value;if(this.layout_=this.parseGeometryLayout_(),o=="GEOMETRYCOLLECTION"){var c=this.parseGeometryCollectionText_();return i.createGeometryCollection(c)}switch(o){case"POINT":var g=this.parsePointText_();return g?i.createPoint(h(z,R(g))):i.createPoint();case"LINESTRING":var v=this.parseLineStringText_().map(t);return i.createLineString(v);case"LINEARRING":var x=this.parseLineStringText_().map(t);return i.createLinearRing(x);case"POLYGON":var I=this.parsePolygonText_();return I&&I.length!==0?e(I):i.createPolygon();case"MULTIPOINT":var G=this.parseMultiPointText_();if(!G||G.length===0)return i.createMultiPoint();var X=G.map(t).map(function(ut){return i.createPoint(ut)});return i.createMultiPoint(X);case"MULTILINESTRING":var j=this.parseMultiLineStringText_().map(function(ut){return i.createLineString(ut.map(t))});return i.createMultiLineString(j);case"MULTIPOLYGON":var tt=this.parseMultiPolygonText_();if(!tt||tt.length===0)return i.createMultiPolygon();var rt=tt.map(e);return i.createMultiPolygon(rt);default:throw new Error("Invalid geometry type: "+o)}}throw new Error(this.formatErrorMessage_())}}])}();function Os(i){if(i.isEmpty())return"";var t=i.getCoordinate(),e=[t.x,t.y];return t.z===void 0||Number.isNaN(t.z)||e.push(t.z),t.m===void 0||Number.isNaN(t.m)||e.push(t.m),e.join(" ")}function Pn(i){for(var t=i.getCoordinates().map(function(c){var g=[c.x,c.y];return c.z===void 0||Number.isNaN(c.z)||g.push(c.z),c.m===void 0||Number.isNaN(c.m)||g.push(c.m),g}),e=[],n=0,o=t.length;n<o;++n)e.push(t[n].join(" "));return e.join(", ")}function Ms(i){var t=[];t.push("("+Pn(i.getExteriorRing())+")");for(var e=0,n=i.getNumInteriorRing();e<n;++e)t.push("("+Pn(i.getInteriorRingN(e))+")");return t.join(", ")}var zo={Point:Os,LineString:Pn,LinearRing:Pn,Polygon:Ms,MultiPoint:function(i){for(var t=[],e=0,n=i.getNumGeometries();e<n;++e)t.push("("+Os(i.getGeometryN(e))+")");return t.join(", ")},MultiLineString:function(i){for(var t=[],e=0,n=i.getNumGeometries();e<n;++e)t.push("("+Pn(i.getGeometryN(e))+")");return t.join(", ")},MultiPolygon:function(i){for(var t=[],e=0,n=i.getNumGeometries();e<n;++e)t.push("("+Ms(i.getGeometryN(e))+")");return t.join(", ")},GeometryCollection:function(i){for(var t=[],e=0,n=i.getNumGeometries();e<n;++e)t.push(Ps(i.getGeometryN(e)));return t.join(", ")}};function Ps(i){var t=i.getGeometryType(),e=zo[t];t=t.toUpperCase();var n=function(o){var c="";if(o.isEmpty())return c;var g=o.getCoordinate();return g.z===void 0||Number.isNaN(g.z)||(c+="Z"),g.m===void 0||Number.isNaN(g.m)||(c+="M"),c}(i);return n.length>0&&(t+=" "+n),i.isEmpty()?t+" "+Ls:t+" ("+e(i)+")"}var Xo=function(){return f(function i(t){l(this,i),this.geometryFactory=t||new sn,this.precisionModel=this.geometryFactory.getPrecisionModel()},[{key:"read",value:function(i){var t=new Bo(i);return new Yo(t,this.geometryFactory).parse()}},{key:"write",value:function(i){return Ps(i)}}])}(),kr=function(){return f(function i(t){l(this,i),this.parser=new Xo(t)},[{key:"write",value:function(i){return this.parser.write(i)}}],[{key:"toLineString",value:function(i,t){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+i.x+" "+i.y+", "+t.x+" "+t.y+" )"}}])}(),bt=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getIndexAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}},{key:"getTopologySummary",value:function(){var t=new yi;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}},{key:"computeIntersection",value:function(t,e,n,o){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=o,this._result=this.computeIntersect(t,e,n,o)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}},{key:"getIntersection",value:function(t){return this._intPt[t]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==i.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(t,e){return i.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])}},{key:"isCollinear",value:function(){return this._result===i.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return kr.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+kr.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(t,e){return this._inputLines[t][e]}},{key:"isIntersection",value:function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new z,this._intPt[1]=new z,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(t,e,n){var o=Math.abs(n.x-e.x),c=Math.abs(n.y-e.y),g=-1;if(t.equals(e))g=0;else if(t.equals(n))g=o>c?o:c;else{var v=Math.abs(t.x-e.x),x=Math.abs(t.y-e.y);(g=o>c?v:x)!==0||t.equals(e)||(g=Math.max(v,x))}return nt.isTrue(!(g===0&&!t.equals(e)),"Bad distance calculation"),g}},{key:"nonRobustComputeEdgeDistance",value:function(t,e,n){var o=t.x-e.x,c=t.y-e.y,g=Math.sqrt(o*o+c*c);return nt.isTrue(!(g===0&&!t.equals(e)),"Invalid distance calculation"),g}}])}();bt.DONT_INTERSECT=0,bt.DO_INTERSECT=1,bt.COLLINEAR=2,bt.NO_INTERSECTION=0,bt.POINT_INTERSECTION=1,bt.COLLINEAR_INTERSECTION=2;var $e=function(i){function t(){return l(this,t),u(this,t)}return d(t,i),f(t,[{key:"isInSegmentEnvelopes",value:function(e){var n=new It(this._inputLines[0][0],this._inputLines[0][1]),o=new It(this._inputLines[1][0],this._inputLines[1][1]);return n.contains(e)&&o.contains(e)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return S(t,"computeIntersection",this,1).apply(this,arguments);var e=arguments[0],n=arguments[1],o=arguments[2];if(this._isProper=!1,It.intersects(n,o,e)&&ht.index(n,o,e)===0&&ht.index(o,n,e)===0)return this._isProper=!0,(e.equals(n)||e.equals(o))&&(this._isProper=!1),this._result=bt.POINT_INTERSECTION,null;this._result=bt.NO_INTERSECTION}},{key:"intersection",value:function(e,n,o,c){var g=this.intersectionSafe(e,n,o,c);return this.isInSegmentEnvelopes(g)||(g=new z(t.nearestEndpoint(e,n,o,c))),this._precisionModel!==null&&this._precisionModel.makePrecise(g),g}},{key:"checkDD",value:function(e,n,o,c,g){var v=gr.intersection(e,n,o,c),x=this.isInSegmentEnvelopes(v);ne.out.println("DD in env = "+x+"  --------------------- "+v),g.distance(v)>1e-4&&ne.out.println("Distance = "+g.distance(v))}},{key:"intersectionSafe",value:function(e,n,o,c){var g=yr.intersection(e,n,o,c);return g===null&&(g=t.nearestEndpoint(e,n,o,c)),g}},{key:"computeCollinearIntersection",value:function(e,n,o,c){var g=It.intersects(e,n,o),v=It.intersects(e,n,c),x=It.intersects(o,c,e),I=It.intersects(o,c,n);return g&&v?(this._intPt[0]=o,this._intPt[1]=c,bt.COLLINEAR_INTERSECTION):x&&I?(this._intPt[0]=e,this._intPt[1]=n,bt.COLLINEAR_INTERSECTION):g&&x?(this._intPt[0]=o,this._intPt[1]=e,!o.equals(e)||v||I?bt.COLLINEAR_INTERSECTION:bt.POINT_INTERSECTION):g&&I?(this._intPt[0]=o,this._intPt[1]=n,!o.equals(n)||v||x?bt.COLLINEAR_INTERSECTION:bt.POINT_INTERSECTION):v&&x?(this._intPt[0]=c,this._intPt[1]=e,!c.equals(e)||g||I?bt.COLLINEAR_INTERSECTION:bt.POINT_INTERSECTION):v&&I?(this._intPt[0]=c,this._intPt[1]=n,!c.equals(n)||g||x?bt.COLLINEAR_INTERSECTION:bt.POINT_INTERSECTION):bt.NO_INTERSECTION}},{key:"computeIntersect",value:function(e,n,o,c){if(this._isProper=!1,!It.intersects(e,n,o,c))return bt.NO_INTERSECTION;var g=ht.index(e,n,o),v=ht.index(e,n,c);if(g>0&&v>0||g<0&&v<0)return bt.NO_INTERSECTION;var x=ht.index(o,c,e),I=ht.index(o,c,n);return x>0&&I>0||x<0&&I<0?bt.NO_INTERSECTION:g===0&&v===0&&x===0&&I===0?this.computeCollinearIntersection(e,n,o,c):(g===0||v===0||x===0||I===0?(this._isProper=!1,e.equals2D(o)||e.equals2D(c)?this._intPt[0]=e:n.equals2D(o)||n.equals2D(c)?this._intPt[0]=n:g===0?this._intPt[0]=new z(o):v===0?this._intPt[0]=new z(c):x===0?this._intPt[0]=new z(e):I===0&&(this._intPt[0]=new z(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,o,c)),bt.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(e,n,o,c){var g=e,v=de.pointToSegment(e,o,c),x=de.pointToSegment(n,o,c);return x<v&&(v=x,g=n),(x=de.pointToSegment(o,e,n))<v&&(v=x,g=o),(x=de.pointToSegment(c,e,n))<v&&(v=x,g=c),g}}])}(bt),Uo=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"countSegment",value:function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,o=e.x;return n>o&&(n=e.x,o=t.x),this._p.x>=n&&this._p.x<=o&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var c=ht.index(t,e,this._p);if(c===ht.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(c=-c),c===ht.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==T.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?T.BOUNDARY:this._crossingCount%2==1?T.INTERIOR:T.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof z&&gt(arguments[1],mt)){for(var t=arguments[1],e=new i(arguments[0]),n=new z,o=new z,c=1;c<t.size();c++)if(t.getCoordinate(c,n),t.getCoordinate(c-1,o),e.countSegment(n,o),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof z&&arguments[1]instanceof Array){for(var g=arguments[1],v=new i(arguments[0]),x=1;x<g.length;x++){var I=g[x],G=g[x-1];if(v.countSegment(I,G),v.isOnSegment())return v.getLocation()}return v.getLocation()}}}])}(),wr=function(){function i(){l(this,i)}return f(i,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof z&&gt(arguments[1],mt)){for(var t=arguments[0],e=arguments[1],n=new $e,o=new z,c=new z,g=e.size(),v=1;v<g;v++)if(e.getCoordinate(v-1,o),e.getCoordinate(v,c),n.computeIntersection(t,o,c),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof z&&arguments[1]instanceof Array){for(var x=arguments[0],I=arguments[1],G=new $e,X=1;X<I.length;X++){var j=I[X-1],tt=I[X];if(G.computeIntersection(x,j,tt),G.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(t,e){return Uo.locatePointInRing(t,e)}},{key:"isInRing",value:function(t,e){return i.locateInRing(t,e)!==T.EXTERIOR}}])}(),ie=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"setAllLocations",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}},{key:"isNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==T.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===T.NONE&&(this.location[e]=t)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[J.ON]=this.location[J.ON],e[J.LEFT]=T.NONE,e[J.RIGHT]=T.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===T.NONE&&n<t.location.length&&(this.location[n]=t.location[n])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var t=this.location[J.LEFT];this.location[J.LEFT]=this.location[J.RIGHT],this.location[J.RIGHT]=t}},{key:"toString",value:function(){var t=new Cn;return this.location.length>1&&t.append(T.toLocationSymbol(this.location[J.LEFT])),t.append(T.toLocationSymbol(this.location[J.ON])),this.location.length>1&&t.append(T.toLocationSymbol(this.location[J.RIGHT])),t.toString()}},{key:"setLocations",value:function(t,e,n){this.location[J.ON]=t,this.location[J.LEFT]=e,this.location[J.RIGHT]=n}},{key:"get",value:function(t){return t<this.location.length?this.location[t]:T.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===T.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var t=arguments[0];this.setLocation(J.ON,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.location[e]=n}}},{key:"init",value:function(t){this.location=new Array(t).fill(null),this.setAllLocations(T.NONE)}},{key:"isEqualOnSide",value:function(t,e){return this.location[e]===t.location[e]}},{key:"allPositionsEqual",value:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[J.ON]=e}else if(arguments[0]instanceof i){var n=arguments[0];if(this.init(n.location.length),n!==null)for(var o=0;o<this.location.length;o++)this.location[o]=n.location[o]}}else if(arguments.length===3){var c=arguments[0],g=arguments[1],v=arguments[2];this.init(3),this.location[J.ON]=c,this.location[J.LEFT]=g,this.location[J.RIGHT]=v}}}])}(),re=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getGeometryCount",value:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}},{key:"setAllLocations",value:function(t,e){this.elt[t].setAllLocations(e)}},{key:"isNull",value:function(t){return this.elt[t].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}}},{key:"isLine",value:function(t){return this.elt[t].isLine()}},{key:"merge",value:function(t){for(var e=0;e<2;e++)this.elt[e]===null&&t.elt[e]!==null?this.elt[e]=new ie(t.elt[e]):this.elt[e].merge(t.elt[e])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var t=arguments[0];return this.elt[t].get(J.ON)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}}},{key:"toString",value:function(){var t=new Cn;return this.elt[0]!==null&&(t.append("A:"),t.append(this.elt[0].toString())),this.elt[1]!==null&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var t=arguments[0];return this.elt[t].isArea()}}},{key:"isAnyNull",value:function(t){return this.elt[t].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(J.ON,e)}else if(arguments.length===3){var n=arguments[0],o=arguments[1],c=arguments[2];this.elt[n].setLocation(o,c)}}},{key:"isEqualOnSide",value:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}},{key:"allPositionsEqual",value:function(t,e){return this.elt[t].allPositionsEqual(e)}},{key:"toLine",value:function(t){this.elt[t].isArea()&&(this.elt[t]=new ie(this.elt[t].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new ie(t),this.elt[1]=new ie(t)}else if(arguments[0]instanceof i){var e=arguments[0];this.elt[0]=new ie(e.elt[0]),this.elt[1]=new ie(e.elt[1])}}else if(arguments.length===2){var n=arguments[0],o=arguments[1];this.elt[0]=new ie(T.NONE),this.elt[1]=new ie(T.NONE),this.elt[n].setLocation(o)}else if(arguments.length===3){var c=arguments[0],g=arguments[1],v=arguments[2];this.elt[0]=new ie(c,g,v),this.elt[1]=new ie(c,g,v)}else if(arguments.length===4){var x=arguments[0],I=arguments[1],G=arguments[2],X=arguments[3];this.elt[0]=new ie(T.NONE,T.NONE,T.NONE),this.elt[1]=new ie(T.NONE,T.NONE,T.NONE),this.elt[x].setLocations(I,G,X)}}},{key:"toLineLabel",value:function(t){for(var e=new i(T.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e}}])}(),mi=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var i=new Array(this._pts.size()).fill(null),t=0;t<this._pts.size();t++)i[t]=this._pts.get(t);this._ring=this._geometryFactory.createLinearRing(i),this._isHole=ht.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(i){this._startDe=i;var t=i,e=!0;do{if(t===null)throw new Te("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new Te("Directed Edge visited twice during ring-building at "+t.getCoordinate());this._edges.add(t);var n=t.getLabel();nt.isTrue(n.isArea()),this.mergeLabel(n),this.addPoints(t.getEdge(),t.isForward(),e),e=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(i){return this._pts.get(i)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var i=this._startDe;do{var t=i.getNode().getEdges().getOutgoingDegree(this);t>this._maxNodeDegree&&(this._maxNodeDegree=t),i=this.getNext(i)}while(i!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(i,t,e){var n=i.getCoordinates();if(t){var o=1;e&&(o=0);for(var c=o;c<n.length;c++)this._pts.add(n[c])}else{var g=n.length-2;e&&(g=n.length-1);for(var v=g;v>=0;v--)this._pts.add(n[v])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var i=this._startDe;do i.getEdge().setInResult(!0),i=i.getNext();while(i!==this._startDe)}},{key:"containsPoint",value:function(i){var t=this.getLinearRing();if(!t.getEnvelopeInternal().contains(i)||!wr.isInRing(i,t.getCoordinates()))return!1;for(var e=this._holes.iterator();e.hasNext();)if(e.next().containsPoint(i))return!1;return!0}},{key:"addHole",value:function(i){this._holes.add(i)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var i=arguments[0];this.mergeLabel(i,0),this.mergeLabel(i,1)}else if(arguments.length===2){var t=arguments[1],e=arguments[0].getLocation(t,J.RIGHT);if(e===T.NONE)return null;if(this._label.getLocation(t)===T.NONE)return this._label.setLocation(t,e),null}}},{key:"setShell",value:function(i){this._shell=i,i!==null&&i.addHole(this)}},{key:"toPolygon",value:function(i){for(var t=new Array(this._holes.size()).fill(null),e=0;e<this._holes.size();e++)t[e]=this._holes.get(e).getLinearRing();return i.createPolygon(this.getLinearRing(),t)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new ot,this._pts=new ot,this._label=new re(T.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new ot,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var i=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(i),this.computeRing()}}}}])}(),Vo=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"setEdgeRing",value:function(e,n){e.setMinEdgeRing(n)}},{key:"getNext",value:function(e){return e.getNextMin()}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];mi.constructor_.call(this,e,n)}}])}(mi),Ho=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"buildMinimalRings",value:function(){var e=new ot,n=this._startDe;do{if(n.getMinEdgeRing()===null){var o=new Vo(n,this._geometryFactory);e.add(o)}n=n.getNext()}while(n!==this._startDe);return e}},{key:"setEdgeRing",value:function(e,n){e.setEdgeRing(n)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var e=this._startDe;do e.getNode().getEdges().linkMinimalDirectedEdges(this),e=e.getNext();while(e!==this._startDe)}},{key:"getNext",value:function(e){return e.getNext()}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];mi.constructor_.call(this,e,n)}}])}(mi),As=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"setVisited",value:function(i){this._isVisited=i}},{key:"setInResult",value:function(i){this._isInResult=i}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(i){this._label=i}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(i){this._isCovered=i,this._isCoveredSet=!0}},{key:"updateIM",value:function(i){nt.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(i)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var i=arguments[0];this._label=i}}}}])}(),di=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"isIncidentEdgeInResult",value:function(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();)if(e.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(e){e.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(e){}},{key:"computeMergedLocation",value:function(e,n){var o=T.NONE;if(o=this._label.getLocation(n),!e.isNull(n)){var c=e.getLocation(n);o!==T.BOUNDARY&&(o=c)}return o}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return S(t,"setLabel",this,1).apply(this,arguments);var e=arguments[0],n=arguments[1];this._label===null?this._label=new re(e,n):this._label.setLocation(e,n)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof t){var e=arguments[0];this.mergeLabel(e._label)}else if(arguments[0]instanceof re)for(var n=arguments[0],o=0;o<2;o++){var c=this.computeMergedLocation(n,o);this._label.getLocation(o)===T.NONE&&this._label.setLocation(o,c)}}},{key:"add",value:function(e){this._edges.insert(e),e.setNode(this)}},{key:"setLabelBoundary",value:function(e){if(this._label===null)return null;var n=T.NONE;this._label!==null&&(n=this._label.getLocation(e));var o=null;switch(n){case T.BOUNDARY:o=T.INTERIOR;break;case T.INTERIOR:default:o=T.BOUNDARY}this._label.setLocation(e,o)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new re(0,T.NONE)}}])}(As),Wo=function(i){function t(){return l(this,t),u(this,t,arguments)}return d(t,i),f(t)}(Cs);function Ds(i){return i==null?0:i.color}function xt(i){return i==null?null:i.parent}function pe(i,t){i!==null&&(i.color=t)}function Ir(i){return i==null?null:i.left}function Fs(i){return i==null?null:i.right}var An=function(i){function t(){var e;return l(this,t),(e=u(this,t)).root_=null,e.size_=0,e}return d(t,i),f(t,[{key:"get",value:function(e){for(var n=this.root_;n!==null;){var o=e.compareTo(n.key);if(o<0)n=n.left;else{if(!(o>0))return n.value;n=n.right}}return null}},{key:"put",value:function(e,n){if(this.root_===null)return this.root_={key:e,value:n,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var o,c,g=this.root_;do if(o=g,(c=e.compareTo(g.key))<0)g=g.left;else{if(!(c>0)){var v=g.value;return g.value=n,v}g=g.right}while(g!==null);var x={key:e,left:null,right:null,value:n,parent:o,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return c<0?o.left=x:o.right=x,this.fixAfterInsertion(x),this.size_++,null}},{key:"fixAfterInsertion",value:function(e){var n;for(e.color=1;e!=null&&e!==this.root_&&e.parent.color===1;)xt(e)===Ir(xt(xt(e)))?Ds(n=Fs(xt(xt(e))))===1?(pe(xt(e),0),pe(n,0),pe(xt(xt(e)),1),e=xt(xt(e))):(e===Fs(xt(e))&&(e=xt(e),this.rotateLeft(e)),pe(xt(e),0),pe(xt(xt(e)),1),this.rotateRight(xt(xt(e)))):Ds(n=Ir(xt(xt(e))))===1?(pe(xt(e),0),pe(n,0),pe(xt(xt(e)),1),e=xt(xt(e))):(e===Ir(xt(e))&&(e=xt(e),this.rotateRight(e)),pe(xt(e),0),pe(xt(xt(e)),1),this.rotateLeft(xt(xt(e))));this.root_.color=0}},{key:"values",value:function(){var e=new ot,n=this.getFirstEntry();if(n!==null)for(e.add(n.value);(n=t.successor(n))!==null;)e.add(n.value);return e}},{key:"entrySet",value:function(){var e=new hr,n=this.getFirstEntry();if(n!==null)for(e.add(n);(n=t.successor(n))!==null;)e.add(n);return e}},{key:"rotateLeft",value:function(e){if(e!=null){var n=e.right;e.right=n.left,n.left!=null&&(n.left.parent=e),n.parent=e.parent,e.parent==null?this.root_=n:e.parent.left===e?e.parent.left=n:e.parent.right=n,n.left=e,e.parent=n}}},{key:"rotateRight",value:function(e){if(e!=null){var n=e.left;e.left=n.right,n.right!=null&&(n.right.parent=e),n.parent=e.parent,e.parent==null?this.root_=n:e.parent.right===e?e.parent.right=n:e.parent.left=n,n.right=e,e.parent=n}}},{key:"getFirstEntry",value:function(){var e=this.root_;if(e!=null)for(;e.left!=null;)e=e.left;return e}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(e){for(var n=this.root_;n!==null;){var o=e.compareTo(n.key);if(o<0)n=n.left;else{if(!(o>0))return!0;n=n.right}}return!1}}],[{key:"successor",value:function(e){var n;if(e===null)return null;if(e.right!==null){for(n=e.right;n.left!==null;)n=n.left;return n}n=e.parent;for(var o=e;n!==null&&o===n.right;)o=n,n=n.parent;return n}}])}(Wo),qs=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"find",value:function(i){return this.nodeMap.get(i)}},{key:"addNode",value:function(){if(arguments[0]instanceof z){var i=arguments[0],t=this.nodeMap.get(i);return t===null&&(t=this.nodeFact.createNode(i),this.nodeMap.put(i,t)),t}if(arguments[0]instanceof di){var e=arguments[0],n=this.nodeMap.get(e.getCoordinate());return n===null?(this.nodeMap.put(e.getCoordinate(),e),e):(n.mergeLabel(e),n)}}},{key:"print",value:function(i){for(var t=this.iterator();t.hasNext();)t.next().print(i)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(i){for(var t=new ot,e=this.iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(i)===T.BOUNDARY&&t.add(n)}return t}},{key:"add",value:function(i){var t=i.getCoordinate();this.addNode(t).add(i)}}],[{key:"constructor_",value:function(){this.nodeMap=new An,this.nodeFact=null;var i=arguments[0];this.nodeFact=i}}])}(),Vt=function(){function i(){l(this,i)}return f(i,null,[{key:"isNorthern",value:function(t){return t===i.NE||t===i.NW}},{key:"isOpposite",value:function(t,e){return t!==e&&(t-e+4)%4===2}},{key:"commonHalfPlane",value:function(t,e){if(t===e)return t;if((t-e+4)%4===2)return-1;var n=t<e?t:e;return n===0&&(t>e?t:e)===3?3:n}},{key:"isInHalfPlane",value:function(t,e){return e===i.SE?t===i.SE||t===i.SW:t===e||t===e+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new $("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?i.NE:i.SE:e>=0?i.NW:i.SW}if(arguments[0]instanceof z&&arguments[1]instanceof z){var n=arguments[0],o=arguments[1];if(o.x===n.x&&o.y===n.y)throw new $("Cannot compute the quadrant for two identical points "+n);return o.x>=n.x?o.y>=n.y?i.NE:i.SE:o.y>=n.y?i.NW:i.SW}}}])}();Vt.NE=0,Vt.NW=1,Vt.SW=2,Vt.SE=3;var Gs=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"compareDirection",value:function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:ht.index(t._p0,t._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(t){this._node=t}},{key:"print",value:function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),o=n.lastIndexOf("."),c=n.substring(o+1);t.print("  "+c+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}},{key:"compareTo",value:function(t){var e=t;return this.compareDirection(e)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}},{key:"computeLabel",value:function(t){}},{key:"init",value:function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Vt.quadrant(this._dx,this._dy),nt.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var t=arguments[0];this._edge=t}else if(arguments.length===3){var e=arguments[0],n=arguments[1],o=arguments[2];i.constructor_.call(this,e,n,o,null)}else if(arguments.length===4){var c=arguments[0],g=arguments[1],v=arguments[2],x=arguments[3];i.constructor_.call(this,c),this.init(g,v),this._label=x}}}])}(),Nr=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(e){return this._depth[e]}},{key:"setVisited",value:function(e){this._isVisited=e}},{key:"computeDirectedLabel",value:function(){this._label=new re(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(e,n){if(this._depth[e]!==-999&&this._depth[e]!==n)throw new Te("assigned depths do not match",this.getCoordinate());this._depth[e]=n}},{key:"isInteriorAreaEdge",value:function(){for(var e=!0,n=0;n<2;n++)this._label.isArea(n)&&this._label.getLocation(n,J.LEFT)===T.INTERIOR&&this._label.getLocation(n,J.RIGHT)===T.INTERIOR||(e=!1);return e}},{key:"setNextMin",value:function(e){this._nextMin=e}},{key:"print",value:function(e){S(t,"print",this,1).call(this,e),e.print(" "+this._depth[J.LEFT]+"/"+this._depth[J.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")}},{key:"setMinEdgeRing",value:function(e){this._minEdgeRing=e}},{key:"isLineEdge",value:function(){var e=this._label.isLine(0)||this._label.isLine(1),n=!this._label.isArea(0)||this._label.allPositionsEqual(0,T.EXTERIOR),o=!this._label.isArea(1)||this._label.allPositionsEqual(1,T.EXTERIOR);return e&&n&&o}},{key:"setEdgeRing",value:function(e){this._edgeRing=e}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var e=this._edge.getDepthDelta();return this._isForward||(e=-e),e}},{key:"setInResult",value:function(e){this._isInResult=e}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(e){this.print(e),e.print(" "),this._isForward?this._edge.print(e):this._edge.printReverse(e)}},{key:"setSym",value:function(e){this._sym=e}},{key:"setVisitedEdge",value:function(e){this.setVisited(e),this._sym.setVisited(e)}},{key:"setEdgeDepths",value:function(e,n){var o=this.getEdge().getDepthDelta();this._isForward||(o=-o);var c=1;e===J.LEFT&&(c=-1);var g=J.opposite(e),v=n+o*c;this.setDepth(e,n),this.setDepth(g,v)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(e){this._next=e}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var e=arguments[0],n=arguments[1];if(Gs.constructor_.call(this,e),this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var o=e.getNumPoints()-1;this.init(e.getCoordinate(o),e.getCoordinate(o-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(e,n){return e===T.EXTERIOR&&n===T.INTERIOR?1:e===T.INTERIOR&&n===T.EXTERIOR?-1:0}}])}(Gs),Bs=function(){return f(function i(){l(this,i)},[{key:"createNode",value:function(i){return new di(i,null)}}])}(),Ys=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"printEdges",value:function(i){i.println("Edges:");for(var t=0;t<this._edges.size();t++){i.println("edge "+t+":");var e=this._edges.get(t);e.print(i),e.eiList.print(i)}}},{key:"find",value:function(i){return this._nodes.find(i)}},{key:"addNode",value:function(){if(arguments[0]instanceof di){var i=arguments[0];return this._nodes.addNode(i)}if(arguments[0]instanceof z){var t=arguments[0];return this._nodes.addNode(t)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var i=this._nodes.iterator();i.hasNext();)i.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(i){ne.out.println(i)}},{key:"isBoundaryNode",value:function(i,t){var e=this._nodes.find(t);if(e===null)return!1;var n=e.getLabel();return n!==null&&n.getLocation(i)===T.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var i=this._nodes.iterator();i.hasNext();)i.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(i,t,e,n){return!!i.equals(e)&&ht.index(i,t,n)===ht.COLLINEAR&&Vt.quadrant(i,t)===Vt.quadrant(e,n)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(i){ne.out.print(i)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(i,t){for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e),o=n.getCoordinates();if(this.matchInSameDirection(i,t,o[0],o[1])||this.matchInSameDirection(i,t,o[o.length-1],o[o.length-2]))return n}return null}},{key:"insertEdge",value:function(i){this._edges.add(i)}},{key:"findEdgeEnd",value:function(i){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var e=t.next();if(e.getEdge()===i)return e}return null}},{key:"addEdges",value:function(i){for(var t=i.iterator();t.hasNext();){var e=t.next();this._edges.add(e);var n=new Nr(e,!0),o=new Nr(e,!1);n.setSym(o),o.setSym(n),this.add(n),this.add(o)}}},{key:"add",value:function(i){this._nodes.add(i),this._edgeEndList.add(i)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(i,t){for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e),o=n.getCoordinates();if(i.equals(o[0])&&t.equals(o[1]))return n}return null}}],[{key:"constructor_",value:function(){if(this._edges=new ot,this._nodes=null,this._edgeEndList=new ot,arguments.length===0)this._nodes=new qs(new Bs);else if(arguments.length===1){var i=arguments[0];this._nodes=new qs(i)}}},{key:"linkResultDirectedEdges",value:function(i){for(var t=i.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}}])}(),Zo=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"sortShellsAndHoles",value:function(t,e,n){for(var o=t.iterator();o.hasNext();){var c=o.next();c.isHole()?n.add(c):e.add(c)}}},{key:"computePolygons",value:function(t){for(var e=new ot,n=t.iterator();n.hasNext();){var o=n.next().toPolygon(this._geometryFactory);e.add(o)}return e}},{key:"placeFreeHoles",value:function(t,e){for(var n=e.iterator();n.hasNext();){var o=n.next();if(o.getShell()===null){var c=i.findEdgeRingContaining(o,t);if(c===null)throw new Te("unable to assign hole to a shell",o.getCoordinate(0));o.setShell(c)}}}},{key:"buildMinimalEdgeRings",value:function(t,e,n){for(var o=new ot,c=t.iterator();c.hasNext();){var g=c.next();if(g.getMaxNodeDegree()>2){g.linkDirectedEdgesForMinimalEdgeRings();var v=g.buildMinimalRings(),x=this.findShell(v);x!==null?(this.placePolygonHoles(x,v),e.add(x)):n.addAll(v)}else o.add(g)}return o}},{key:"buildMaximalEdgeRings",value:function(t){for(var e=new ot,n=t.iterator();n.hasNext();){var o=n.next();if(o.isInResult()&&o.getLabel().isArea()&&o.getEdgeRing()===null){var c=new Ho(o,this._geometryFactory);e.add(c),c.setInResult()}}return e}},{key:"placePolygonHoles",value:function(t,e){for(var n=e.iterator();n.hasNext();){var o=n.next();o.isHole()&&o.setShell(t)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(t){for(var e=0,n=null,o=t.iterator();o.hasNext();){var c=o.next();c.isHole()||(n=c,e++)}return nt.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n}},{key:"add",value:function(){if(arguments.length===1){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(arguments.length===2){var e=arguments[0],n=arguments[1];Ys.linkResultDirectedEdges(n);var o=this.buildMaximalEdgeRings(e),c=new ot,g=this.buildMinimalEdgeRings(o,this._shellList,c);this.sortShellsAndHoles(g,this._shellList,c),this.placeFreeHoles(this._shellList,c)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new ot;var t=arguments[0];this._geometryFactory=t}},{key:"findEdgeRingContaining",value:function(t,e){for(var n=t.getLinearRing(),o=n.getEnvelopeInternal(),c=n.getCoordinateN(0),g=null,v=null,x=e.iterator();x.hasNext();){var I=x.next(),G=I.getLinearRing(),X=G.getEnvelopeInternal();if(!X.equals(o)&&X.contains(o)){c=Dt.ptNotInList(n.getCoordinates(),G.getCoordinates());var j=!1;wr.isInRing(c,G.getCoordinates())&&(j=!0),j&&(g===null||v.contains(X))&&(v=(g=I).getLinearRing().getEnvelopeInternal())}}return g}}])}(),zs=function(){return f(function i(){l(this,i)},[{key:"getBounds",value:function(){}}])}(),Re=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[zs,k]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var i=arguments[0],t=arguments[1];this._bounds=i,this._item=t}}])}(),pi=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"poll",value:function(){if(this.isEmpty())return null;var i=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),i}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(i){for(var t=null,e=this._items.get(i);2*i<=this._size&&((t=2*i)!==this._size&&this._items.get(t+1).compareTo(this._items.get(t))<0&&t++,this._items.get(t).compareTo(e)<0);i=t)this._items.set(i,this._items.get(t));this._items.set(i,e)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(i){this._items.add(null),this._size+=1;var t=this._size;for(this._items.set(0,i);i.compareTo(this._items.get(Math.trunc(t/2)))<0;t/=2)this._items.set(t,this._items.get(Math.trunc(t/2)));this._items.set(t,i)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new ot,this._items.add(null)}}])}(),$o=function(){return f(function i(){l(this,i)},[{key:"insert",value:function(i,t){}},{key:"remove",value:function(i,t){}},{key:"query",value:function(){}}])}(),se=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(i){nt.isTrue(this._bounds===null),this._childBoundables.add(i)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[zs,k]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new ot,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var i=arguments[0];this._level=i}}}}])}(),un={reverseOrder:function(){return{compare:function(i,t){return t.compareTo(i)}}},min:function(i){return un.sort(i),i.get(0)},sort:function(i,t){var e=i.toArray();t?He.sort(e,t):He.sort(e);for(var n=i.iterator(),o=0,c=e.length;o<c;o++)n.next(),n.set(e[o])},singletonList:function(i){var t=new ot;return t.add(i),t}},jo=function(){function i(){l(this,i)}return f(i,null,[{key:"maxDistance",value:function(t,e,n,o,c,g,v,x){var I=i.distance(t,e,c,g);return I=Math.max(I,i.distance(t,e,v,x)),I=Math.max(I,i.distance(n,o,c,g)),I=Math.max(I,i.distance(n,o,v,x))}},{key:"distance",value:function(t,e,n,o){var c=n-t,g=o-e;return Math.sqrt(c*c+g*g)}},{key:"maximumDistance",value:function(t,e){var n=Math.min(t.getMinX(),e.getMinX()),o=Math.min(t.getMinY(),e.getMinY()),c=Math.max(t.getMaxX(),e.getMaxX()),g=Math.max(t.getMaxY(),e.getMaxY());return i.distance(n,o,c,g)}},{key:"minMaxDistance",value:function(t,e){var n=t.getMinX(),o=t.getMinY(),c=t.getMaxX(),g=t.getMaxY(),v=e.getMinX(),x=e.getMinY(),I=e.getMaxX(),G=e.getMaxY(),X=i.maxDistance(n,o,n,g,v,x,v,G);return X=Math.min(X,i.maxDistance(n,o,n,g,v,x,I,x)),X=Math.min(X,i.maxDistance(n,o,n,g,I,G,v,G)),X=Math.min(X,i.maxDistance(n,o,n,g,I,G,I,x)),X=Math.min(X,i.maxDistance(n,o,c,o,v,x,v,G)),X=Math.min(X,i.maxDistance(n,o,c,o,v,x,I,x)),X=Math.min(X,i.maxDistance(n,o,c,o,I,G,v,G)),X=Math.min(X,i.maxDistance(n,o,c,o,I,G,I,x)),X=Math.min(X,i.maxDistance(c,g,n,g,v,x,v,G)),X=Math.min(X,i.maxDistance(c,g,n,g,v,x,I,x)),X=Math.min(X,i.maxDistance(c,g,n,g,I,G,v,G)),X=Math.min(X,i.maxDistance(c,g,n,g,I,G,I,x)),X=Math.min(X,i.maxDistance(c,g,c,o,v,x,v,G)),X=Math.min(X,i.maxDistance(c,g,c,o,v,x,I,x)),X=Math.min(X,i.maxDistance(c,g,c,o,I,G,v,G)),X=Math.min(X,i.maxDistance(c,g,c,o,I,G,I,x))}}])}(),on=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"maximumDistance",value:function(){return jo.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(t,e){var n=i.isComposite(this._boundable1),o=i.isComposite(this._boundable2);if(n&&o)return i.area(this._boundable1)>i.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,t,e),null):(this.expand(this._boundable2,this._boundable1,!0,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,!1,t,e),null;if(o)return this.expand(this._boundable2,this._boundable1,!0,t,e),null;throw new $("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(i.isComposite(this._boundable1)||i.isComposite(this._boundable2))}},{key:"compareTo",value:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0}},{key:"expand",value:function(t,e,n,o,c){for(var g=t.getChildBoundables().iterator();g.hasNext();){var v=g.next(),x=null;(x=n?new i(e,v,this._itemDistance):new i(v,e,this._itemDistance)).getDistance()<c&&o.add(x)}}},{key:"getBoundable",value:function(t){return t===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()}},{key:"area",value:function(t){return t.getBounds().getArea()}},{key:"isComposite",value:function(t){return t instanceof se}}])}(),Xs=function(){return f(function i(){l(this,i)},[{key:"visitItem",value:function(i){}}])}(),ln=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"queryInternal",value:function(){if(gt(arguments[2],Xs)&&arguments[0]instanceof Object&&arguments[1]instanceof se)for(var t=arguments[0],e=arguments[2],n=arguments[1].getChildBoundables(),o=0;o<n.size();o++){var c=n.get(o);this.getIntersectsOp().intersects(c.getBounds(),t)&&(c instanceof se?this.queryInternal(t,c,e):c instanceof Re?e.visitItem(c.getItem()):nt.shouldNeverReachHere())}else if(gt(arguments[2],Ue)&&arguments[0]instanceof Object&&arguments[1]instanceof se)for(var g=arguments[0],v=arguments[2],x=arguments[1].getChildBoundables(),I=0;I<x.size();I++){var G=x.get(I);this.getIntersectsOp().intersects(G.getBounds(),g)&&(G instanceof se?this.queryInternal(g,G,v):G instanceof Re?v.add(G.getItem()):nt.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(t){return t.get(t.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof se?t+=this.size(n):n instanceof Re&&(t+=1)}return t}}},{key:"removeItem",value:function(t,e){for(var n=null,o=t.getChildBoundables().iterator();o.hasNext();){var c=o.next();c instanceof Re&&c.getItem()===e&&(n=c)}return n!==null&&(t.getChildBoundables().remove(n),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var t=this.itemsTree(this._root);return t===null?new ot:t}if(arguments.length===1){for(var e=arguments[0],n=new ot,o=e.getChildBoundables().iterator();o.hasNext();){var c=o.next();if(c instanceof se){var g=this.itemsTree(c);g!==null&&n.add(g)}else c instanceof Re?n.add(c.getItem()):nt.shouldNeverReachHere()}return n.size()<=0?null:n}}},{key:"insert",value:function(t,e){nt.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Re(t,e))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var t=arguments[0],e=new ot;return this.boundablesAtLevel(t,this._root,e),e}if(arguments.length===3){var n=arguments[0],o=arguments[1],c=arguments[2];if(nt.isTrue(n>-2),o.getLevel()===n)return c.add(o),null;for(var g=o.getChildBoundables().iterator();g.hasNext();){var v=g.next();v instanceof se?this.boundablesAtLevel(n,v,c):(nt.isTrue(v instanceof Re),n===-1&&c.add(v))}return null}}},{key:"query",value:function(){if(arguments.length===1){var t=arguments[0];this.build();var e=new ot;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(arguments.length===2){var n=arguments[0],o=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.queryInternal(n,this._root,o)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(arguments.length===3){var n=arguments[0],o=arguments[1],c=arguments[2],g=this.removeItem(o,c);if(g)return!0;for(var v=null,x=o.getChildBoundables().iterator();x.hasNext();){var I=x.next();if(this.getIntersectsOp().intersects(I.getBounds(),n)&&I instanceof se&&(g=this.remove(n,I,c))){v=I;break}}return v!==null&&v.getChildBoundables().isEmpty()&&o.getChildBoundables().remove(v),g}}},{key:"createHigherLevels",value:function(t,e){nt.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return n.size()===1?n.get(0):this.createHigherLevels(n,e+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof se){var o=this.depth(n);o>t&&(t=o)}}return t+1}}},{key:"createParentBoundables",value:function(t,e){nt.isTrue(!t.isEmpty());var n=new ot;n.add(this.createNode(e));var o=new ot(t);un.sort(o,this.getComparator());for(var c=o.iterator();c.hasNext();){var g=c.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(g)}return n}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new ot,this._nodeCapacity=null,arguments.length===0)i.constructor_.call(this,i.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var t=arguments[0];nt.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}}},{key:"compareDoubles",value:function(t,e){return t>e?1:t<e?-1:0}}])}();ln.IntersectsOp=function(){},ln.DEFAULT_NODE_CAPACITY=10;var Ko=function(){return f(function i(){l(this,i)},[{key:"distance",value:function(i,t){}}])}(),_e=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"createParentBoundablesFromVerticalSlices",value:function(e,n){nt.isTrue(e.length>0);for(var o=new ot,c=0;c<e.length;c++)o.addAll(this.createParentBoundablesFromVerticalSlice(e[c],n));return o}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var e=arguments[0],n=arguments[1];return this.nearestNeighbourK(e,H.POSITIVE_INFINITY,n)}if(arguments.length===3){var o=arguments[0],c=arguments[2],g=arguments[1],v=new pi;v.add(o);for(var x=new pi;!v.isEmpty()&&g>=0;){var I=v.poll(),G=I.getDistance();if(G>=g)break;I.isLeaves()?x.size()<c?x.add(I):(x.peek().getDistance()>G&&(x.poll(),x.add(I)),g=x.peek().getDistance()):I.expandToQueue(v,g)}return t.getItems(x)}}},{key:"createNode",value:function(e){return new Us(e)}},{key:"size",value:function(){return arguments.length===0?S(t,"size",this,1).call(this):S(t,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof It))return S(t,"insert",this,1).apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;S(t,"insert",this,1).call(this,e,n)}},{key:"getIntersectsOp",value:function(){return t.intersectsOp}},{key:"verticalSlices",value:function(e,n){for(var o=Math.trunc(Math.ceil(e.size()/n)),c=new Array(n).fill(null),g=e.iterator(),v=0;v<n;v++){c[v]=new ot;for(var x=0;g.hasNext()&&x<o;){var I=g.next();c[v].add(I),x++}}return c}},{key:"query",value:function(){if(arguments.length===1){var e=arguments[0];return S(t,"query",this,1).call(this,e)}if(arguments.length===2){var n=arguments[0],o=arguments[1];S(t,"query",this,1).call(this,n,o)}}},{key:"getComparator",value:function(){return t.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(e,n){return S(t,"createParentBoundables",this,1).call(this,e,n)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof It){var e=arguments[0],n=arguments[1];return S(t,"remove",this,1).call(this,e,n)}return S(t,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?S(t,"depth",this,1).call(this):S(t,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(e,n){nt.isTrue(!e.isEmpty());var o=Math.trunc(Math.ceil(e.size()/this.getNodeCapacity())),c=new ot(e);un.sort(c,t.xComparator);var g=this.verticalSlices(c,Math.trunc(Math.ceil(Math.sqrt(o))));return this.createParentBoundablesFromVerticalSlices(g,n)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(gt(arguments[0],Ko)){var e=arguments[0];if(this.isEmpty())return null;var n=new on(this.getRoot(),this.getRoot(),e);return this.nearestNeighbour(n)}if(arguments[0]instanceof on){var o=arguments[0],c=H.POSITIVE_INFINITY,g=null,v=new pi;for(v.add(o);!v.isEmpty()&&c>0;){var x=v.poll(),I=x.getDistance();if(I>=c)break;x.isLeaves()?(c=I,g=x):x.expandToQueue(v,c)}return g===null?null:[g.getBoundable(0).getItem(),g.getBoundable(1).getItem()]}}else{if(arguments.length===2){var G=arguments[0],X=arguments[1];if(this.isEmpty()||G.isEmpty())return null;var j=new on(this.getRoot(),G.getRoot(),X);return this.nearestNeighbour(j)}if(arguments.length===3){var tt=arguments[2],rt=new Re(arguments[0],arguments[1]),ut=new on(this.getRoot(),rt,tt);return this.nearestNeighbour(ut)[0]}if(arguments.length===4){var dt=arguments[2],vt=arguments[3],Nt=new Re(arguments[0],arguments[1]),Gt=new on(this.getRoot(),Nt,dt);return this.nearestNeighbourK(Gt,vt)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var e=arguments[0],n=arguments[1],o=H.POSITIVE_INFINITY,c=new pi;for(c.add(e);!c.isEmpty();){var g=c.poll(),v=g.getDistance();if(v>n)return!1;if(g.maximumDistance()<=n)return!0;if(g.isLeaves()){if((o=v)<=n)return!0}else g.expandToQueue(c,o)}return!1}if(arguments.length===3){var x=arguments[0],I=arguments[1],G=arguments[2],X=new on(this.getRoot(),x.getRoot(),I);return this.isWithinDistance(X,G)}}},{key:"interfaces_",get:function(){return[$o,k]}}],[{key:"constructor_",value:function(){if(arguments.length===0)t.constructor_.call(this,t.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var e=arguments[0];ln.constructor_.call(this,e)}}},{key:"centreX",value:function(e){return t.avg(e.getMinX(),e.getMaxX())}},{key:"avg",value:function(e,n){return(e+n)/2}},{key:"getItems",value:function(e){for(var n=new Array(e.size()).fill(null),o=0;!e.isEmpty();){var c=e.poll();n[o]=c.getBoundable(0).getItem(),o++}return n}},{key:"centreY",value:function(e){return t.avg(e.getMinY(),e.getMaxY())}}])}(ln),Us=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"computeBounds",value:function(){for(var e=null,n=this.getChildBoundables().iterator();n.hasNext();){var o=n.next();e===null?e=new It(o.getBounds()):e.expandToInclude(o.getBounds())}return e}}],[{key:"constructor_",value:function(){var e=arguments[0];se.constructor_.call(this,e)}}])}(se);_e.STRtreeNode=Us,_e.xComparator=new(function(){return f(function i(){l(this,i)},[{key:"interfaces_",get:function(){return[et]}},{key:"compare",value:function(i,t){return ln.compareDoubles(_e.centreX(i.getBounds()),_e.centreX(t.getBounds()))}}])}()),_e.yComparator=new(function(){return f(function i(){l(this,i)},[{key:"interfaces_",get:function(){return[et]}},{key:"compare",value:function(i,t){return ln.compareDoubles(_e.centreY(i.getBounds()),_e.centreY(t.getBounds()))}}])}()),_e.intersectsOp=new(function(){return f(function i(){l(this,i)},[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(i,t){return i.intersects(t)}}])}()),_e.DEFAULT_NODE_CAPACITY=10;var Jo=function(){function i(){l(this,i)}return f(i,null,[{key:"relativeSign",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"compare",value:function(t,e,n){if(e.equals2D(n))return 0;var o=i.relativeSign(e.x,n.x),c=i.relativeSign(e.y,n.y);switch(t){case 0:return i.compareValue(o,c);case 1:return i.compareValue(c,o);case 2:return i.compareValue(c,-o);case 3:return i.compareValue(-o,c);case 4:return i.compareValue(-o,-c);case 5:return i.compareValue(-c,-o);case 6:return i.compareValue(-c,o);case 7:return i.compareValue(o,-c)}return nt.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}}])}(),Qo=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(i){i.print(this.coord),i.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(i){var t=i;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:this._isInterior?t._isInterior?Jo.compare(this._segmentOctant,this.coord,t.coord):1:-1}},{key:"isEndPoint",value:function(i){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===i}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var i=arguments[0],t=arguments[1],e=arguments[2],n=arguments[3];this._segString=i,this.coord=new z(t),this.segmentIndex=e,this._segmentOctant=n,this._isInterior=!t.equals2D(i.getCoordinate(e))}}])}(),tl=function(){return f(function i(){l(this,i)},[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])}(),el=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getSplitCoordinates",value:function(){var i=new On;this.addEndpoints();for(var t=this.iterator(),e=t.next();t.hasNext();){var n=t.next();this.addEdgeCoordinates(e,n,i),e=n}return i.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var i=new ot;this.findCollapsesFromInsertedNodes(i),this.findCollapsesFromExistingVertices(i);for(var t=i.iterator();t.hasNext();){var e=t.next().intValue();this.add(this._edge.getCoordinate(e),e)}}},{key:"createSplitEdgePts",value:function(i,t){var e=t.segmentIndex-i.segmentIndex+2;if(e===2)return[new z(i.coord),new z(t.coord)];var n=this._edge.getCoordinate(t.segmentIndex),o=t.isInterior()||!t.coord.equals2D(n);o||e--;var c=new Array(e).fill(null),g=0;c[g++]=new z(i.coord);for(var v=i.segmentIndex+1;v<=t.segmentIndex;v++)c[g++]=this._edge.getCoordinate(v);return o&&(c[g]=new z(t.coord)),c}},{key:"print",value:function(i){i.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(i)}},{key:"findCollapsesFromExistingVertices",value:function(i){for(var t=0;t<this._edge.size()-2;t++){var e=this._edge.getCoordinate(t);this._edge.getCoordinate(t+1);var n=this._edge.getCoordinate(t+2);e.equals2D(n)&&i.add(oi.valueOf(t+1))}}},{key:"addEdgeCoordinates",value:function(i,t,e){var n=this.createSplitEdgePts(i,t);e.add(n,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(i){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),e=t.next();t.hasNext();){var n=t.next(),o=this.createSplitEdge(e,n);i.add(o),e=n}}},{key:"findCollapseIndex",value:function(i,t,e){if(!i.coord.equals2D(t.coord))return!1;var n=t.segmentIndex-i.segmentIndex;return t.isInterior()||n--,n===1&&(e[0]=i.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(i){for(var t=new Array(1).fill(null),e=this.iterator(),n=e.next();e.hasNext();){var o=e.next();this.findCollapseIndex(n,o,t)&&i.add(oi.valueOf(t[0])),n=o}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var i=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(i),i)}},{key:"createSplitEdge",value:function(i,t){var e=this.createSplitEdgePts(i,t);return new je(e,this._edge.getData())}},{key:"add",value:function(i,t){var e=new Qo(this._edge,i,t,this._edge.getSegmentOctant(t)),n=this._nodeMap.get(e);return n!==null?(nt.isTrue(n.coord.equals2D(i),"Found equal nodes with different coordinates"),n):(this._nodeMap.put(e,e),e)}},{key:"checkSplitEdgesCorrectness",value:function(i){var t=this._edge.getCoordinates(),e=i.get(0).getCoordinate(0);if(!e.equals2D(t[0]))throw new st("bad split edge start point at "+e);var n=i.get(i.size()-1).getCoordinates(),o=n[n.length-1];if(!o.equals2D(t[t.length-1]))throw new st("bad split edge end point at "+o)}}],[{key:"constructor_",value:function(){this._nodeMap=new An,this._edge=null;var i=arguments[0];this._edge=i}}])}(),nl=function(){function i(){l(this,i)}return f(i,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new $("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),o=Math.abs(e);return t>=0?e>=0?n>=o?0:1:n>=o?7:6:e>=0?n>=o?3:2:n>=o?4:5}if(arguments[0]instanceof z&&arguments[1]instanceof z){var c=arguments[0],g=arguments[1],v=g.x-c.x,x=g.y-c.y;if(v===0&&x===0)throw new $("Cannot compute the octant for two identical points "+c);return i.octant(v,x)}}}])}(),il=function(){return f(function i(){l(this,i)},[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(i){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(i){}},{key:"getData",value:function(){}}])}(),rl=function(){return f(function i(){l(this,i)},[{key:"addIntersection",value:function(i,t){}},{key:"interfaces_",get:function(){return[il]}}])}(),je=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(t){return this._pts[t]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}},{key:"setData",value:function(t){this._data=t}},{key:"safeOctant",value:function(t,e){return t.equals2D(e)?0:nl.octant(t,e)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(arguments.length===4){var n=arguments[1],o=arguments[3],c=new z(arguments[0].getIntersection(o));this.addIntersection(c,n)}}},{key:"toString",value:function(){return kr.toLineString(new Mn(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(t,e){var n=e,o=n+1;if(o<this._pts.length){var c=this._pts[o];t.equals2D(c)&&(n=o)}return this._nodeList.add(t,n)}},{key:"addIntersections",value:function(t,e,n){for(var o=0;o<t.getIntersectionNum();o++)this.addIntersection(t,e,n,o)}},{key:"interfaces_",get:function(){return[rl]}}],[{key:"constructor_",value:function(){this._nodeList=new el(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var t=arguments[0],e=new ot;return i.getNodedSubstrings(t,e),e}if(arguments.length===2)for(var n=arguments[1],o=arguments[0].iterator();o.hasNext();)o.next().getNodeList().addSplitEdges(n)}}])}(),Kt=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof i){var t=arguments[0],e=ht.index(this.p0,this.p1,t.p0),n=ht.index(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof z){var o=arguments[0];return ht.index(this.p0,this.p1,o)}}},{key:"toGeometry",value:function(t){return t.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(t){if(!(t instanceof i))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)}},{key:"intersection",value:function(t){var e=new $e;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof z){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new z(t);var e=this.projectionFactor(t),n=new z;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof i){var o=arguments[0],c=this.projectionFactor(o.p0),g=this.projectionFactor(o.p1);if(c>=1&&g>=1||c<=0&&g<=0)return null;var v=this.project(o.p0);c<0&&(v=this.p0),c>1&&(v=this.p1);var x=this.project(o.p1);return g<0&&(x=this.p0),g>1&&(x=this.p1),new i(v,x)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(t){return t===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(t){return de.pointToLinePerpendicular(t,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return i.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,o=e*e+n*n;return o<=0?H.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/o}},{key:"closestPoints",value:function(t){var e=this.intersection(t);if(e!==null)return[e,e];var n=new Array(2).fill(null),o=H.MAX_VALUE,c=null,g=this.closestPoint(t.p0);o=g.distance(t.p0),n[0]=g,n[1]=t.p0;var v=this.closestPoint(t.p1);(c=v.distance(t.p1))<o&&(o=c,n[0]=v,n[1]=t.p1);var x=t.closestPoint(this.p0);(c=x.distance(this.p0))<o&&(o=c,n[0]=this.p0,n[1]=x);var I=t.closestPoint(this.p1);return(c=I.distance(this.p1))<o&&(o=c,n[0]=this.p1,n[1]=I),n}},{key:"closestPoint",value:function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(t){var e=t,n=this.p0.compareTo(e.p0);return n!==0?n:this.p1.compareTo(e.p1)}},{key:"reverse",value:function(){var t=this.p0;this.p0=this.p1,this.p1=t}},{key:"equalsTopo",value:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}},{key:"lineIntersection",value:function(t){return yr.intersection(this.p0,this.p1,t.p0,t.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),o=this.p0.y+t*(this.p1.y-this.p0.y),c=this.p1.x-this.p0.x,g=this.p1.y-this.p0.y,v=Math.sqrt(c*c+g*g),x=0,I=0;if(e!==0){if(v<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");x=e*c/v,I=e*g/v}return new z(n-I,o+x)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}}},{key:"segmentFraction",value:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||H.isNaN(e))&&(e=1),e}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(t){var e=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),o=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),c=e*e+n*n,g=e*e-n*n,v=t.getX(),x=t.getY();return new z((-g*v-2*e*n*x-2*e*o)/c,(g*x-2*e*n*v-2*n*o)/c)}},{key:"distance",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return de.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof z){var e=arguments[0];return de.pointToSegment(e,this.p0,this.p1)}}},{key:"pointAlong",value:function(t){var e=new z;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}},{key:"hashCode",value:function(){var t=H.doubleToLongBits(this.p0.x);t^=31*H.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=H.doubleToLongBits(this.p1.x);return n^=31*H.doubleToLongBits(this.p1.y),e^(Math.trunc(n)^Math.trunc(n>>32))}},{key:"interfaces_",get:function(){return[W,k]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)i.constructor_.call(this,new z,new z);else if(arguments.length===1){var t=arguments[0];i.constructor_.call(this,t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p0=e,this.p1=n}else if(arguments.length===4){var o=arguments[0],c=arguments[1],g=arguments[2],v=arguments[3];i.constructor_.call(this,new z(o,c),new z(g,v))}}},{key:"midPoint",value:function(t,e){return new z((t.x+e.x)/2,(t.y+e.y)/2)}}])}(),sl=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var i=arguments[1],t=arguments[2],e=arguments[3];arguments[0].getLineSegment(i,this._overlapSeg1),t.getLineSegment(e,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new Kt,this._overlapSeg2=new Kt}}])}(),Vs=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getLineSegment",value:function(i,t){t.p0=this._pts[i],t.p1=this._pts[i+1]}},{key:"computeSelect",value:function(i,t,e,n){var o=this._pts[t],c=this._pts[e];if(e-t==1)return n.select(this,t),null;if(!i.intersects(o,c))return null;var g=Math.trunc((t+e)/2);t<g&&this.computeSelect(i,t,g,n),g<e&&this.computeSelect(i,g,e,n)}},{key:"getCoordinates",value:function(){for(var i=new Array(this._end-this._start+1).fill(null),t=0,e=this._start;e<=this._end;e++)i[t++]=this._pts[e];return i}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var i=arguments[0],t=arguments[1];this.computeOverlaps(this._start,this._end,i,i._start,i._end,t)}else if(arguments.length===6){var e=arguments[0],n=arguments[1],o=arguments[2],c=arguments[3],g=arguments[4],v=arguments[5];if(n-e==1&&g-c==1)return v.overlap(this,e,o,c),null;if(!this.overlaps(e,n,o,c,g))return null;var x=Math.trunc((e+n)/2),I=Math.trunc((c+g)/2);e<x&&(c<I&&this.computeOverlaps(e,x,o,c,I,v),I<g&&this.computeOverlaps(e,x,o,I,g,v)),x<n&&(c<I&&this.computeOverlaps(x,n,o,c,I,v),I<g&&this.computeOverlaps(x,n,o,I,g,v))}}},{key:"setId",value:function(i){this._id=i}},{key:"select",value:function(i,t){this.computeSelect(i,this._start,this._end,t)}},{key:"getEnvelope",value:function(){if(this._env===null){var i=this._pts[this._start],t=this._pts[this._end];this._env=new It(i,t)}return this._env}},{key:"overlaps",value:function(i,t,e,n,o){return It.intersects(this._pts[i],this._pts[t],e._pts[n],e._pts[o])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var i=arguments[0],t=arguments[1],e=arguments[2],n=arguments[3];this._pts=i,this._start=t,this._end=e,this._context=n}}])}(),al=function(){function i(){l(this,i)}return f(i,null,[{key:"findChainEnd",value:function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var o=Vt.quadrant(t[n],t[n+1]),c=e+1;c<t.length&&!(!t[c-1].equals2D(t[c])&&Vt.quadrant(t[c-1],t[c])!==o);)c++;return c-1}},{key:"getChains",value:function(){if(arguments.length===1){var t=arguments[0];return i.getChains(t,null)}if(arguments.length===2){var e=arguments[0],n=arguments[1],o=new ot,c=0;do{var g=i.findChainEnd(e,c),v=new Vs(e,c,g,n);o.add(v),c=g}while(c<e.length-1);return o}}}])}(),Sr=function(){return f(function i(){l(this,i)},[{key:"computeNodes",value:function(i){}},{key:"getNodedSubstrings",value:function(){}}])}(),Hs=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"setSegmentIntersector",value:function(i){this._segInt=i}},{key:"interfaces_",get:function(){return[Sr]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var i=arguments[0];this.setSegmentIntersector(i)}}}}])}(),br=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return je.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(e){for(var n=al.getChains(e.getCoordinates(),e).iterator();n.hasNext();){var o=n.next();o.setId(this._idCounter++),this._index.insert(o.getEnvelope(),o),this._monoChains.add(o)}}},{key:"computeNodes",value:function(e){this._nodedSegStrings=e;for(var n=e.iterator();n.hasNext();)this.add(n.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var e=new Ws(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var o=n.next(),c=this._index.query(o.getEnvelope()).iterator();c.hasNext();){var g=c.next();if(g.getId()>o.getId()&&(o.computeOverlaps(g,e),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new ot,this._index=new _e,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var e=arguments[0];Hs.constructor_.call(this,e)}}}}])}(Hs),Ws=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"overlap",value:function(){if(arguments.length!==4)return S(t,"overlap",this,1).apply(this,arguments);var e=arguments[1],n=arguments[2],o=arguments[3],c=arguments[0].getContext(),g=n.getContext();this._si.processIntersections(c,e,g,o)}}],[{key:"constructor_",value:function(){this._si=null;var e=arguments[0];this._si=e}}])}(sl);br.SegmentOverlapAction=Ws;var ge=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"isDeletable",value:function(t,e,n,o){var c=this._inputLine[t],g=this._inputLine[e],v=this._inputLine[n];return!!this.isConcave(c,g,v)&&!!this.isShallow(c,g,v,o)&&this.isShallowSampled(c,g,t,n,o)}},{key:"deleteShallowConcavities",value:function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),o=!1;n<this._inputLine.length;){var c=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=i.DELETE,c=!0,o=!0),t=c?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return o}},{key:"isShallowConcavity",value:function(t,e,n,o){return ht.index(t,e,n)===this._angleOrientation&&de.pointToSegment(e,t,n)<o}},{key:"isShallowSampled",value:function(t,e,n,o,c){var g=Math.trunc((o-n)/i.NUM_PTS_TO_CHECK);g<=0&&(g=1);for(var v=n;v<o;v+=g)if(!this.isShallow(t,e,this._inputLine[v],c))return!1;return!0}},{key:"isConcave",value:function(t,e,n){var o=ht.index(t,e,n)===this._angleOrientation;return o}},{key:"simplify",value:function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=ht.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do e=this.deleteShallowConcavities();while(e);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===i.DELETE;)e++;return e}},{key:"isShallow",value:function(t,e,n,o){return de.pointToSegment(e,t,n)<o}},{key:"collapseLine",value:function(){for(var t=new On,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==i.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=ht.COUNTERCLOCKWISE;var t=arguments[0];this._inputLine=t}},{key:"simplify",value:function(t,e){return new i(t).simplify(e)}}])}();ge.INIT=0,ge.DELETE=1,ge.KEEP=1,ge.NUM_PTS_TO_CHECK=10;var Zs=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getCoordinates",value:function(){return this._ptList.toArray(i.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"addPt",value:function(t){var e=new z(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var o=t.length-1;o>=0;o--)this.addPt(t[o])}},{key:"isRedundant",value:function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance}},{key:"toString",value:function(){return new sn().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var t=new z(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)}},{key:"setMinimumVertexDistance",value:function(t){this._minimimVertexDistance=t}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new ot}}])}();Zs.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var Jt=function(){function i(){l(this,i)}return f(i,null,[{key:"toDegrees",value:function(t){return 180*t/Math.PI}},{key:"normalize",value:function(t){for(;t>Math.PI;)t-=i.PI_TIMES_2;for(;t<=-Math.PI;)t+=i.PI_TIMES_2;return t}},{key:"angle",value:function(){if(arguments.length===1){var t=arguments[0];return Math.atan2(t.y,t.x)}if(arguments.length===2){var e=arguments[0],n=arguments[1],o=n.x-e.x,c=n.y-e.y;return Math.atan2(c,o)}}},{key:"isAcute",value:function(t,e,n){var o=t.x-e.x,c=t.y-e.y;return o*(n.x-e.x)+c*(n.y-e.y)>0}},{key:"isObtuse",value:function(t,e,n){var o=t.x-e.x,c=t.y-e.y;return o*(n.x-e.x)+c*(n.y-e.y)<0}},{key:"interiorAngle",value:function(t,e,n){var o=i.angle(e,t),c=i.angle(e,n);return Math.abs(c-o)}},{key:"normalizePositive",value:function(t){if(t<0){for(;t<0;)t+=i.PI_TIMES_2;t>=i.PI_TIMES_2&&(t=0)}else{for(;t>=i.PI_TIMES_2;)t-=i.PI_TIMES_2;t<0&&(t=0)}return t}},{key:"angleBetween",value:function(t,e,n){var o=i.angle(e,t),c=i.angle(e,n);return i.diff(o,c)}},{key:"diff",value:function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n}},{key:"toRadians",value:function(t){return t*Math.PI/180}},{key:"getTurn",value:function(t,e){var n=Math.sin(e-t);return n>0?i.COUNTERCLOCKWISE:n<0?i.CLOCKWISE:i.NONE}},{key:"angleBetweenOriented",value:function(t,e,n){var o=i.angle(e,t),c=i.angle(e,n)-o;return c<=-Math.PI?c+i.PI_TIMES_2:c>Math.PI?c-i.PI_TIMES_2:c}}])}();Jt.PI_TIMES_2=2*Math.PI,Jt.PI_OVER_2=Math.PI/2,Jt.PI_OVER_4=Math.PI/4,Jt.COUNTERCLOCKWISE=ht.COUNTERCLOCKWISE,Jt.CLOCKWISE=ht.CLOCKWISE,Jt.NONE=ht.COLLINEAR;var Dn=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"addNextSegment",value:function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=ht.index(this._s0,this._s1,this._s2),o=n===ht.CLOCKWISE&&this._side===J.LEFT||n===ht.COUNTERCLOCKWISE&&this._side===J.RIGHT;n===0?this.addCollinear(e):o?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)}},{key:"addLineEndCap",value:function(t,e){var n=new Kt(t,e),o=new Kt;this.computeOffsetSegment(n,J.LEFT,this._distance,o);var c=new Kt;this.computeOffsetSegment(n,J.RIGHT,this._distance,c);var g=e.x-t.x,v=e.y-t.y,x=Math.atan2(v,g);switch(this._bufParams.getEndCapStyle()){case U.CAP_ROUND:this._segList.addPt(o.p1),this.addDirectedFillet(e,x+Math.PI/2,x-Math.PI/2,ht.CLOCKWISE,this._distance),this._segList.addPt(c.p1);break;case U.CAP_FLAT:this._segList.addPt(o.p1),this._segList.addPt(c.p1);break;case U.CAP_SQUARE:var I=new z;I.x=Math.abs(this._distance)*Math.cos(x),I.y=Math.abs(this._distance)*Math.sin(x);var G=new z(o.p1.x+I.x,o.p1.y+I.y),X=new z(c.p1.x+I.x,c.p1.y+I.y);this._segList.addPt(G),this._segList.addPt(X)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(t,e,n,o){var c=yr.intersection(e.p0,e.p1,n.p0,n.p1);if(c!==null&&(o<=0?1:c.distance(t)/Math.abs(o))<=this._bufParams.getMitreLimit())return this._segList.addPt(c),null;this.addLimitedMitreJoin(e,n,o,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*i.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===U.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===U.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(t){this._segList.addPt(new z(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new z(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new z(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new z(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(t,e){this._segList.addPts(t,e)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(t,e,n,o,c){var g=e.x-t.x,v=e.y-t.y,x=Math.atan2(v,g),I=n.x-t.x,G=n.y-t.y,X=Math.atan2(G,I);o===ht.CLOCKWISE?x<=X&&(x+=2*Math.PI):x>=X&&(x-=2*Math.PI),this._segList.addPt(e),this.addDirectedFillet(t,x,X,o,c),this._segList.addPt(n)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(t,e,n,o){var c=this._seg0.p1,g=Jt.angle(c,this._seg0.p0),v=Jt.angleBetweenOriented(this._seg0.p0,c,this._seg1.p1)/2,x=Jt.normalize(g+v),I=Jt.normalize(x+Math.PI),G=o*n,X=n-G*Math.abs(Math.sin(v)),j=c.x+G*Math.cos(I),tt=c.y+G*Math.sin(I),rt=new z(j,tt),ut=new Kt(c,rt),dt=ut.pointAlongOffset(1,X),vt=ut.pointAlongOffset(1,-X);this._side===J.LEFT?(this._segList.addPt(dt),this._segList.addPt(vt)):(this._segList.addPt(vt),this._segList.addPt(dt))}},{key:"addDirectedFillet",value:function(t,e,n,o,c){var g=o===ht.CLOCKWISE?-1:1,v=Math.abs(e-n),x=Math.trunc(v/this._filletAngleQuantum+.5);if(x<1)return null;for(var I=v/x,G=new z,X=0;X<x;X++){var j=e+g*X*I;G.x=t.x+c*Math.cos(j),G.y=t.y+c*Math.sin(j),this._segList.addPt(G)}}},{key:"computeOffsetSegment",value:function(t,e,n,o){var c=e===J.LEFT?1:-1,g=t.p1.x-t.p0.x,v=t.p1.y-t.p0.y,x=Math.sqrt(g*g+v*v),I=c*n*g/x,G=c*n*v/x;o.p0.x=t.p0.x-G,o.p0.y=t.p0.y+I,o.p1.x=t.p1.x-G,o.p1.y=t.p1.y+I}},{key:"addInsideTurn",value:function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*i.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new z((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var o=new z((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(o)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(t){var e=new z(t.x+this._distance,t.y);this._segList.addPt(e),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)}},{key:"init",value:function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Zs,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*i.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===U.JOIN_BEVEL||this._bufParams.getJoinStyle()===U.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,ht.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Kt,this._seg1=new Kt,this._offset0=new Kt,this._offset1=new Kt,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._precisionModel=t,this._bufParams=e,this._li=new $e,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===U.JOIN_ROUND&&(this._closingSegLengthFactor=i.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}}])}();Dn.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Dn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Dn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Dn.MAX_CLOSING_SEG_LEN_FACTOR=80;var ul=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getOffsetCurve",value:function(t,e){if(this._distance=e,e===0)return null;var n=e<0,o=Math.abs(e),c=this.getSegGen(o);t.length<=1?this.computePointCurve(t[0],c):this.computeOffsetCurve(t,n,c);var g=c.getCoordinates();return n&&Dt.reverse(g),g}},{key:"computeSingleSidedBufferCurve",value:function(t,e,n){var o=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var c=ge.simplify(t,-o),g=c.length-1;n.initSideSegments(c[g],c[g-1],J.LEFT),n.addFirstSegment();for(var v=g-2;v>=0;v--)n.addNextSegment(c[v],!0)}else{n.addSegments(t,!1);var x=ge.simplify(t,o),I=x.length-1;n.initSideSegments(x[0],x[1],J.LEFT),n.addFirstSegment();for(var G=2;G<=I;G++)n.addNextSegment(x[G],!0)}n.addLastSegment(),n.closeRing()}},{key:"computeRingBufferCurve",value:function(t,e,n){var o=this.simplifyTolerance(this._distance);e===J.RIGHT&&(o=-o);var c=ge.simplify(t,o),g=c.length-1;n.initSideSegments(c[g-1],c[0],e);for(var v=1;v<=g;v++){var x=v!==1;n.addNextSegment(c[v],x)}n.closeRing()}},{key:"computeLineBufferCurve",value:function(t,e){var n=this.simplifyTolerance(this._distance),o=ge.simplify(t,n),c=o.length-1;e.initSideSegments(o[0],o[1],J.LEFT);for(var g=2;g<=c;g++)e.addNextSegment(o[g],!0);e.addLastSegment(),e.addLineEndCap(o[c-1],o[c]);var v=ge.simplify(t,-n),x=v.length-1;e.initSideSegments(v[x],v[x-1],J.LEFT);for(var I=x-2;I>=0;I--)e.addNextSegment(v[I],!0);e.addLastSegment(),e.addLineEndCap(v[1],v[0]),e.closeRing()}},{key:"computePointCurve",value:function(t,e){switch(this._bufParams.getEndCapStyle()){case U.CAP_ROUND:e.createCircle(t);break;case U.CAP_SQUARE:e.createSquare(t)}}},{key:"getLineCurve",value:function(t,e){if(this._distance=e,this.isLineOffsetEmpty(e))return null;var n=Math.abs(e),o=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],o);else if(this._bufParams.isSingleSided()){var c=e<0;this.computeSingleSidedBufferCurve(t,c,o)}else this.computeLineBufferCurve(t,o);return o.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(t){return t*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(n===0)return i.copyCoordinates(t);var o=this.getSegGen(n);return this.computeRingBufferCurve(t,e,o),o.getCoordinates()}},{key:"computeOffsetCurve",value:function(t,e,n){var o=this.simplifyTolerance(this._distance);if(e){var c=ge.simplify(t,-o),g=c.length-1;n.initSideSegments(c[g],c[g-1],J.LEFT),n.addFirstSegment();for(var v=g-2;v>=0;v--)n.addNextSegment(c[v],!0)}else{var x=ge.simplify(t,o),I=x.length-1;n.initSideSegments(x[0],x[1],J.LEFT),n.addFirstSegment();for(var G=2;G<=I;G++)n.addNextSegment(x[G],!0)}n.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(t){return t===0||t<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(t){return new Dn(this._precisionModel,this._bufParams,t)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e}},{key:"copyCoordinates",value:function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new z(t[n]);return e}}])}(),$s=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var i=arguments[0],t=new ot,e=this._subgraphs.iterator();e.hasNext();){var n=e.next(),o=n.getEnvelope();i.y<o.getMinY()||i.y>o.getMaxY()||this.findStabbedSegments(i,n.getDirectedEdges(),t)}return t}if(arguments.length===3){if(gt(arguments[2],Ue)&&arguments[0]instanceof z&&arguments[1]instanceof Nr){for(var c=arguments[0],g=arguments[1],v=arguments[2],x=g.getEdge().getCoordinates(),I=0;I<x.length-1;I++)if(this._seg.p0=x[I],this._seg.p1=x[I+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<c.x||this._seg.isHorizontal()||c.y<this._seg.p0.y||c.y>this._seg.p1.y||ht.index(this._seg.p0,this._seg.p1,c)===ht.RIGHT)){var G=g.getDepth(J.LEFT);this._seg.p0.equals(x[I])||(G=g.getDepth(J.RIGHT));var X=new js(this._seg,G);v.add(X)}}else if(gt(arguments[2],Ue)&&arguments[0]instanceof z&&gt(arguments[1],Ue))for(var j=arguments[0],tt=arguments[2],rt=arguments[1].iterator();rt.hasNext();){var ut=rt.next();ut.isForward()&&this.findStabbedSegments(j,ut,tt)}}}},{key:"getDepth",value:function(i){var t=this.findStabbedSegments(i);return t.size()===0?0:un.min(t)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new Kt;var i=arguments[0];this._subgraphs=i}}])}(),js=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"compareTo",value:function(i){var t=i;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var e=this._upwardSeg.orientationIndex(t._upwardSeg);return e!==0||(e=-1*t._upwardSeg.orientationIndex(this._upwardSeg))!==0?e:this._upwardSeg.compareTo(t._upwardSeg)}},{key:"compareX",value:function(i,t){var e=i.p0.compareTo(t.p0);return e!==0?e:i.p1.compareTo(t.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var i=arguments[0],t=arguments[1];this._upwardSeg=new Kt(i),this._leftDepth=t}}])}();$s.DepthSegment=js;var Ks=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,null,[{key:"constructor_",value:function(){K.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])}(K),Cr=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getY",value:function(){var t=this.y/this.w;if(H.isNaN(t)||H.isInfinite(t))throw new Ks;return t}},{key:"getX",value:function(){var t=this.x/this.w;if(H.isNaN(t)||H.isInfinite(t))throw new Ks;return t}},{key:"getCoordinate",value:function(){var t=new z;return t.x=this.getX(),t.y=this.getY(),t}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof i&&arguments[1]instanceof i){var o=arguments[0],c=arguments[1];this.x=o.y*c.w-c.y*o.w,this.y=c.x*o.w-o.x*c.w,this.w=o.x*c.y-c.x*o.y}else if(arguments[0]instanceof z&&arguments[1]instanceof z){var g=arguments[0],v=arguments[1];this.x=g.y-v.y,this.y=v.x-g.x,this.w=g.x*v.y-v.x*g.y}}else if(arguments.length===3){var x=arguments[0],I=arguments[1],G=arguments[2];this.x=x,this.y=I,this.w=G}else if(arguments.length===4){var X=arguments[0],j=arguments[1],tt=arguments[2],rt=arguments[3],ut=X.y-j.y,dt=j.x-X.x,vt=X.x*j.y-j.x*X.y,Nt=tt.y-rt.y,Gt=rt.x-tt.x,Yt=tt.x*rt.y-rt.x*tt.y;this.x=dt*Yt-Gt*vt,this.y=Nt*vt-ut*Yt,this.w=ut*Gt-Nt*dt}}}])}(),ol=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"area",value:function(){return i.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return i.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(t){if(t===null)throw new $("Supplied point is null.");return i.interpolateZ(t,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return i.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return i.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return i.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return i.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return i.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return i.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}},{key:"area",value:function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)}},{key:"signedArea",value:function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2}},{key:"det",value:function(t,e,n,o){return t*o-e*n}},{key:"interpolateZ",value:function(t,e,n,o){var c=e.x,g=e.y,v=n.x-c,x=o.x-c,I=n.y-g,G=o.y-g,X=v*G-x*I,j=t.x-c,tt=t.y-g,rt=(G*j-x*tt)/X,ut=(-I*j+v*tt)/X;return e.getZ()+rt*(n.getZ()-e.getZ())+ut*(o.getZ()-e.getZ())}},{key:"longestSideLength",value:function(t,e,n){var o=t.distance(e),c=e.distance(n),g=n.distance(t),v=o;return c>v&&(v=c),g>v&&(v=g),v}},{key:"circumcentreDD",value:function(t,e,n){var o=ct.valueOf(t.x).subtract(n.x),c=ct.valueOf(t.y).subtract(n.y),g=ct.valueOf(e.x).subtract(n.x),v=ct.valueOf(e.y).subtract(n.y),x=ct.determinant(o,c,g,v).multiply(2),I=o.sqr().add(c.sqr()),G=g.sqr().add(v.sqr()),X=ct.determinant(c,I,v,G),j=ct.determinant(o,I,g,G),tt=ct.valueOf(n.x).subtract(X.divide(x)).doubleValue(),rt=ct.valueOf(n.y).add(j.divide(x)).doubleValue();return new z(tt,rt)}},{key:"isAcute",value:function(t,e,n){return!!Jt.isAcute(t,e,n)&&!!Jt.isAcute(e,n,t)&&!!Jt.isAcute(n,t,e)}},{key:"circumcentre",value:function(t,e,n){var o=n.x,c=n.y,g=t.x-o,v=t.y-c,x=e.x-o,I=e.y-c,G=2*i.det(g,v,x,I),X=i.det(v,g*g+v*v,I,x*x+I*I),j=i.det(g,g*g+v*v,x,x*x+I*I);return new z(o-X/G,c+j/G)}},{key:"perpendicularBisector",value:function(t,e){var n=e.x-t.x,o=e.y-t.y,c=new Cr(t.x+n/2,t.y+o/2,1),g=new Cr(t.x-o+n/2,t.y+n+o/2,1);return new Cr(c,g)}},{key:"angleBisector",value:function(t,e,n){var o=e.distance(t),c=o/(o+e.distance(n)),g=n.x-t.x,v=n.y-t.y;return new z(t.x+c*g,t.y+c*v)}},{key:"area3D",value:function(t,e,n){var o=e.x-t.x,c=e.y-t.y,g=e.getZ()-t.getZ(),v=n.x-t.x,x=n.y-t.y,I=n.getZ()-t.getZ(),G=c*I-g*x,X=g*v-o*I,j=o*x-c*v,tt=G*G+X*X+j*j,rt=Math.sqrt(tt)/2;return rt}},{key:"centroid",value:function(t,e,n){var o=(t.x+e.x+n.x)/3,c=(t.y+e.y+n.y)/3;return new z(o,c)}},{key:"inCentre",value:function(t,e,n){var o=e.distance(n),c=t.distance(n),g=t.distance(e),v=o+c+g,x=(o*t.x+c*e.x+g*n.x)/v,I=(o*t.y+c*e.y+g*n.y)/v;return new z(x,I)}}])}(),ll=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"addRingSide",value:function(i,t,e,n,o){if(t===0&&i.length<Rn.MINIMUM_VALID_SIZE)return null;var c=n,g=o;i.length>=Rn.MINIMUM_VALID_SIZE&&ht.isCCW(i)&&(c=o,g=n,e=J.opposite(e));var v=this._curveBuilder.getRingCurve(i,e,t);this.addCurve(v,c,g)}},{key:"addRingBothSides",value:function(i,t){this.addRingSide(i,t,J.LEFT,T.EXTERIOR,T.INTERIOR),this.addRingSide(i,t,J.RIGHT,T.INTERIOR,T.EXTERIOR)}},{key:"addPoint",value:function(i){if(this._distance<=0)return null;var t=i.getCoordinates(),e=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(e,T.EXTERIOR,T.INTERIOR)}},{key:"addPolygon",value:function(i){var t=this._distance,e=J.LEFT;this._distance<0&&(t=-this._distance,e=J.RIGHT);var n=i.getExteriorRing(),o=Dt.removeRepeatedPoints(n.getCoordinates());if(this._distance<0&&this.isErodedCompletely(n,this._distance)||this._distance<=0&&o.length<3)return null;this.addRingSide(o,t,e,T.EXTERIOR,T.INTERIOR);for(var c=0;c<i.getNumInteriorRing();c++){var g=i.getInteriorRingN(c),v=Dt.removeRepeatedPoints(g.getCoordinates());this._distance>0&&this.isErodedCompletely(g,-this._distance)||this.addRingSide(v,t,J.opposite(e),T.INTERIOR,T.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(i,t){var e=new ol(i[0],i[1],i[2]),n=e.inCentre();return de.pointToSegment(n,e.p0,e.p1)<Math.abs(t)}},{key:"addLineString",value:function(i){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var t=Dt.removeRepeatedPoints(i.getCoordinates());if(Dt.isRing(t)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(t,this._distance);else{var e=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(e,T.EXTERIOR,T.INTERIOR)}}},{key:"addCurve",value:function(i,t,e){if(i===null||i.length<2)return null;var n=new je(i,new re(0,T.BOUNDARY,t,e));this._curveList.add(n)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(i){if(i.isEmpty())return null;if(i instanceof fi)this.addPolygon(i);else if(i instanceof Ln)this.addLineString(i);else if(i instanceof vr)this.addPoint(i);else if(i instanceof mr)this.addCollection(i);else if(i instanceof xr)this.addCollection(i);else if(i instanceof _r)this.addCollection(i);else{if(!(i instanceof jt))throw new _t(i.getGeometryType());this.addCollection(i)}}},{key:"isErodedCompletely",value:function(i,t){var e=i.getCoordinates();if(e.length<4)return t<0;if(e.length===4)return this.isTriangleErodedCompletely(e,t);var n=i.getEnvelopeInternal(),o=Math.min(n.getHeight(),n.getWidth());return t<0&&2*Math.abs(t)>o}},{key:"addCollection",value:function(i){for(var t=0;t<i.getNumGeometries();t++){var e=i.getGeometryN(t);this.add(e)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new ot;var i=arguments[0],t=arguments[1],e=arguments[2];this._inputGeom=i,this._distance=t,this._curveBuilder=e}}])}(),cl=function(){return f(function i(){l(this,i)},[{key:"locate",value:function(i){}}])}(),hl=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,i.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Mt;var t=this._parent.getGeometryN(this._index++);return t instanceof jt?(this._subcollectionIterator=new i(t),this._subcollectionIterator.next()):t}},{key:"remove",value:function(){throw new _t(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[tl]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}},{key:"isAtomic",value:function(t){return!(t instanceof jt)}}])}(),fl=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"locate",value:function(t){return i.locate(t,this._geom)}},{key:"interfaces_",get:function(){return[cl]}}],[{key:"constructor_",value:function(){this._geom=null;var t=arguments[0];this._geom=t}},{key:"locatePointInPolygon",value:function(t,e){if(e.isEmpty())return T.EXTERIOR;var n=e.getExteriorRing(),o=i.locatePointInRing(t,n);if(o!==T.INTERIOR)return o;for(var c=0;c<e.getNumInteriorRing();c++){var g=e.getInteriorRingN(c),v=i.locatePointInRing(t,g);if(v===T.BOUNDARY)return T.BOUNDARY;if(v===T.INTERIOR)return T.EXTERIOR}return T.INTERIOR}},{key:"locatePointInRing",value:function(t,e){return e.getEnvelopeInternal().intersects(t)?wr.locateInRing(t,e.getCoordinates()):T.EXTERIOR}},{key:"containsPointInPolygon",value:function(t,e){return T.EXTERIOR!==i.locatePointInPolygon(t,e)}},{key:"locateInGeometry",value:function(t,e){if(e instanceof fi)return i.locatePointInPolygon(t,e);if(e instanceof jt)for(var n=new hl(e);n.hasNext();){var o=n.next();if(o!==e){var c=i.locateInGeometry(t,o);if(c!==T.EXTERIOR)return c}}return T.EXTERIOR}},{key:"isContained",value:function(t,e){return T.EXTERIOR!==i.locate(t,e)}},{key:"locate",value:function(t,e){return e.isEmpty()?T.EXTERIOR:e.getEnvelopeInternal().intersects(t)?i.locateInGeometry(t,e):T.EXTERIOR}}])}(),gl=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getNextCW",value:function(i){this.getEdges();var t=this._edgeList.indexOf(i),e=t-1;return t===0&&(e=this._edgeList.size()-1),this._edgeList.get(e)}},{key:"propagateSideLabels",value:function(i){for(var t=T.NONE,e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.isArea(i)&&n.getLocation(i,J.LEFT)!==T.NONE&&(t=n.getLocation(i,J.LEFT))}if(t===T.NONE)return null;for(var o=t,c=this.iterator();c.hasNext();){var g=c.next(),v=g.getLabel();if(v.getLocation(i,J.ON)===T.NONE&&v.setLocation(i,J.ON,o),v.isArea(i)){var x=v.getLocation(i,J.LEFT),I=v.getLocation(i,J.RIGHT);if(I!==T.NONE){if(I!==o)throw new Te("side location conflict",g.getCoordinate());x===T.NONE&&nt.shouldNeverReachHere("found single null side (at "+g.getCoordinate()+")"),o=x}else nt.isTrue(v.getLocation(i,J.LEFT)===T.NONE,"found single null side"),v.setLocation(i,J.RIGHT,o),v.setLocation(i,J.LEFT,o)}}}},{key:"getCoordinate",value:function(){var i=this.iterator();return i.hasNext()?i.next().getCoordinate():null}},{key:"print",value:function(i){ne.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();)t.next().print(i)}},{key:"isAreaLabelsConsistent",value:function(i){return this.computeEdgeEndLabels(i.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(i){var t=this.getEdges();if(t.size()<=0)return!0;var e=t.size()-1,n=t.get(e).getLabel().getLocation(i,J.LEFT);nt.isTrue(n!==T.NONE,"Found unlabelled area edge");for(var o=n,c=this.iterator();c.hasNext();){var g=c.next().getLabel();nt.isTrue(g.isArea(i),"Found non-area edge");var v=g.getLocation(i,J.LEFT),x=g.getLocation(i,J.RIGHT);if(v===x||x!==o)return!1;o=v}return!0}},{key:"findIndex",value:function(i){this.iterator();for(var t=0;t<this._edgeList.size();t++)if(this._edgeList.get(t)===i)return t;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new ot(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(i,t,e){return this._ptInAreaLocation[i]===T.NONE&&(this._ptInAreaLocation[i]=fl.locate(t,e[i].getGeometry())),this._ptInAreaLocation[i]}},{key:"toString",value:function(){var i=new Cn;i.append("EdgeEndStar:   "+this.getCoordinate()),i.append(`
`);for(var t=this.iterator();t.hasNext();){var e=t.next();i.append(e),i.append(`
`)}return i.toString()}},{key:"computeEdgeEndLabels",value:function(i){for(var t=this.iterator();t.hasNext();)t.next().computeLabel(i)}},{key:"computeLabelling",value:function(i){this.computeEdgeEndLabels(i[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var t=[!1,!1],e=this.iterator();e.hasNext();)for(var n=e.next().getLabel(),o=0;o<2;o++)n.isLine(o)&&n.getLocation(o)===T.BOUNDARY&&(t[o]=!0);for(var c=this.iterator();c.hasNext();)for(var g=c.next(),v=g.getLabel(),x=0;x<2;x++)if(v.isAnyNull(x)){var I=T.NONE;if(t[x])I=T.EXTERIOR;else{var G=g.getCoordinate();I=this.getLocation(x,G,i)}v.setAllLocationsIfNull(x,I)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(i,t){this._edgeMap.put(i,t),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new An,this._edgeList=null,this._ptInAreaLocation=[T.NONE,T.NONE]}}])}(),yl=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var e=null,n=null,o=this._SCANNING_FOR_INCOMING,c=0;c<this._resultAreaEdgeList.size();c++){var g=this._resultAreaEdgeList.get(c),v=g.getSym();if(g.getLabel().isArea())switch(e===null&&g.isInResult()&&(e=g),o){case this._SCANNING_FOR_INCOMING:if(!v.isInResult())continue;n=v,o=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!g.isInResult())continue;n.setNext(g),o=this._SCANNING_FOR_INCOMING}}if(o===this._LINKING_TO_OUTGOING){if(e===null)throw new Te("no outgoing dirEdge found",this.getCoordinate());nt.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}}},{key:"insert",value:function(e){var n=e;this.insertEdgeEnd(n,n)}},{key:"getRightmostEdge",value:function(){var e=this.getEdges(),n=e.size();if(n<1)return null;var o=e.get(0);if(n===1)return o;var c=e.get(n-1),g=o.getQuadrant(),v=c.getQuadrant();return Vt.isNorthern(g)&&Vt.isNorthern(v)?o:Vt.isNorthern(g)||Vt.isNorthern(v)?o.getDy()!==0?o:c.getDy()!==0?c:(nt.shouldNeverReachHere("found two horizontal edges incident on node"),null):c}},{key:"print",value:function(e){ne.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var n=this.iterator();n.hasNext();){var o=n.next();e.print("out "),o.print(e),e.println(),e.print("in "),o.getSym().print(e),e.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new ot;for(var e=this.iterator();e.hasNext();){var n=e.next();(n.isInResult()||n.getSym().isInResult())&&this._resultAreaEdgeList.add(n)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(e){for(var n=this.iterator();n.hasNext();){var o=n.next().getLabel();o.setAllLocationsIfNull(0,e.getLocation(0)),o.setAllLocationsIfNull(1,e.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var e=null,n=null,o=this._edgeList.size()-1;o>=0;o--){var c=this._edgeList.get(o),g=c.getSym();n===null&&(n=g),e!==null&&g.setNext(e),e=c}n.setNext(e)}},{key:"computeDepths",value:function(){if(arguments.length===1){var e=arguments[0],n=this.findIndex(e),o=e.getDepth(J.LEFT),c=e.getDepth(J.RIGHT),g=this.computeDepths(n+1,this._edgeList.size(),o);if(this.computeDepths(0,n,g)!==c)throw new Te("depth mismatch at "+e.getCoordinate())}else if(arguments.length===3){for(var v=arguments[1],x=arguments[2],I=arguments[0];I<v;I++){var G=this._edgeList.get(I);G.setEdgeDepths(J.RIGHT,x),x=G.getDepth(J.LEFT)}return x}}},{key:"mergeSymLabels",value:function(){for(var e=this.iterator();e.hasNext();){var n=e.next();n.getLabel().merge(n.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(e){for(var n=null,o=null,c=this._SCANNING_FOR_INCOMING,g=this._resultAreaEdgeList.size()-1;g>=0;g--){var v=this._resultAreaEdgeList.get(g),x=v.getSym();switch(n===null&&v.getEdgeRing()===e&&(n=v),c){case this._SCANNING_FOR_INCOMING:if(x.getEdgeRing()!==e)continue;o=x,c=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(v.getEdgeRing()!==e)continue;o.setNextMin(v),c=this._SCANNING_FOR_INCOMING}}c===this._LINKING_TO_OUTGOING&&(nt.isTrue(n!==null,"found null for first outgoing dirEdge"),nt.isTrue(n.getEdgeRing()===e,"unable to link last incoming dirEdge"),o.setNextMin(n))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var e=0,n=this.iterator();n.hasNext();)n.next().isInResult()&&e++;return e}if(arguments.length===1){for(var o=arguments[0],c=0,g=this.iterator();g.hasNext();)g.next().getEdgeRing()===o&&c++;return c}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var e=T.NONE,n=this.iterator();n.hasNext();){var o=n.next(),c=o.getSym();if(!o.isLineEdge()){if(o.isInResult()){e=T.INTERIOR;break}if(c.isInResult()){e=T.EXTERIOR;break}}}if(e===T.NONE)return null;for(var g=e,v=this.iterator();v.hasNext();){var x=v.next(),I=x.getSym();x.isLineEdge()?x.getEdge().setCovered(g===T.INTERIOR):(x.isInResult()&&(g=T.EXTERIOR),I.isInResult()&&(g=T.INTERIOR))}}},{key:"computeLabelling",value:function(e){S(t,"computeLabelling",this,1).call(this,e),this._label=new re(T.NONE);for(var n=this.iterator();n.hasNext();)for(var o=n.next().getEdge().getLabel(),c=0;c<2;c++){var g=o.getLocation(c);g!==T.INTERIOR&&g!==T.BOUNDARY||this._label.setLocation(c,T.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])}(gl),vl=function(i){function t(){return l(this,t),u(this,t)}return d(t,i),f(t,[{key:"createNode",value:function(e){return new di(e,new yl)}}])}(Bs),Js=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"compareTo",value:function(t){var e=t;return i.compareOriented(this._pts,this._orientation,e._pts,e._orientation)}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=i.orientation(t)}},{key:"orientation",value:function(t){return Dt.increasingDirection(t)===1}},{key:"compareOriented",value:function(t,e,n,o){for(var c=e?1:-1,g=o?1:-1,v=e?t.length:-1,x=o?n.length:-1,I=e?0:t.length-1,G=o?0:n.length-1;;){var X=t[I].compareTo(n[G]);if(X!==0)return X;var j=(I+=c)===v,tt=(G+=g)===x;if(j&&!tt)return-1;if(!j&&tt)return 1;if(j&&tt)return 0}}}])}(),ml=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"print",value:function(i){i.print("MULTILINESTRING ( ");for(var t=0;t<this._edges.size();t++){var e=this._edges.get(t);t>0&&i.print(","),i.print("(");for(var n=e.getCoordinates(),o=0;o<n.length;o++)o>0&&i.print(","),i.print(n[o].x+" "+n[o].y);i.println(")")}i.print(")  ")}},{key:"addAll",value:function(i){for(var t=i.iterator();t.hasNext();)this.add(t.next())}},{key:"findEdgeIndex",value:function(i){for(var t=0;t<this._edges.size();t++)if(this._edges.get(t).equals(i))return t;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(i){return this._edges.get(i)}},{key:"findEqualEdge",value:function(i){var t=new Js(i.getCoordinates());return this._ocaMap.get(t)}},{key:"add",value:function(i){this._edges.add(i);var t=new Js(i.getCoordinates());this._ocaMap.put(t,i)}}],[{key:"constructor_",value:function(){this._edges=new ot,this._ocaMap=new An}}])}(),Qs=function(){return f(function i(){l(this,i)},[{key:"processIntersections",value:function(i,t,e,n){}},{key:"isDone",value:function(){}}])}(),dl=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"isTrivialIntersection",value:function(t,e,n,o){if(t===n&&this._li.getIntersectionNum()===1){if(i.isAdjacentSegments(e,o))return!0;if(t.isClosed()){var c=t.size()-1;if(e===0&&o===c||o===0&&e===c)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(t,e,n,o){if(t===n&&e===o)return null;this.numTests++;var c=t.getCoordinates()[e],g=t.getCoordinates()[e+1],v=n.getCoordinates()[o],x=n.getCoordinates()[o+1];this._li.computeIntersection(c,g,v,x),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,o)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,o,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[Qs]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t}},{key:"isAdjacentSegments",value:function(t,e){return Math.abs(t-e)===1}}])}(),pl=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(i){i.print(this.coord),i.print(" seg # = "+this.segmentIndex),i.println(" dist = "+this.dist)}},{key:"compareTo",value:function(i){var t=i;return this.compare(t.segmentIndex,t.dist)}},{key:"isEndPoint",value:function(i){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===i}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(i,t){return this.segmentIndex<i?-1:this.segmentIndex>i?1:this.dist<t?-1:this.dist>t?1:0}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var i=arguments[0],t=arguments[1],e=arguments[2];this.coord=new z(i),this.segmentIndex=t,this.dist=e}}])}(),_l=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"print",value:function(i){i.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(i)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(i){this.addEndpoints();for(var t=this.iterator(),e=t.next();t.hasNext();){var n=t.next(),o=this.createSplitEdge(e,n);i.add(o),e=n}}},{key:"addEndpoints",value:function(){var i=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[i],i,0)}},{key:"createSplitEdge",value:function(i,t){var e=t.segmentIndex-i.segmentIndex+2,n=this.edge.pts[t.segmentIndex],o=t.dist>0||!t.coord.equals2D(n);o||e--;var c=new Array(e).fill(null),g=0;c[g++]=new z(i.coord);for(var v=i.segmentIndex+1;v<=t.segmentIndex;v++)c[g++]=this.edge.pts[v];return o&&(c[g]=t.coord),new ea(c,new re(this.edge._label))}},{key:"add",value:function(i,t,e){var n=new pl(i,t,e),o=this._nodeMap.get(n);return o!==null?o:(this._nodeMap.put(n,n),n)}},{key:"isIntersection",value:function(i){for(var t=this.iterator();t.hasNext();)if(t.next().coord.equals(i))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new An,this.edge=null;var i=arguments[0];this.edge=i}}])}(),xl=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(i.isTrue(this._matrix[T.INTERIOR][T.INTERIOR])||i.isTrue(this._matrix[T.INTERIOR][T.BOUNDARY])||i.isTrue(this._matrix[T.BOUNDARY][T.INTERIOR])||i.isTrue(this._matrix[T.BOUNDARY][T.BOUNDARY]))&&this._matrix[T.EXTERIOR][T.INTERIOR]===Q.FALSE&&this._matrix[T.EXTERIOR][T.BOUNDARY]===Q.FALSE}},{key:"isCoveredBy",value:function(){return(i.isTrue(this._matrix[T.INTERIOR][T.INTERIOR])||i.isTrue(this._matrix[T.INTERIOR][T.BOUNDARY])||i.isTrue(this._matrix[T.BOUNDARY][T.INTERIOR])||i.isTrue(this._matrix[T.BOUNDARY][T.BOUNDARY]))&&this._matrix[T.INTERIOR][T.EXTERIOR]===Q.FALSE&&this._matrix[T.BOUNDARY][T.EXTERIOR]===Q.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),o=e%3;this._matrix[n][o]=Q.toDimensionValue(t.charAt(e))}else if(arguments.length===3){var c=arguments[0],g=arguments[1],v=arguments[2];this._matrix[c][g]=v}}},{key:"isContains",value:function(){return i.isTrue(this._matrix[T.INTERIOR][T.INTERIOR])&&this._matrix[T.EXTERIOR][T.INTERIOR]===Q.FALSE&&this._matrix[T.EXTERIOR][T.BOUNDARY]===Q.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),o=e%3;this.setAtLeast(n,o,Q.toDimensionValue(t.charAt(e)))}else if(arguments.length===3){var c=arguments[0],g=arguments[1],v=arguments[2];this._matrix[c][g]<v&&(this._matrix[c][g]=v)}}},{key:"setAtLeastIfValid",value:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)}},{key:"isWithin",value:function(){return i.isTrue(this._matrix[T.INTERIOR][T.INTERIOR])&&this._matrix[T.INTERIOR][T.EXTERIOR]===Q.FALSE&&this._matrix[T.BOUNDARY][T.EXTERIOR]===Q.FALSE}},{key:"isTouches",value:function(t,e){return t>e?this.isTouches(e,t):(t===Q.A&&e===Q.A||t===Q.L&&e===Q.L||t===Q.L&&e===Q.A||t===Q.P&&e===Q.A||t===Q.P&&e===Q.L)&&this._matrix[T.INTERIOR][T.INTERIOR]===Q.FALSE&&(i.isTrue(this._matrix[T.INTERIOR][T.BOUNDARY])||i.isTrue(this._matrix[T.BOUNDARY][T.INTERIOR])||i.isTrue(this._matrix[T.BOUNDARY][T.BOUNDARY]))}},{key:"isOverlaps",value:function(t,e){return t===Q.P&&e===Q.P||t===Q.A&&e===Q.A?i.isTrue(this._matrix[T.INTERIOR][T.INTERIOR])&&i.isTrue(this._matrix[T.INTERIOR][T.EXTERIOR])&&i.isTrue(this._matrix[T.EXTERIOR][T.INTERIOR]):t===Q.L&&e===Q.L&&this._matrix[T.INTERIOR][T.INTERIOR]===1&&i.isTrue(this._matrix[T.INTERIOR][T.EXTERIOR])&&i.isTrue(this._matrix[T.EXTERIOR][T.INTERIOR])}},{key:"isEquals",value:function(t,e){return t===e&&i.isTrue(this._matrix[T.INTERIOR][T.INTERIOR])&&this._matrix[T.INTERIOR][T.EXTERIOR]===Q.FALSE&&this._matrix[T.BOUNDARY][T.EXTERIOR]===Q.FALSE&&this._matrix[T.EXTERIOR][T.INTERIOR]===Q.FALSE&&this._matrix[T.EXTERIOR][T.BOUNDARY]===Q.FALSE}},{key:"toString",value:function(){for(var t=new yi("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,Q.toDimensionSymbol(this._matrix[e][n]));return t.toString()}},{key:"setAll",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this._matrix[e][n]=t}},{key:"get",value:function(t,e){return this._matrix[t][e]}},{key:"transpose",value:function(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}},{key:"matches",value:function(t){if(t.length!==9)throw new $("Should be length 9: "+t);for(var e=0;e<3;e++)for(var n=0;n<3;n++)if(!i.matches(this._matrix[e][n],t.charAt(3*e+n)))return!1;return!0}},{key:"add",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))}},{key:"isDisjoint",value:function(){return this._matrix[T.INTERIOR][T.INTERIOR]===Q.FALSE&&this._matrix[T.INTERIOR][T.BOUNDARY]===Q.FALSE&&this._matrix[T.BOUNDARY][T.INTERIOR]===Q.FALSE&&this._matrix[T.BOUNDARY][T.BOUNDARY]===Q.FALSE}},{key:"isCrosses",value:function(t,e){return t===Q.P&&e===Q.L||t===Q.P&&e===Q.A||t===Q.L&&e===Q.A?i.isTrue(this._matrix[T.INTERIOR][T.INTERIOR])&&i.isTrue(this._matrix[T.INTERIOR][T.EXTERIOR]):t===Q.L&&e===Q.P||t===Q.A&&e===Q.P||t===Q.A&&e===Q.L?i.isTrue(this._matrix[T.INTERIOR][T.INTERIOR])&&i.isTrue(this._matrix[T.EXTERIOR][T.INTERIOR]):t===Q.L&&e===Q.L&&this._matrix[T.INTERIOR][T.INTERIOR]===0}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(Q.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var t=arguments[0];i.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof i){var e=arguments[0];i.constructor_.call(this),this._matrix[T.INTERIOR][T.INTERIOR]=e._matrix[T.INTERIOR][T.INTERIOR],this._matrix[T.INTERIOR][T.BOUNDARY]=e._matrix[T.INTERIOR][T.BOUNDARY],this._matrix[T.INTERIOR][T.EXTERIOR]=e._matrix[T.INTERIOR][T.EXTERIOR],this._matrix[T.BOUNDARY][T.INTERIOR]=e._matrix[T.BOUNDARY][T.INTERIOR],this._matrix[T.BOUNDARY][T.BOUNDARY]=e._matrix[T.BOUNDARY][T.BOUNDARY],this._matrix[T.BOUNDARY][T.EXTERIOR]=e._matrix[T.BOUNDARY][T.EXTERIOR],this._matrix[T.EXTERIOR][T.INTERIOR]=e._matrix[T.EXTERIOR][T.INTERIOR],this._matrix[T.EXTERIOR][T.BOUNDARY]=e._matrix[T.EXTERIOR][T.BOUNDARY],this._matrix[T.EXTERIOR][T.EXTERIOR]=e._matrix[T.EXTERIOR][T.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var t=arguments[0],e=arguments[1];return e===Q.SYM_DONTCARE||e===Q.SYM_TRUE&&(t>=0||t===Q.TRUE)||e===Q.SYM_FALSE&&t===Q.FALSE||e===Q.SYM_P&&t===Q.P||e===Q.SYM_L&&t===Q.L||e===Q.SYM_A&&t===Q.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var n=arguments[1];return new i(arguments[0]).matches(n)}}},{key:"isTrue",value:function(t){return t>=0||t===Q.TRUE}}])}(),El=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(t){return t===null||t.length===0?null:(this.ensureCapacity(this._size+t.length),ne.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}},{key:"ensureCapacity",value:function(t){if(t<=this._data.length)return null;var e=Math.max(t,2*this._data.length);this._data=He.copyOf(this._data,e)}},{key:"toArray",value:function(){var t=new Array(this._size).fill(null);return ne.arraycopy(this._data,0,t,0,this._size),t}},{key:"add",value:function(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)i.constructor_.call(this,10);else if(arguments.length===1){var t=arguments[0];this._data=new Array(t).fill(null)}}}])}(),kl=function(){function i(){l(this,i)}return f(i,[{key:"getChainStartIndices",value:function(t){var e=0,n=new El(Math.trunc(t.length/2));n.add(e);do{var o=this.findChainEnd(t,e);n.add(o),e=o}while(e<t.length-1);return n.toArray()}},{key:"findChainEnd",value:function(t,e){for(var n=Vt.quadrant(t[e],t[e+1]),o=e+1;o<t.length&&Vt.quadrant(t[o-1],t[o])===n;)o++;return o-1}},{key:"OLDgetChainStartIndices",value:function(t){var e=0,n=new ot;n.add(e);do{var o=this.findChainEnd(t,e);n.add(o),e=o}while(e<t.length-1);return i.toIntArray(n)}}],[{key:"toIntArray",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e}}])}(),wl=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(i){var t=this.pts[this.startIndex[i]].x,e=this.pts[this.startIndex[i+1]].x;return t>e?t:e}},{key:"getMinX",value:function(i){var t=this.pts[this.startIndex[i]].x,e=this.pts[this.startIndex[i+1]].x;return t<e?t:e}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var i=arguments[0],t=arguments[1],e=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[i],this.startIndex[i+1],t,t.startIndex[e],t.startIndex[e+1],n)}else if(arguments.length===6){var o=arguments[0],c=arguments[1],g=arguments[2],v=arguments[3],x=arguments[4],I=arguments[5];if(c-o==1&&x-v==1)return I.addIntersections(this.e,o,g.e,v),null;if(!this.overlaps(o,c,g,v,x))return null;var G=Math.trunc((o+c)/2),X=Math.trunc((v+x)/2);o<G&&(v<X&&this.computeIntersectsForChain(o,G,g,v,X,I),X<x&&this.computeIntersectsForChain(o,G,g,X,x,I)),G<c&&(v<X&&this.computeIntersectsForChain(G,c,g,v,X,I),X<x&&this.computeIntersectsForChain(G,c,g,X,x,I))}}},{key:"overlaps",value:function(i,t,e,n,o){return It.intersects(this.pts[i],this.pts[t],e.pts[n],e.pts[o])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(i,t){for(var e=0;e<this.startIndex.length-1;e++)for(var n=0;n<i.startIndex.length-1;n++)this.computeIntersectsForChain(e,i,n,t)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var i=arguments[0];this.e=i,this.pts=i.getCoordinates();var t=new kl;this.startIndex=t.getChainStartIndices(this.pts)}}])}(),ta=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getDepth",value:function(t,e){return this._depth[t][e]}},{key:"setDepth",value:function(t,e,n){this._depth[t][e]=n}},{key:"isNull",value:function(){if(arguments.length===0){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==i.NULL_VALUE)return!1;return!0}if(arguments.length===1){var n=arguments[0];return this._depth[n][1]===i.NULL_VALUE}if(arguments.length===2){var o=arguments[0],c=arguments[1];return this._depth[o][c]===i.NULL_VALUE}}},{key:"normalize",value:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var o=0;this._depth[t][n]>e&&(o=1),this._depth[t][n]=o}}}},{key:"getDelta",value:function(t){return this._depth[t][J.RIGHT]-this._depth[t][J.LEFT]}},{key:"getLocation",value:function(t,e){return this._depth[t][e]<=0?T.EXTERIOR:T.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var o=t.getLocation(e,n);o!==T.EXTERIOR&&o!==T.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=i.depthAtLocation(o):this._depth[e][n]+=i.depthAtLocation(o))}else if(arguments.length===3){var c=arguments[0],g=arguments[1];arguments[2]===T.INTERIOR&&this._depth[c][g]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var e=0;e<3;e++)this._depth[t][e]=i.NULL_VALUE}},{key:"depthAtLocation",value:function(t){return t===T.EXTERIOR?0:t===T.INTERIOR?1:i.NULL_VALUE}}])}();ta.NULL_VALUE=-1;var ea=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var e=new Array(2).fill(null);return e[0]=this.pts[0],e[1]=this.pts[1],new t(e,re.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(e){this._isIsolated=e}},{key:"setName",value:function(e){this._name=e}},{key:"equals",value:function(e){if(!(e instanceof t))return!1;var n=e;if(this.pts.length!==n.pts.length)return!1;for(var o=!0,c=!0,g=this.pts.length,v=0;v<this.pts.length;v++)if(this.pts[v].equals2D(n.pts[v])||(o=!1),this.pts[v].equals2D(n.pts[--g])||(c=!1),!o&&!c)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var e=arguments[0];return this.pts[e]}}},{key:"print",value:function(e){e.print("edge "+this._name+": "),e.print("LINESTRING (");for(var n=0;n<this.pts.length;n++)n>0&&e.print(","),e.print(this.pts[n].x+" "+this.pts[n].y);e.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(e){t.updateIM(this._label,e)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(e){e.print("edge "+this._name+": ");for(var n=this.pts.length-1;n>=0;n--)e.print(this.pts[n]+" ");e.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new wl(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new It;for(var e=0;e<this.pts.length;e++)this._env.expandToInclude(this.pts[e])}return this._env}},{key:"addIntersection",value:function(e,n,o,c){var g=new z(e.getIntersection(c)),v=n,x=e.getEdgeDistance(o,c),I=v+1;if(I<this.pts.length){var G=this.pts[I];g.equals2D(G)&&(v=I,x=0)}this.eiList.add(g,v,x)}},{key:"toString",value:function(){var e=new yi;e.append("edge "+this._name+": "),e.append("LINESTRING (");for(var n=0;n<this.pts.length;n++)n>0&&e.append(","),e.append(this.pts[n].x+" "+this.pts[n].y);return e.append(")  "+this._label+" "+this._depthDelta),e.toString()}},{key:"isPointwiseEqual",value:function(e){if(this.pts.length!==e.pts.length)return!1;for(var n=0;n<this.pts.length;n++)if(!this.pts[n].equals2D(e.pts[n]))return!1;return!0}},{key:"setDepthDelta",value:function(e){this._depthDelta=e}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(e,n,o){for(var c=0;c<e.getIntersectionNum();c++)this.addIntersection(e,n,o,c)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new _l(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ta,this._depthDelta=0,arguments.length===1){var e=arguments[0];t.constructor_.call(this,e,null)}else if(arguments.length===2){var n=arguments[0],o=arguments[1];this.pts=n,this._label=o}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof xl&&arguments[0]instanceof re))return S(t,"updateIM",this).apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,J.ON),e.getLocation(1,J.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,J.LEFT),e.getLocation(1,J.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,J.RIGHT),e.getLocation(1,J.RIGHT),2))}}])}(As),na=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"setWorkingPrecisionModel",value:function(t){this._workingPrecisionModel=t}},{key:"insertUniqueEdge",value:function(t){var e=this._edgeList.findEqualEdge(t);if(e!==null){var n=e.getLabel(),o=t.getLabel();e.isPointwiseEqual(t)||(o=new re(t.getLabel())).flip(),n.merge(o);var c=i.depthDelta(o),g=e.getDepthDelta()+c;e.setDepthDelta(g)}else this._edgeList.add(t),t.setDepthDelta(i.depthDelta(t.getLabel()))}},{key:"buildSubgraphs",value:function(t,e){for(var n=new ot,o=t.iterator();o.hasNext();){var c=o.next(),g=c.getRightmostCoordinate(),v=new $s(n).getDepth(g);c.computeDepth(v),c.findResultEdges(),n.add(c),e.add(c.getDirectedEdges(),c.getNodes())}}},{key:"createSubgraphs",value:function(t){for(var e=new ot,n=t.getNodes().iterator();n.hasNext();){var o=n.next();if(!o.isVisited()){var c=new Co;c.create(o),e.add(c)}}return un.sort(e,un.reverseOrder()),e}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(t){if(this._workingNoder!==null)return this._workingNoder;var e=new br,n=new $e;return n.setPrecisionModel(t),e.setSegmentIntersector(new dl(n)),e}},{key:"buffer",value:function(t,e){var n=this._workingPrecisionModel;n===null&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var o=new ul(n,this._bufParams),c=new ll(t,e,o).getCurves();if(c.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(c,n),this._graph=new Ys(new vl),this._graph.addEdges(this._edgeList.getEdges());var g=this.createSubgraphs(this._graph),v=new Zo(this._geomFact);this.buildSubgraphs(g,v);var x=v.getPolygons();return x.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(x)}},{key:"computeNodedEdges",value:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var o=n.getNodedSubstrings().iterator();o.hasNext();){var c=o.next(),g=c.getCoordinates();if(g.length!==2||!g[0].equals2D(g[1])){var v=c.getData(),x=new ea(c.getCoordinates(),new re(v));this.insertUniqueEdge(x)}}}},{key:"setNoder",value:function(t){this._workingNoder=t}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new ml;var t=arguments[0];this._bufParams=t}},{key:"depthDelta",value:function(t){var e=t.getLocation(0,J.LEFT),n=t.getLocation(0,J.RIGHT);return e===T.INTERIOR&&n===T.EXTERIOR?1:e===T.EXTERIOR&&n===T.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(t){for(var e=new sn,n=new ot;t.hasNext();){var o=t.next(),c=e.createLineString(o.getCoordinates());n.add(c)}return e.buildGeometry(n)}}])}(),Il=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"rescale",value:function(){if(gt(arguments[0],Tt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],o=0;o<n.length;o++)n[o].x=n[o].x/this._scaleFactor+this._offsetX,n[o].y=n[o].y/this._scaleFactor+this._offsetY;n.length===2&&n[0].equals2D(n[1])&&ne.out.println(n)}}},{key:"scale",value:function(){if(gt(arguments[0],Tt)){for(var t=arguments[0],e=new ot(t.size()),n=t.iterator();n.hasNext();){var o=n.next();e.add(new je(this.scale(o.getCoordinates()),o.getData()))}return e}if(arguments[0]instanceof Array){for(var c=arguments[0],g=new Array(c.length).fill(null),v=0;v<c.length;v++)g[v]=new z(Math.round((c[v].x-this._offsetX)*this._scaleFactor),Math.round((c[v].y-this._offsetY)*this._scaleFactor),c[v].getZ());return Dt.removeRepeatedPoints(g)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t}},{key:"computeNodes",value:function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)}},{key:"interfaces_",get:function(){return[Sr]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var t=arguments[0],e=arguments[1];i.constructor_.call(this,t,e,0,0)}else if(arguments.length===4){var n=arguments[0],o=arguments[1];this._noder=n,this._scaleFactor=o,this._isScaled=!this.isIntegerPrecision()}}}])}(),ia=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(arguments.length===2){for(var n=arguments[0],o=arguments[1].iterator();o.hasNext();)for(var c=o.next().getCoordinates(),g=1;g<c.length-1;g++)if(c[g].equals(n))throw new st("found endpt/interior pt intersection at index "+g+" :pt "+n)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var o=n.next();this.checkInteriorIntersections(e,o)}else if(arguments.length===2)for(var c=arguments[0],g=arguments[1],v=c.getCoordinates(),x=g.getCoordinates(),I=0;I<v.length-1;I++)for(var G=0;G<x.length-1;G++)this.checkInteriorIntersections(c,I,g,G);else if(arguments.length===4){var X=arguments[0],j=arguments[1],tt=arguments[2],rt=arguments[3];if(X===tt&&j===rt)return null;var ut=X.getCoordinates()[j],dt=X.getCoordinates()[j+1],vt=tt.getCoordinates()[rt],Nt=tt.getCoordinates()[rt+1];if(this._li.computeIntersection(ut,dt,vt,Nt),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,ut,dt)||this.hasInteriorIntersection(this._li,vt,Nt)))throw new st("found non-noded intersection at "+ut+"-"+dt+" and "+vt+"-"+Nt)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(arguments.length===1)for(var n=arguments[0].getCoordinates(),o=0;o<n.length-2;o++)this.checkCollapse(n[o],n[o+1],n[o+2])}},{key:"hasInteriorIntersection",value:function(t,e,n){for(var o=0;o<t.getIntersectionNum();o++){var c=t.getIntersection(o);if(!c.equals(e)&&!c.equals(n))return!0}return!1}},{key:"checkCollapse",value:function(t,e,n){if(t.equals(n))throw new st("found non-noded collapse at "+i.fact.createLineString([t,e,n]))}}],[{key:"constructor_",value:function(){this._li=new $e,this._segStrings=null;var t=arguments[0];this._segStrings=t}}])}();ia.fact=new sn;var Tr=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"intersectsScaled",value:function(t,e){var n=Math.min(t.x,e.x),o=Math.max(t.x,e.x),c=Math.min(t.y,e.y),g=Math.max(t.y,e.y),v=this._maxx<n||this._minx>o||this._maxy<c||this._miny>g;if(v)return!1;var x=this.intersectsToleranceSquare(t,e);return nt.isTrue(!(v&&x),"Found bad envelope test"),x}},{key:"initCorners",value:function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new z(this._maxx,this._maxy),this._corner[1]=new z(this._minx,this._maxy),this._corner[2]=new z(this._minx,this._miny),this._corner[3]=new z(this._maxx,this._miny)}},{key:"intersects",value:function(t,e){return this._scaleFactor===1?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(t){return Math.round(t*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var t=i.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new It(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(t,e){var n=!1,o=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(o=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!o)||!!t.equals(this._pt)||!!e.equals(this._pt))))}},{key:"addSnappedNode",value:function(t,e){var n=t.getCoordinate(e),o=t.getCoordinate(e+1);return!!this.intersects(n,o)&&(t.addIntersection(this.getCoordinate(),e),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new $("Scale factor must be non-zero");e!==1&&(this._pt=new z(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new z,this._p1Scaled=new z),this.initCorners(this._pt)}}])}();Tr.SAFE_ENV_EXPANSION_FACTOR=.75;var Nl=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var i=arguments[1];arguments[0].getLineSegment(i,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new Kt}}])}(),ra=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"snap",value:function(){if(arguments.length===1){var i=arguments[0];return this.snap(i,null,-1)}if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2],o=t.getSafeEnvelope(),c=new sa(t,e,n);return this._index.query(o,new(function(){return f(function g(){l(this,g)},[{key:"interfaces_",get:function(){return[Xs]}},{key:"visitItem",value:function(g){g.select(o,c)}}])}())),c.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var i=arguments[0];this._index=i}}])}(),sa=function(i){function t(){var e;return l(this,t),e=u(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof Vs))return S(t,"select",this,1).apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(this._parentEdge===n&&(e===this._hotPixelVertexIndex||e+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(n,e)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],o=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=o}}])}(Nl);ra.HotPixelSnapAction=sa;var Sl=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"processIntersections",value:function(i,t,e,n){if(i===e&&t===n)return null;var o=i.getCoordinates()[t],c=i.getCoordinates()[t+1],g=e.getCoordinates()[n],v=e.getCoordinates()[n+1];if(this._li.computeIntersection(o,c,g,v),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var x=0;x<this._li.getIntersectionNum();x++)this._interiorIntersections.add(this._li.getIntersection(x));i.addIntersections(this._li,t,0),e.addIntersections(this._li,n,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[Qs]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var i=arguments[0];this._li=i,this._interiorIntersections=new ot}}])}(),bl=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"checkCorrectness",value:function(i){var t=je.getNodedSubstrings(i),e=new ia(t);try{e.checkValid()}catch(n){if(!(n instanceof K))throw n;n.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return je.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(i,t){var e=this.findInteriorIntersections(i,t);this.computeIntersectionSnaps(e),this.computeVertexSnaps(i)}},{key:"findInteriorIntersections",value:function(i,t){var e=new Sl(t);return this._noder.setSegmentIntersector(e),this._noder.computeNodes(i),e.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(gt(arguments[0],Tt))for(var i=arguments[0].iterator();i.hasNext();){var t=i.next();this.computeVertexSnaps(t)}else if(arguments[0]instanceof je)for(var e=arguments[0],n=e.getCoordinates(),o=0;o<n.length;o++){var c=new Tr(n[o],this._scaleFactor,this._li);this._pointSnapper.snap(c,e,o)&&e.addIntersection(n[o],o)}}},{key:"computeNodes",value:function(i){this._nodedSegStrings=i,this._noder=new br,this._pointSnapper=new ra(this._noder.getIndex()),this.snapRound(i,this._li)}},{key:"computeIntersectionSnaps",value:function(i){for(var t=i.iterator();t.hasNext();){var e=t.next(),n=new Tr(e,this._scaleFactor,this._li);this._pointSnapper.snap(n)}}},{key:"interfaces_",get:function(){return[Sr]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var i=arguments[0];this._pm=i,this._li=new $e,this._li.setPrecisionModel(i),this._scaleFactor=i.getScale()}}])}(),cn=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"bufferFixedPrecision",value:function(t){var e=new Il(new bl(new fe(1)),t.getScale()),n=new na(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var t=i.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(c){if(!(c instanceof Te))throw c;this._saveException=c}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var e=arguments[0],n=i.precisionScaleFactor(this._argGeom,this._distance,e),o=new fe(n);this.bufferFixedPrecision(o)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===fe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(t){this._bufParams.setQuadrantSegments(t)}},{key:"bufferOriginalPrecision",value:function(){try{var t=new na(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(e){if(!(e instanceof st))throw e;this._saveException=e}}},{key:"getResultGeometry",value:function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(t){this._bufParams.setEndCapStyle(t)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new U,this._resultGeometry=null,this._saveException=null,arguments.length===1){var t=arguments[0];this._argGeom=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}}},{key:"bufferOp",value:function(){if(arguments.length===2){var t=arguments[1];return new i(arguments[0]).getResultGeometry(t)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof it&&typeof arguments[1]=="number"){var e=arguments[1],n=arguments[2],o=new i(arguments[0]);return o.setQuadrantSegments(n),o.getResultGeometry(e)}if(arguments[2]instanceof U&&arguments[0]instanceof it&&typeof arguments[1]=="number"){var c=arguments[1];return new i(arguments[0],arguments[2]).getResultGeometry(c)}}else if(arguments.length===4){var g=arguments[1],v=arguments[2],x=arguments[3],I=new i(arguments[0]);return I.setQuadrantSegments(v),I.setEndCapStyle(x),I.getResultGeometry(g)}}},{key:"precisionScaleFactor",value:function(t,e,n){var o=t.getEnvelopeInternal(),c=Tn.max(Math.abs(o.getMaxX()),Math.abs(o.getMaxY()),Math.abs(o.getMinX()),Math.abs(o.getMinY()))+2*(e>0?e:0),g=n-Math.trunc(Math.log(c)/Math.log(10)+1);return Math.pow(10,g)}}])}();cn.CAP_ROUND=U.CAP_ROUND,cn.CAP_BUTT=U.CAP_FLAT,cn.CAP_FLAT=U.CAP_FLAT,cn.CAP_SQUARE=U.CAP_SQUARE,cn.MAX_PRECISION_DIGITS=12;var Cl=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],aa=function(){return f(function i(t){l(this,i),this.geometryFactory=t||new sn},[{key:"read",value:function(i){var t,e=(t=typeof i=="string"?JSON.parse(i):i).type;if(!ae[e])throw new Error("Unknown GeoJSON type: "+t.type);return Cl.indexOf(e)!==-1?ae[e].call(this,t.coordinates):e==="GeometryCollection"?ae[e].call(this,t.geometries):ae[e].call(this,t)}},{key:"write",value:function(i){var t=i.getGeometryType();if(!xe[t])throw new Error("Geometry is not supported");return xe[t].call(this,i)}}])}(),ae={Feature:function(i){var t={};for(var e in i)t[e]=i[e];if(i.geometry){var n=i.geometry.type;if(!ae[n])throw new Error("Unknown GeoJSON type: "+i.type);t.geometry=this.read(i.geometry)}return i.bbox&&(t.bbox=ae.bbox.call(this,i.bbox)),t},FeatureCollection:function(i){var t={};if(i.features){t.features=[];for(var e=0;e<i.features.length;++e)t.features.push(this.read(i.features[e]))}return i.bbox&&(t.bbox=this.parse.bbox.call(this,i.bbox)),t},coordinates:function(i){for(var t=[],e=0;e<i.length;++e){var n=i[e];t.push(h(z,R(n)))}return t},bbox:function(i){return this.geometryFactory.createLinearRing([new z(i[0],i[1]),new z(i[2],i[1]),new z(i[2],i[3]),new z(i[0],i[3]),new z(i[0],i[1])])},Point:function(i){var t=h(z,R(i));return this.geometryFactory.createPoint(t)},MultiPoint:function(i){for(var t=[],e=0;e<i.length;++e)t.push(ae.Point.call(this,i[e]));return this.geometryFactory.createMultiPoint(t)},LineString:function(i){var t=ae.coordinates.call(this,i);return this.geometryFactory.createLineString(t)},MultiLineString:function(i){for(var t=[],e=0;e<i.length;++e)t.push(ae.LineString.call(this,i[e]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(i){for(var t=ae.coordinates.call(this,i[0]),e=this.geometryFactory.createLinearRing(t),n=[],o=1;o<i.length;++o){var c=i[o],g=ae.coordinates.call(this,c),v=this.geometryFactory.createLinearRing(g);n.push(v)}return this.geometryFactory.createPolygon(e,n)},MultiPolygon:function(i){for(var t=[],e=0;e<i.length;++e){var n=i[e];t.push(ae.Polygon.call(this,n))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(i){for(var t=[],e=0;e<i.length;++e){var n=i[e];t.push(this.read(n))}return this.geometryFactory.createGeometryCollection(t)}},xe={coordinate:function(i){var t=[i.x,i.y];return i.z&&t.push(i.z),i.m&&t.push(i.m),t},Point:function(i){return{type:"Point",coordinates:xe.coordinate.call(this,i.getCoordinate())}},MultiPoint:function(i){for(var t=[],e=0;e<i._geometries.length;++e){var n=i._geometries[e],o=xe.Point.call(this,n);t.push(o.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(i){for(var t=[],e=i.getCoordinates(),n=0;n<e.length;++n){var o=e[n];t.push(xe.coordinate.call(this,o))}return{type:"LineString",coordinates:t}},MultiLineString:function(i){for(var t=[],e=0;e<i._geometries.length;++e){var n=i._geometries[e],o=xe.LineString.call(this,n);t.push(o.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(i){var t=[],e=xe.LineString.call(this,i._shell);t.push(e.coordinates);for(var n=0;n<i._holes.length;++n){var o=i._holes[n],c=xe.LineString.call(this,o);t.push(c.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(i){for(var t=[],e=0;e<i._geometries.length;++e){var n=i._geometries[e],o=xe.Polygon.call(this,n);t.push(o.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(i){for(var t=[],e=0;e<i._geometries.length;++e){var n=i._geometries[e],o=n.getGeometryType();t.push(xe[o].call(this,n))}return{type:"GeometryCollection",geometries:t}}};return{BufferOp:cn,GeoJSONReader:function(){return f(function i(t){l(this,i),this.parser=new aa(t||new sn)},[{key:"read",value:function(i){return this.parser.read(i)}}])}(),GeoJSONWriter:function(){return f(function i(){l(this,i),this.parser=new aa(this.geometryFactory)},[{key:"write",value:function(i){return this.parser.write(i)}}])}()}})}(Pi)),Pi.exports}var Yl=Bl();const zl=wu(Yl);function Xe(){return new zi}function zi(){this.reset()}zi.prototype={constructor:zi,reset:function(){this.s=this.t=0},add:function(r){ka(_i,r,this.t),ka(this,_i.s,this.s),this.s?this.t+=_i.t:this.s=_i.t},valueOf:function(){return this.s}};var _i=new zi;function ka(r,s,a){var u=r.s=s+a,l=u-s,h=u-l;r.t=s-h+(a-l)}var Ct=1e-6,pt=Math.PI,Ne=pt/2,wa=pt/4,Ce=pt*2,Be=180/pt,ce=pt/180,Ft=Math.abs,Xl=Math.atan,xn=Math.atan2,Rt=Math.cos,Ot=Math.sin,Nn=Math.sqrt;function Su(r){return r>1?0:r<-1?pt:Math.acos(r)}function nn(r){return r>1?Ne:r<-1?-Ne:Math.asin(r)}function Hn(){}function Xi(r,s){r&&Na.hasOwnProperty(r.type)&&Na[r.type](r,s)}var Ia={Feature:function(r,s){Xi(r.geometry,s)},FeatureCollection:function(r,s){for(var a=r.features,u=-1,l=a.length;++u<l;)Xi(a[u].geometry,s)}},Na={Sphere:function(r,s){s.sphere()},Point:function(r,s){r=r.coordinates,s.point(r[0],r[1],r[2])},MultiPoint:function(r,s){for(var a=r.coordinates,u=-1,l=a.length;++u<l;)r=a[u],s.point(r[0],r[1],r[2])},LineString:function(r,s){Wr(r.coordinates,s,0)},MultiLineString:function(r,s){for(var a=r.coordinates,u=-1,l=a.length;++u<l;)Wr(a[u],s,0)},Polygon:function(r,s){Sa(r.coordinates,s)},MultiPolygon:function(r,s){for(var a=r.coordinates,u=-1,l=a.length;++u<l;)Sa(a[u],s)},GeometryCollection:function(r,s){for(var a=r.geometries,u=-1,l=a.length;++u<l;)Xi(a[u],s)}};function Wr(r,s,a){var u=-1,l=r.length-a,h;for(s.lineStart();++u<l;)h=r[u],s.point(h[0],h[1],h[2]);s.lineEnd()}function Sa(r,s){var a=-1,u=r.length;for(s.polygonStart();++a<u;)Wr(r[a],s,1);s.polygonEnd()}function Ul(r,s){r&&Ia.hasOwnProperty(r.type)?Ia[r.type](r,s):Xi(r,s)}Xe();Xe();function Zr(r){return[xn(r[1],r[0]),nn(r[2])]}function En(r){var s=r[0],a=r[1],u=Rt(a);return[u*Rt(s),u*Ot(s),Ot(a)]}function xi(r,s){return r[0]*s[0]+r[1]*s[1]+r[2]*s[2]}function Ui(r,s){return[r[1]*s[2]-r[2]*s[1],r[2]*s[0]-r[0]*s[2],r[0]*s[1]-r[1]*s[0]]}function Ar(r,s){r[0]+=s[0],r[1]+=s[1],r[2]+=s[2]}function Ei(r,s){return[r[0]*s,r[1]*s,r[2]*s]}function $r(r){var s=Nn(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);r[0]/=s,r[1]/=s,r[2]/=s}Xe();function bu(r,s){function a(u,l){return u=r(u,l),s(u[0],u[1])}return r.invert&&s.invert&&(a.invert=function(u,l){return u=s.invert(u,l),u&&r.invert(u[0],u[1])}),a}function jr(r,s){return[r>pt?r-Ce:r<-pt?r+Ce:r,s]}jr.invert=jr;function Vl(r,s,a){return(r%=Ce)?s||a?bu(Ca(r),Ta(s,a)):Ca(r):s||a?Ta(s,a):jr}function ba(r){return function(s,a){return s+=r,[s>pt?s-Ce:s<-pt?s+Ce:s,a]}}function Ca(r){var s=ba(r);return s.invert=ba(-r),s}function Ta(r,s){var a=Rt(r),u=Ot(r),l=Rt(s),h=Ot(s);function y(f,p){var m=Rt(p),_=Rt(f)*m,d=Ot(f)*m,w=Ot(p),N=w*a+_*u;return[xn(d*l-N*h,_*a-w*u),nn(N*l+d*h)]}return y.invert=function(f,p){var m=Rt(p),_=Rt(f)*m,d=Ot(f)*m,w=Ot(p),N=w*l-d*h;return[xn(d*l+w*h,_*a+N*u),nn(N*a-_*u)]},y}function Hl(r,s,a,u,l,h){if(a){var y=Rt(s),f=Ot(s),p=u*a;l==null?(l=s+u*Ce,h=s-p/2):(l=La(y,l),h=La(y,h),(u>0?l<h:l>h)&&(l+=u*Ce));for(var m,_=l;u>0?_>h:_<h;_-=p)m=Zr([y,-f*Rt(_),-f*Ot(_)]),r.point(m[0],m[1])}}function La(r,s){s=En(s),s[0]-=r,$r(s);var a=Su(-s[1]);return((-s[2]<0?-a:a)+Ce-Ct)%Ce}function Cu(){var r=[],s;return{point:function(a,u){s.push([a,u])},lineStart:function(){r.push(s=[])},lineEnd:Hn,rejoin:function(){r.length>1&&r.push(r.pop().concat(r.shift()))},result:function(){var a=r;return r=[],s=null,a}}}function Wl(r,s,a,u,l,h){var y=r[0],f=r[1],p=s[0],m=s[1],_=0,d=1,w=p-y,N=m-f,S;if(S=a-y,!(!w&&S>0)){if(S/=w,w<0){if(S<_)return;S<d&&(d=S)}else if(w>0){if(S>d)return;S>_&&(_=S)}if(S=l-y,!(!w&&S<0)){if(S/=w,w<0){if(S>d)return;S>_&&(_=S)}else if(w>0){if(S<_)return;S<d&&(d=S)}if(S=u-f,!(!N&&S>0)){if(S/=N,N<0){if(S<_)return;S<d&&(d=S)}else if(N>0){if(S>d)return;S>_&&(_=S)}if(S=h-f,!(!N&&S<0)){if(S/=N,N<0){if(S>d)return;S>_&&(_=S)}else if(N>0){if(S<_)return;S<d&&(d=S)}return _>0&&(r[0]=y+_*w,r[1]=f+_*N),d<1&&(s[0]=y+d*w,s[1]=f+d*N),!0}}}}}function Ai(r,s){return Ft(r[0]-s[0])<Ct&&Ft(r[1]-s[1])<Ct}function ki(r,s,a,u){this.x=r,this.z=s,this.o=a,this.e=u,this.v=!1,this.n=this.p=null}function Tu(r,s,a,u,l){var h=[],y=[],f,p;if(r.forEach(function(S){if(!((R=S.length-1)<=0)){var R,B=S[0],Y=S[R],O;if(Ai(B,Y)){for(l.lineStart(),f=0;f<R;++f)l.point((B=S[f])[0],B[1]);l.lineEnd();return}h.push(O=new ki(B,S,null,!0)),y.push(O.o=new ki(B,null,O,!1)),h.push(O=new ki(Y,S,null,!1)),y.push(O.o=new ki(Y,null,O,!0))}}),!!h.length){for(y.sort(s),Ra(h),Ra(y),f=0,p=y.length;f<p;++f)y[f].e=a=!a;for(var m=h[0],_,d;;){for(var w=m,N=!0;w.v;)if((w=w.n)===m)return;_=w.z,l.lineStart();do{if(w.v=w.o.v=!0,w.e){if(N)for(f=0,p=_.length;f<p;++f)l.point((d=_[f])[0],d[1]);else u(w.x,w.n.x,1,l);w=w.n}else{if(N)for(_=w.p.z,f=_.length-1;f>=0;--f)l.point((d=_[f])[0],d[1]);else u(w.x,w.p.x,-1,l);w=w.p}w=w.o,_=w.z,N=!N}while(!w.v);l.lineEnd()}}}function Ra(r){if(s=r.length){for(var s,a=0,u=r[0],l;++a<s;)u.n=l=r[a],l.p=u,u=l;u.n=l=r[0],l.p=u}}function Lu(r,s){return r<s?-1:r>s?1:r>=s?0:NaN}function Zl(r){return r.length===1&&(r=$l(r)),{left:function(s,a,u,l){for(u==null&&(u=0),l==null&&(l=s.length);u<l;){var h=u+l>>>1;r(s[h],a)<0?u=h+1:l=h}return u},right:function(s,a,u,l){for(u==null&&(u=0),l==null&&(l=s.length);u<l;){var h=u+l>>>1;r(s[h],a)>0?l=h:u=h+1}return u}}}function $l(r){return function(s,a){return Lu(r(s),a)}}Zl(Lu);function Ru(r){for(var s=r.length,a,u=-1,l=0,h,y;++u<s;)l+=r[u].length;for(h=new Array(l);--s>=0;)for(y=r[s],a=y.length;--a>=0;)h[--l]=y[a];return h}var wi=1e9,Ii=-1e9;function jl(r,s,a,u){function l(m,_){return r<=m&&m<=a&&s<=_&&_<=u}function h(m,_,d,w){var N=0,S=0;if(m==null||(N=y(m,d))!==(S=y(_,d))||p(m,_)<0^d>0)do w.point(N===0||N===3?r:a,N>1?u:s);while((N=(N+d+4)%4)!==S);else w.point(_[0],_[1])}function y(m,_){return Ft(m[0]-r)<Ct?_>0?0:3:Ft(m[0]-a)<Ct?_>0?2:1:Ft(m[1]-s)<Ct?_>0?1:0:_>0?3:2}function f(m,_){return p(m.x,_.x)}function p(m,_){var d=y(m,1),w=y(_,1);return d!==w?d-w:d===0?_[1]-m[1]:d===1?m[0]-_[0]:d===2?m[1]-_[1]:_[0]-m[0]}return function(m){var _=m,d=Cu(),w,N,S,R,B,Y,O,U,K,$,Z,W={point:E,lineStart:P,lineEnd:q,polygonStart:C,polygonEnd:F};function E(L,b){l(L,b)&&_.point(L,b)}function k(){for(var L=0,b=0,A=N.length;b<A;++b)for(var D=N[b],V=1,H=D.length,et=D[0],st,yt,nt=et[0],lt=et[1];V<H;++V)st=nt,yt=lt,et=D[V],nt=et[0],lt=et[1],yt<=u?lt>u&&(nt-st)*(u-yt)>(lt-yt)*(r-st)&&++L:lt<=u&&(nt-st)*(u-yt)<(lt-yt)*(r-st)&&--L;return L}function C(){_=d,w=[],N=[],Z=!0}function F(){var L=k(),b=Z&&L,A=(w=Ru(w)).length;(b||A)&&(m.polygonStart(),b&&(m.lineStart(),h(null,null,1,m),m.lineEnd()),A&&Tu(w,f,L,h,m),m.polygonEnd()),_=m,w=N=S=null}function P(){W.point=M,N&&N.push(S=[]),$=!0,K=!1,O=U=NaN}function q(){w&&(M(R,B),Y&&K&&d.rejoin(),w.push(d.result())),W.point=E,K&&_.lineEnd()}function M(L,b){var A=l(L,b);if(N&&S.push([L,b]),$)R=L,B=b,Y=A,$=!1,A&&(_.lineStart(),_.point(L,b));else if(A&&K)_.point(L,b);else{var D=[O=Math.max(Ii,Math.min(wi,O)),U=Math.max(Ii,Math.min(wi,U))],V=[L=Math.max(Ii,Math.min(wi,L)),b=Math.max(Ii,Math.min(wi,b))];Wl(D,V,r,s,a,u)?(K||(_.lineStart(),_.point(D[0],D[1])),_.point(V[0],V[1]),A||_.lineEnd(),Z=!1):A&&(_.lineStart(),_.point(L,b),Z=!1)}O=L,U=b,K=A}return W}}var Dr=Xe();function Kl(r,s){var a=s[0],u=s[1],l=[Ot(a),-Rt(a),0],h=0,y=0;Dr.reset();for(var f=0,p=r.length;f<p;++f)if(_=(m=r[f]).length)for(var m,_,d=m[_-1],w=d[0],N=d[1]/2+wa,S=Ot(N),R=Rt(N),B=0;B<_;++B,w=O,S=K,R=$,d=Y){var Y=m[B],O=Y[0],U=Y[1]/2+wa,K=Ot(U),$=Rt(U),Z=O-w,W=Z>=0?1:-1,E=W*Z,k=E>pt,C=S*K;if(Dr.add(xn(C*W*Ot(E),R*$+C*Rt(E))),h+=k?Z+W*Ce:Z,k^w>=a^O>=a){var F=Ui(En(d),En(Y));$r(F);var P=Ui(l,F);$r(P);var q=(k^Z>=0?-1:1)*nn(P[2]);(u>q||u===q&&(F[0]||F[1]))&&(y+=k^Z>=0?1:-1)}}return(h<-1e-6||h<Ct&&Dr<-1e-6)^y&1}Xe();function Oa(r){return r}Xe();Xe();var kn=1/0,Vi=kn,Qn=-kn,Hi=Qn,Ma={point:Jl,lineStart:Hn,lineEnd:Hn,polygonStart:Hn,polygonEnd:Hn,result:function(){var r=[[kn,Vi],[Qn,Hi]];return Qn=Hi=-(Vi=kn=1/0),r}};function Jl(r,s){r<kn&&(kn=r),r>Qn&&(Qn=r),s<Vi&&(Vi=s),s>Hi&&(Hi=s)}Xe();function Ou(r,s,a,u){return function(l,h){var y=s(h),f=l.invert(u[0],u[1]),p=Cu(),m=s(p),_=!1,d,w,N,S={point:R,lineStart:Y,lineEnd:O,polygonStart:function(){S.point=U,S.lineStart=K,S.lineEnd=$,w=[],d=[]},polygonEnd:function(){S.point=R,S.lineStart=Y,S.lineEnd=O,w=Ru(w);var Z=Kl(d,f);w.length?(_||(h.polygonStart(),_=!0),Tu(w,tc,Z,a,h)):Z&&(_||(h.polygonStart(),_=!0),h.lineStart(),a(null,null,1,h),h.lineEnd()),_&&(h.polygonEnd(),_=!1),w=d=null},sphere:function(){h.polygonStart(),h.lineStart(),a(null,null,1,h),h.lineEnd(),h.polygonEnd()}};function R(Z,W){var E=l(Z,W);r(Z=E[0],W=E[1])&&h.point(Z,W)}function B(Z,W){var E=l(Z,W);y.point(E[0],E[1])}function Y(){S.point=B,y.lineStart()}function O(){S.point=R,y.lineEnd()}function U(Z,W){N.push([Z,W]);var E=l(Z,W);m.point(E[0],E[1])}function K(){m.lineStart(),N=[]}function $(){U(N[0][0],N[0][1]),m.lineEnd();var Z=m.clean(),W=p.result(),E,k=W.length,C,F,P;if(N.pop(),d.push(N),N=null,!!k){if(Z&1){if(F=W[0],(C=F.length-1)>0){for(_||(h.polygonStart(),_=!0),h.lineStart(),E=0;E<C;++E)h.point((P=F[E])[0],P[1]);h.lineEnd()}return}k>1&&Z&2&&W.push(W.pop().concat(W.shift())),w.push(W.filter(Ql))}}return S}}function Ql(r){return r.length>1}function tc(r,s){return((r=r.x)[0]<0?r[1]-Ne-Ct:Ne-r[1])-((s=s.x)[0]<0?s[1]-Ne-Ct:Ne-s[1])}const Pa=Ou(function(){return!0},ec,ic,[-pt,-Ne]);function ec(r){var s=NaN,a=NaN,u=NaN,l;return{lineStart:function(){r.lineStart(),l=1},point:function(h,y){var f=h>0?pt:-pt,p=Ft(h-s);Ft(p-pt)<Ct?(r.point(s,a=(a+y)/2>0?Ne:-Ne),r.point(u,a),r.lineEnd(),r.lineStart(),r.point(f,a),r.point(h,a),l=0):u!==f&&p>=pt&&(Ft(s-u)<Ct&&(s-=u*Ct),Ft(h-f)<Ct&&(h-=f*Ct),a=nc(s,a,h,y),r.point(u,a),r.lineEnd(),r.lineStart(),r.point(f,a),l=0),r.point(s=h,a=y),u=f},lineEnd:function(){r.lineEnd(),s=a=NaN},clean:function(){return 2-l}}}function nc(r,s,a,u){var l,h,y=Ot(r-a);return Ft(y)>Ct?Xl((Ot(s)*(h=Rt(u))*Ot(a)-Ot(u)*(l=Rt(s))*Ot(r))/(l*h*y)):(s+u)/2}function ic(r,s,a,u){var l;if(r==null)l=a*Ne,u.point(-pt,l),u.point(0,l),u.point(pt,l),u.point(pt,0),u.point(pt,-l),u.point(0,-l),u.point(-pt,-l),u.point(-pt,0),u.point(-pt,l);else if(Ft(r[0]-s[0])>Ct){var h=r[0]<s[0]?pt:-pt;l=a*h/2,u.point(-h,l),u.point(0,l),u.point(h,l)}else u.point(s[0],s[1])}function rc(r,s){var a=Rt(r),u=a>0,l=Ft(a)>Ct;function h(_,d,w,N){Hl(N,r,s,w,_,d)}function y(_,d){return Rt(_)*Rt(d)>a}function f(_){var d,w,N,S,R;return{lineStart:function(){S=N=!1,R=1},point:function(B,Y){var O=[B,Y],U,K=y(B,Y),$=u?K?0:m(B,Y):K?m(B+(B<0?pt:-pt),Y):0;if(!d&&(S=N=K)&&_.lineStart(),K!==N&&(U=p(d,O),(!U||Ai(d,U)||Ai(O,U))&&(O[0]+=Ct,O[1]+=Ct,K=y(O[0],O[1]))),K!==N)R=0,K?(_.lineStart(),U=p(O,d),_.point(U[0],U[1])):(U=p(d,O),_.point(U[0],U[1]),_.lineEnd()),d=U;else if(l&&d&&u^K){var Z;!($&w)&&(Z=p(O,d,!0))&&(R=0,u?(_.lineStart(),_.point(Z[0][0],Z[0][1]),_.point(Z[1][0],Z[1][1]),_.lineEnd()):(_.point(Z[1][0],Z[1][1]),_.lineEnd(),_.lineStart(),_.point(Z[0][0],Z[0][1])))}K&&(!d||!Ai(d,O))&&_.point(O[0],O[1]),d=O,N=K,w=$},lineEnd:function(){N&&_.lineEnd(),d=null},clean:function(){return R|(S&&N)<<1}}}function p(_,d,w){var N=En(_),S=En(d),R=[1,0,0],B=Ui(N,S),Y=xi(B,B),O=B[0],U=Y-O*O;if(!U)return!w&&_;var K=a*Y/U,$=-a*O/U,Z=Ui(R,B),W=Ei(R,K),E=Ei(B,$);Ar(W,E);var k=Z,C=xi(W,k),F=xi(k,k),P=C*C-F*(xi(W,W)-1);if(!(P<0)){var q=Nn(P),M=Ei(k,(-C-q)/F);if(Ar(M,W),M=Zr(M),!w)return M;var L=_[0],b=d[0],A=_[1],D=d[1],V;b<L&&(V=L,L=b,b=V);var H=b-L,et=Ft(H-pt)<Ct,st=et||H<Ct;if(!et&&D<A&&(V=A,A=D,D=V),st?et?A+D>0^M[1]<(Ft(M[0]-L)<Ct?A:D):A<=M[1]&&M[1]<=D:H>pt^(L<=M[0]&&M[0]<=b)){var yt=Ei(k,(-C+q)/F);return Ar(yt,W),[M,Zr(yt)]}}}function m(_,d){var w=u?r:pt-r,N=0;return _<-w?N|=1:_>w&&(N|=2),d<-w?N|=4:d>w&&(N|=8),N}return Ou(y,f,h,u?[0,-r]:[-pt,r-pt])}function Mu(r){return function(s){var a=new Kr;for(var u in r)a[u]=r[u];return a.stream=s,a}}function Kr(){}Kr.prototype={constructor:Kr,point:function(r,s){this.stream.point(r,s)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Pu(r,s,a){var u=s[1][0]-s[0][0],l=s[1][1]-s[0][1],h=r.clipExtent&&r.clipExtent();r.scale(150).translate([0,0]),h!=null&&r.clipExtent(null),Ul(a,r.stream(Ma));var y=Ma.result(),f=Math.min(u/(y[1][0]-y[0][0]),l/(y[1][1]-y[0][1])),p=+s[0][0]+(u-f*(y[1][0]+y[0][0]))/2,m=+s[0][1]+(l-f*(y[1][1]+y[0][1]))/2;return h!=null&&r.clipExtent(h),r.scale(f*150).translate([p,m])}function sc(r,s,a){return Pu(r,[[0,0],s],a)}var Aa=16,ac=Rt(30*ce);function Da(r,s){return+s?oc(r,s):uc(r)}function uc(r){return Mu({point:function(s,a){s=r(s,a),this.stream.point(s[0],s[1])}})}function oc(r,s){function a(u,l,h,y,f,p,m,_,d,w,N,S,R,B){var Y=m-u,O=_-l,U=Y*Y+O*O;if(U>4*s&&R--){var K=y+w,$=f+N,Z=p+S,W=Nn(K*K+$*$+Z*Z),E=nn(Z/=W),k=Ft(Ft(Z)-1)<Ct||Ft(h-d)<Ct?(h+d)/2:xn($,K),C=r(k,E),F=C[0],P=C[1],q=F-u,M=P-l,L=O*q-Y*M;(L*L/U>s||Ft((Y*q+O*M)/U-.5)>.3||y*w+f*N+p*S<ac)&&(a(u,l,h,y,f,p,F,P,k,K/=W,$/=W,Z,R,B),B.point(F,P),a(F,P,k,K,$,Z,m,_,d,w,N,S,R,B))}}return function(u){var l,h,y,f,p,m,_,d,w,N,S,R,B={point:Y,lineStart:O,lineEnd:K,polygonStart:function(){u.polygonStart(),B.lineStart=$},polygonEnd:function(){u.polygonEnd(),B.lineStart=O}};function Y(E,k){E=r(E,k),u.point(E[0],E[1])}function O(){d=NaN,B.point=U,u.lineStart()}function U(E,k){var C=En([E,k]),F=r(E,k);a(d,w,_,N,S,R,d=F[0],w=F[1],_=E,N=C[0],S=C[1],R=C[2],Aa,u),u.point(d,w)}function K(){B.point=Y,u.lineEnd()}function $(){O(),B.point=Z,B.lineEnd=W}function Z(E,k){U(l=E,k),h=d,y=w,f=N,p=S,m=R,B.point=U}function W(){a(d,w,_,N,S,R,h,y,l,f,p,m,Aa,u),B.lineEnd=K,K()}return B}}var lc=Mu({point:function(r,s){this.stream.point(r*ce,s*ce)}});function cc(r){return hc(function(){return r})()}function hc(r){var s,a=150,u=480,l=250,h,y,f=0,p=0,m=0,_=0,d=0,w,N,S=null,R=Pa,B=null,Y,O,U,K=Oa,$=.5,Z=Da(F,$),W,E;function k(M){return M=N(M[0]*ce,M[1]*ce),[M[0]*a+h,y-M[1]*a]}function C(M){return M=N.invert((M[0]-h)/a,(y-M[1])/a),M&&[M[0]*Be,M[1]*Be]}function F(M,L){return M=s(M,L),[M[0]*a+h,y-M[1]*a]}k.stream=function(M){return W&&E===M?W:W=lc(R(w,Z(K(E=M))))},k.clipAngle=function(M){return arguments.length?(R=+M?rc(S=M*ce,6*ce):(S=null,Pa),q()):S*Be},k.clipExtent=function(M){return arguments.length?(K=M==null?(B=Y=O=U=null,Oa):jl(B=+M[0][0],Y=+M[0][1],O=+M[1][0],U=+M[1][1]),q()):B==null?null:[[B,Y],[O,U]]},k.scale=function(M){return arguments.length?(a=+M,P()):a},k.translate=function(M){return arguments.length?(u=+M[0],l=+M[1],P()):[u,l]},k.center=function(M){return arguments.length?(f=M[0]%360*ce,p=M[1]%360*ce,P()):[f*Be,p*Be]},k.rotate=function(M){return arguments.length?(m=M[0]%360*ce,_=M[1]%360*ce,d=M.length>2?M[2]%360*ce:0,P()):[m*Be,_*Be,d*Be]},k.precision=function(M){return arguments.length?(Z=Da(F,$=M*M),q()):Nn($)},k.fitExtent=function(M,L){return Pu(k,M,L)},k.fitSize=function(M,L){return sc(k,M,L)};function P(){N=bu(w=Vl(m,_,d),s);var M=s(f,p);return h=u-M[0]*a,y=l+M[1]*a,q()}function q(){return W=E=null,k}return function(){return s=r.apply(this,arguments),k.invert=s.invert&&C,P()}}function Au(r){return function(s,a){var u=Rt(s),l=Rt(a),h=r(u*l);return[h*l*Ot(s),h*Ot(a)]}}function Du(r){return function(s,a){var u=Nn(s*s+a*a),l=r(u),h=Ot(l),y=Rt(l);return[xn(s*h,u*y),nn(u&&a*h/u)]}}var fc=Au(function(r){return Nn(2/(1+r))});fc.invert=Du(function(r){return 2*nn(r/2)});var Fu=Au(function(r){return(r=Su(r))&&r/Ot(r)});Fu.invert=Du(function(r){return r});function gc(){return cc(Fu).scale(79.4188).clipAngle(180-.001)}function Fa(r,s){return[r,s]}Fa.invert=Fa;var{BufferOp:yc,GeoJSONReader:vc,GeoJSONWriter:mc}=zl;function vg(r,s,a){a=a||{};var u=a.units||"kilometers",l=a.steps||8;if(!r)throw new Error("geojson is required");if(typeof a!="object")throw new Error("options must be an object");if(typeof l!="number")throw new Error("steps must be an number");if(s===void 0)throw new Error("radius is required");if(l<=0)throw new Error("steps must be greater than 0");var h=[];switch(r.type){case"GeometryCollection":return ze(r,function(y){var f=Di(y,s,u,l);f&&h.push(f)}),qt(h);case"FeatureCollection":return De(r,function(y){var f=Di(y,s,u,l);f&&De(f,function(p){p&&h.push(p)})}),qt(h)}return Di(r,s,u,l)}function Di(r,s,a,u){var l=r.properties||{},h=r.type==="Feature"?r.geometry:r;if(h.type==="GeometryCollection"){var y=[];return ze(r,function(R){var B=Di(R,s,a,u);B&&y.push(B)}),qt(y)}var f=dc(h),p={type:h.type,coordinates:Gu(h.coordinates,f)},m=new vc,_=m.read(p),d=Nu(Dl(s,a),"meters"),w=yc.bufferOp(_,d,u),N=new mc;if(w=N.write(w),!qu(w.coordinates)){var S={type:w.type,coordinates:Bu(w.coordinates,f)};return me(S,l)}}function qu(r){return Array.isArray(r[0])?qu(r[0]):isNaN(r[0])}function Gu(r,s){return typeof r[0]!="object"?s(r):r.map(function(a){return Gu(a,s)})}function Bu(r,s){return typeof r[0]!="object"?s.invert(r):r.map(function(a){return Bu(a,s)})}function dc(r){var s=ql(r).geometry.coordinates,a=[-s[0],-s[1]];return gc().rotate(a).scale(Wt)}var pc=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Fr=Math.ceil,oe=Math.floor,Zt="[BigNumber Error] ",qa=Zt+"Number primitive has more than 15 significant digits: ",ye=1e14,ft=14,Ga=9007199254740991,qr=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Ye=1e7,Qt=1e9;function Yu(r){var s,a,u,l=O.prototype={constructor:O,toString:null,valueOf:null},h=new O(1),y=20,f=4,p=-7,m=21,_=-1e7,d=1e7,w=!1,N=1,S=0,R={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},B="0123456789abcdefghijklmnopqrstuvwxyz",Y=!0;function O(E,k){var C,F,P,q,M,L,b,A,D=this;if(!(D instanceof O))return new O(E,k);if(k==null){if(E&&E._isBigNumber===!0){D.s=E.s,!E.c||E.e>d?D.c=D.e=null:E.e<_?D.c=[D.e=0]:(D.e=E.e,D.c=E.c.slice());return}if((L=typeof E=="number")&&E*0==0){if(D.s=1/E<0?(E=-E,-1):1,E===~~E){for(q=0,M=E;M>=10;M/=10,q++);q>d?D.c=D.e=null:(D.e=q,D.c=[E]);return}A=String(E)}else{if(!pc.test(A=String(E)))return u(D,A,L);D.s=A.charCodeAt(0)==45?(A=A.slice(1),-1):1}(q=A.indexOf("."))>-1&&(A=A.replace(".","")),(M=A.search(/e/i))>0?(q<0&&(q=M),q+=+A.slice(M+1),A=A.substring(0,M)):q<0&&(q=A.length)}else{if(Lt(k,2,B.length,"Base"),k==10&&Y)return D=new O(E),Z(D,y+D.e+1,f);if(A=String(E),L=typeof E=="number"){if(E*0!=0)return u(D,A,L,k);if(D.s=1/E<0?(A=A.slice(1),-1):1,O.DEBUG&&A.replace(/^0\.0*|\./,"").length>15)throw Error(qa+E)}else D.s=A.charCodeAt(0)===45?(A=A.slice(1),-1):1;for(C=B.slice(0,k),q=M=0,b=A.length;M<b;M++)if(C.indexOf(F=A.charAt(M))<0){if(F=="."){if(M>q){q=b;continue}}else if(!P&&(A==A.toUpperCase()&&(A=A.toLowerCase())||A==A.toLowerCase()&&(A=A.toUpperCase()))){P=!0,M=-1,q=0;continue}return u(D,String(E),L,k)}L=!1,A=a(A,k,10,D.s),(q=A.indexOf("."))>-1?A=A.replace(".",""):q=A.length}for(M=0;A.charCodeAt(M)===48;M++);for(b=A.length;A.charCodeAt(--b)===48;);if(A=A.slice(M,++b)){if(b-=M,L&&O.DEBUG&&b>15&&(E>Ga||E!==oe(E)))throw Error(qa+D.s*E);if((q=q-M-1)>d)D.c=D.e=null;else if(q<_)D.c=[D.e=0];else{if(D.e=q,D.c=[],M=(q+1)%ft,q<0&&(M+=ft),M<b){for(M&&D.c.push(+A.slice(0,M)),b-=ft;M<b;)D.c.push(+A.slice(M,M+=ft));M=ft-(A=A.slice(M)).length}else M-=b;for(;M--;A+="0");D.c.push(+A)}}else D.c=[D.e=0]}O.clone=Yu,O.ROUND_UP=0,O.ROUND_DOWN=1,O.ROUND_CEIL=2,O.ROUND_FLOOR=3,O.ROUND_HALF_UP=4,O.ROUND_HALF_DOWN=5,O.ROUND_HALF_EVEN=6,O.ROUND_HALF_CEIL=7,O.ROUND_HALF_FLOOR=8,O.EUCLID=9,O.config=O.set=function(E){var k,C;if(E!=null)if(typeof E=="object"){if(E.hasOwnProperty(k="DECIMAL_PLACES")&&(C=E[k],Lt(C,0,Qt,k),y=C),E.hasOwnProperty(k="ROUNDING_MODE")&&(C=E[k],Lt(C,0,8,k),f=C),E.hasOwnProperty(k="EXPONENTIAL_AT")&&(C=E[k],C&&C.pop?(Lt(C[0],-1e9,0,k),Lt(C[1],0,Qt,k),p=C[0],m=C[1]):(Lt(C,-1e9,Qt,k),p=-(m=C<0?-C:C))),E.hasOwnProperty(k="RANGE"))if(C=E[k],C&&C.pop)Lt(C[0],-1e9,-1,k),Lt(C[1],1,Qt,k),_=C[0],d=C[1];else if(Lt(C,-1e9,Qt,k),C)_=-(d=C<0?-C:C);else throw Error(Zt+k+" cannot be zero: "+C);if(E.hasOwnProperty(k="CRYPTO"))if(C=E[k],C===!!C)if(C)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))w=C;else throw w=!C,Error(Zt+"crypto unavailable");else w=C;else throw Error(Zt+k+" not true or false: "+C);if(E.hasOwnProperty(k="MODULO_MODE")&&(C=E[k],Lt(C,0,9,k),N=C),E.hasOwnProperty(k="POW_PRECISION")&&(C=E[k],Lt(C,0,Qt,k),S=C),E.hasOwnProperty(k="FORMAT"))if(C=E[k],typeof C=="object")R=C;else throw Error(Zt+k+" not an object: "+C);if(E.hasOwnProperty(k="ALPHABET"))if(C=E[k],typeof C=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(C))Y=C.slice(0,10)=="0123456789",B=C;else throw Error(Zt+k+" invalid: "+C)}else throw Error(Zt+"Object expected: "+E);return{DECIMAL_PLACES:y,ROUNDING_MODE:f,EXPONENTIAL_AT:[p,m],RANGE:[_,d],CRYPTO:w,MODULO_MODE:N,POW_PRECISION:S,FORMAT:R,ALPHABET:B}},O.isBigNumber=function(E){if(!E||E._isBigNumber!==!0)return!1;if(!O.DEBUG)return!0;var k,C,F=E.c,P=E.e,q=E.s;t:if({}.toString.call(F)=="[object Array]"){if((q===1||q===-1)&&P>=-1e9&&P<=Qt&&P===oe(P)){if(F[0]===0){if(P===0&&F.length===1)return!0;break t}if(k=(P+1)%ft,k<1&&(k+=ft),String(F[0]).length==k){for(k=0;k<F.length;k++)if(C=F[k],C<0||C>=ye||C!==oe(C))break t;if(C!==0)return!0}}}else if(F===null&&P===null&&(q===null||q===1||q===-1))return!0;throw Error(Zt+"Invalid BigNumber: "+E)},O.maximum=O.max=function(){return K(arguments,-1)},O.minimum=O.min=function(){return K(arguments,1)},O.random=function(){var E=9007199254740992,k=Math.random()*E&2097151?function(){return oe(Math.random()*E)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(C){var F,P,q,M,L,b=0,A=[],D=new O(h);if(C==null?C=y:Lt(C,0,Qt),M=Fr(C/ft),w)if(crypto.getRandomValues){for(F=crypto.getRandomValues(new Uint32Array(M*=2));b<M;)L=F[b]*131072+(F[b+1]>>>11),L>=9e15?(P=crypto.getRandomValues(new Uint32Array(2)),F[b]=P[0],F[b+1]=P[1]):(A.push(L%1e14),b+=2);b=M/2}else if(crypto.randomBytes){for(F=crypto.randomBytes(M*=7);b<M;)L=(F[b]&31)*281474976710656+F[b+1]*1099511627776+F[b+2]*4294967296+F[b+3]*16777216+(F[b+4]<<16)+(F[b+5]<<8)+F[b+6],L>=9e15?crypto.randomBytes(7).copy(F,b):(A.push(L%1e14),b+=7);b=M/7}else throw w=!1,Error(Zt+"crypto unavailable");if(!w)for(;b<M;)L=k(),L<9e15&&(A[b++]=L%1e14);for(M=A[--b],C%=ft,M&&C&&(L=qr[ft-C],A[b]=oe(M/L)*L);A[b]===0;A.pop(),b--);if(b<0)A=[q=0];else{for(q=-1;A[0]===0;A.splice(0,1),q-=ft);for(b=1,L=A[0];L>=10;L/=10,b++);b<ft&&(q-=ft-b)}return D.e=q,D.c=A,D}}(),O.sum=function(){for(var E=1,k=arguments,C=new O(k[0]);E<k.length;)C=C.plus(k[E++]);return C},a=function(){var E="0123456789";function k(C,F,P,q){for(var M,L=[0],b,A=0,D=C.length;A<D;){for(b=L.length;b--;L[b]*=F);for(L[0]+=q.indexOf(C.charAt(A++)),M=0;M<L.length;M++)L[M]>P-1&&(L[M+1]==null&&(L[M+1]=0),L[M+1]+=L[M]/P|0,L[M]%=P)}return L.reverse()}return function(C,F,P,q,M){var L,b,A,D,V,H,et,st,yt=C.indexOf("."),nt=y,lt=f;for(yt>=0&&(D=S,S=0,C=C.replace(".",""),st=new O(F),H=st.pow(C.length-yt),S=D,st.c=k(Oe(ue(H.c),H.e,"0"),10,P,E),st.e=st.c.length),et=k(C,F,P,M?(L=B,E):(L=E,B)),A=D=et.length;et[--D]==0;et.pop());if(!et[0])return L.charAt(0);if(yt<0?--A:(H.c=et,H.e=A,H.s=q,H=s(H,st,nt,lt,P),et=H.c,V=H.r,A=H.e),b=A+nt+1,yt=et[b],D=P/2,V=V||b<0||et[b+1]!=null,V=lt<4?(yt!=null||V)&&(lt==0||lt==(H.s<0?3:2)):yt>D||yt==D&&(lt==4||V||lt==6&&et[b-1]&1||lt==(H.s<0?8:7)),b<1||!et[0])C=V?Oe(L.charAt(1),-nt,L.charAt(0)):L.charAt(0);else{if(et.length=b,V)for(--P;++et[--b]>P;)et[b]=0,b||(++A,et=[1].concat(et));for(D=et.length;!et[--D];);for(yt=0,C="";yt<=D;C+=L.charAt(et[yt++]));C=Oe(C,A,L.charAt(0))}return C}}(),s=function(){function E(F,P,q){var M,L,b,A,D=0,V=F.length,H=P%Ye,et=P/Ye|0;for(F=F.slice();V--;)b=F[V]%Ye,A=F[V]/Ye|0,M=et*b+A*H,L=H*b+M%Ye*Ye+D,D=(L/q|0)+(M/Ye|0)+et*A,F[V]=L%q;return D&&(F=[D].concat(F)),F}function k(F,P,q,M){var L,b;if(q!=M)b=q>M?1:-1;else for(L=b=0;L<q;L++)if(F[L]!=P[L]){b=F[L]>P[L]?1:-1;break}return b}function C(F,P,q,M){for(var L=0;q--;)F[q]-=L,L=F[q]<P[q]?1:0,F[q]=L*M+F[q]-P[q];for(;!F[0]&&F.length>1;F.splice(0,1));}return function(F,P,q,M,L){var b,A,D,V,H,et,st,yt,nt,lt,wt,At,z,bn,It,it,T,Tt=F.s==P.s?1:-1,Mt=F.c,_t=P.c;if(!Mt||!Mt[0]||!_t||!_t[0])return new O(!F.s||!P.s||(Mt?_t&&Mt[0]==_t[0]:!_t)?NaN:Mt&&Mt[0]==0||!_t?Tt*0:Tt/0);for(yt=new O(Tt),nt=yt.c=[],A=F.e-P.e,Tt=q+A+1,L||(L=ye,A=le(F.e/ft)-le(P.e/ft),Tt=Tt/ft|0),D=0;_t[D]==(Mt[D]||0);D++);if(_t[D]>(Mt[D]||0)&&A--,Tt<0)nt.push(1),V=!0;else{for(bn=Mt.length,it=_t.length,D=0,Tt+=2,H=oe(L/(_t[0]+1)),H>1&&(_t=E(_t,H,L),Mt=E(Mt,H,L),it=_t.length,bn=Mt.length),z=it,lt=Mt.slice(0,it),wt=lt.length;wt<it;lt[wt++]=0);T=_t.slice(),T=[0].concat(T),It=_t[0],_t[1]>=L/2&&It++;do{if(H=0,b=k(_t,lt,it,wt),b<0){if(At=lt[0],it!=wt&&(At=At*L+(lt[1]||0)),H=oe(At/It),H>1)for(H>=L&&(H=L-1),et=E(_t,H,L),st=et.length,wt=lt.length;k(et,lt,st,wt)==1;)H--,C(et,it<st?T:_t,st,L),st=et.length,b=1;else H==0&&(b=H=1),et=_t.slice(),st=et.length;if(st<wt&&(et=[0].concat(et)),C(lt,et,wt,L),wt=lt.length,b==-1)for(;k(_t,lt,it,wt)<1;)H++,C(lt,it<wt?T:_t,wt,L),wt=lt.length}else b===0&&(H++,lt=[0]);nt[D++]=H,lt[0]?lt[wt++]=Mt[z]||0:(lt=[Mt[z]],wt=1)}while((z++<bn||lt[0]!=null)&&Tt--);V=lt[0]!=null,nt[0]||nt.splice(0,1)}if(L==ye){for(D=1,Tt=nt[0];Tt>=10;Tt/=10,D++);Z(yt,q+(yt.e=D+A*ft-1)+1,M,V)}else yt.e=A,yt.r=+V;return yt}}();function U(E,k,C,F){var P,q,M,L,b;if(C==null?C=f:Lt(C,0,8),!E.c)return E.toString();if(P=E.c[0],M=E.e,k==null)b=ue(E.c),b=F==1||F==2&&(M<=p||M>=m)?Si(b,M):Oe(b,M,"0");else if(E=Z(new O(E),k,C),q=E.e,b=ue(E.c),L=b.length,F==1||F==2&&(k<=q||q<=p)){for(;L<k;b+="0",L++);b=Si(b,q)}else if(k-=M,b=Oe(b,q,"0"),q+1>L){if(--k>0)for(b+=".";k--;b+="0");}else if(k+=q-L,k>0)for(q+1==L&&(b+=".");k--;b+="0");return E.s<0&&P?"-"+b:b}function K(E,k){for(var C,F,P=1,q=new O(E[0]);P<E.length;P++)F=new O(E[P]),(!F.s||(C=Je(q,F))===k||C===0&&q.s===k)&&(q=F);return q}function $(E,k,C){for(var F=1,P=k.length;!k[--P];k.pop());for(P=k[0];P>=10;P/=10,F++);return(C=F+C*ft-1)>d?E.c=E.e=null:C<_?E.c=[E.e=0]:(E.e=C,E.c=k),E}u=function(){var E=/^(-?)0([xbo])(?=\w[\w.]*$)/i,k=/^([^.]+)\.$/,C=/^\.([^.]+)$/,F=/^-?(Infinity|NaN)$/,P=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(q,M,L,b){var A,D=L?M:M.replace(P,"");if(F.test(D))q.s=isNaN(D)?null:D<0?-1:1;else{if(!L&&(D=D.replace(E,function(V,H,et){return A=(et=et.toLowerCase())=="x"?16:et=="b"?2:8,!b||b==A?H:V}),b&&(A=b,D=D.replace(k,"$1").replace(C,"0.$1")),M!=D))return new O(D,A);if(O.DEBUG)throw Error(Zt+"Not a"+(b?" base "+b:"")+" number: "+M);q.s=null}q.c=q.e=null}}();function Z(E,k,C,F){var P,q,M,L,b,A,D,V=E.c,H=qr;if(V){t:{for(P=1,L=V[0];L>=10;L/=10,P++);if(q=k-P,q<0)q+=ft,M=k,b=V[A=0],D=oe(b/H[P-M-1]%10);else if(A=Fr((q+1)/ft),A>=V.length)if(F){for(;V.length<=A;V.push(0));b=D=0,P=1,q%=ft,M=q-ft+1}else break t;else{for(b=L=V[A],P=1;L>=10;L/=10,P++);q%=ft,M=q-ft+P,D=M<0?0:oe(b/H[P-M-1]%10)}if(F=F||k<0||V[A+1]!=null||(M<0?b:b%H[P-M-1]),F=C<4?(D||F)&&(C==0||C==(E.s<0?3:2)):D>5||D==5&&(C==4||F||C==6&&(q>0?M>0?b/H[P-M]:0:V[A-1])%10&1||C==(E.s<0?8:7)),k<1||!V[0])return V.length=0,F?(k-=E.e+1,V[0]=H[(ft-k%ft)%ft],E.e=-k||0):V[0]=E.e=0,E;if(q==0?(V.length=A,L=1,A--):(V.length=A+1,L=H[ft-q],V[A]=M>0?oe(b/H[P-M]%H[M])*L:0),F)for(;;)if(A==0){for(q=1,M=V[0];M>=10;M/=10,q++);for(M=V[0]+=L,L=1;M>=10;M/=10,L++);q!=L&&(E.e++,V[0]==ye&&(V[0]=1));break}else{if(V[A]+=L,V[A]!=ye)break;V[A--]=0,L=1}for(q=V.length;V[--q]===0;V.pop());}E.e>d?E.c=E.e=null:E.e<_&&(E.c=[E.e=0])}return E}function W(E){var k,C=E.e;return C===null?E.toString():(k=ue(E.c),k=C<=p||C>=m?Si(k,C):Oe(k,C,"0"),E.s<0?"-"+k:k)}return l.absoluteValue=l.abs=function(){var E=new O(this);return E.s<0&&(E.s=1),E},l.comparedTo=function(E,k){return Je(this,new O(E,k))},l.decimalPlaces=l.dp=function(E,k){var C,F,P,q=this;if(E!=null)return Lt(E,0,Qt),k==null?k=f:Lt(k,0,8),Z(new O(q),E+q.e+1,k);if(!(C=q.c))return null;if(F=((P=C.length-1)-le(this.e/ft))*ft,P=C[P])for(;P%10==0;P/=10,F--);return F<0&&(F=0),F},l.dividedBy=l.div=function(E,k){return s(this,new O(E,k),y,f)},l.dividedToIntegerBy=l.idiv=function(E,k){return s(this,new O(E,k),0,1)},l.exponentiatedBy=l.pow=function(E,k){var C,F,P,q,M,L,b,A,D,V=this;if(E=new O(E),E.c&&!E.isInteger())throw Error(Zt+"Exponent not an integer: "+W(E));if(k!=null&&(k=new O(k)),L=E.e>14,!V.c||!V.c[0]||V.c[0]==1&&!V.e&&V.c.length==1||!E.c||!E.c[0])return D=new O(Math.pow(+W(V),L?E.s*(2-Ni(E)):+W(E))),k?D.mod(k):D;if(b=E.s<0,k){if(k.c?!k.c[0]:!k.s)return new O(NaN);F=!b&&V.isInteger()&&k.isInteger(),F&&(V=V.mod(k))}else{if(E.e>9&&(V.e>0||V.e<-1||(V.e==0?V.c[0]>1||L&&V.c[1]>=24e7:V.c[0]<8e13||L&&V.c[0]<=9999975e7)))return q=V.s<0&&Ni(E)?-0:0,V.e>-1&&(q=1/q),new O(b?1/q:q);S&&(q=Fr(S/ft+2))}for(L?(C=new O(.5),b&&(E.s=1),A=Ni(E)):(P=Math.abs(+W(E)),A=P%2),D=new O(h);;){if(A){if(D=D.times(V),!D.c)break;q?D.c.length>q&&(D.c.length=q):F&&(D=D.mod(k))}if(P){if(P=oe(P/2),P===0)break;A=P%2}else if(E=E.times(C),Z(E,E.e+1,1),E.e>14)A=Ni(E);else{if(P=+W(E),P===0)break;A=P%2}V=V.times(V),q?V.c&&V.c.length>q&&(V.c.length=q):F&&(V=V.mod(k))}return F?D:(b&&(D=h.div(D)),k?D.mod(k):q?Z(D,S,f,M):D)},l.integerValue=function(E){var k=new O(this);return E==null?E=f:Lt(E,0,8),Z(k,k.e+1,E)},l.isEqualTo=l.eq=function(E,k){return Je(this,new O(E,k))===0},l.isFinite=function(){return!!this.c},l.isGreaterThan=l.gt=function(E,k){return Je(this,new O(E,k))>0},l.isGreaterThanOrEqualTo=l.gte=function(E,k){return(k=Je(this,new O(E,k)))===1||k===0},l.isInteger=function(){return!!this.c&&le(this.e/ft)>this.c.length-2},l.isLessThan=l.lt=function(E,k){return Je(this,new O(E,k))<0},l.isLessThanOrEqualTo=l.lte=function(E,k){return(k=Je(this,new O(E,k)))===-1||k===0},l.isNaN=function(){return!this.s},l.isNegative=function(){return this.s<0},l.isPositive=function(){return this.s>0},l.isZero=function(){return!!this.c&&this.c[0]==0},l.minus=function(E,k){var C,F,P,q,M=this,L=M.s;if(E=new O(E,k),k=E.s,!L||!k)return new O(NaN);if(L!=k)return E.s=-k,M.plus(E);var b=M.e/ft,A=E.e/ft,D=M.c,V=E.c;if(!b||!A){if(!D||!V)return D?(E.s=-k,E):new O(V?M:NaN);if(!D[0]||!V[0])return V[0]?(E.s=-k,E):new O(D[0]?M:f==3?-0:0)}if(b=le(b),A=le(A),D=D.slice(),L=b-A){for((q=L<0)?(L=-L,P=D):(A=b,P=V),P.reverse(),k=L;k--;P.push(0));P.reverse()}else for(F=(q=(L=D.length)<(k=V.length))?L:k,L=k=0;k<F;k++)if(D[k]!=V[k]){q=D[k]<V[k];break}if(q&&(P=D,D=V,V=P,E.s=-E.s),k=(F=V.length)-(C=D.length),k>0)for(;k--;D[C++]=0);for(k=ye-1;F>L;){if(D[--F]<V[F]){for(C=F;C&&!D[--C];D[C]=k);--D[C],D[F]+=ye}D[F]-=V[F]}for(;D[0]==0;D.splice(0,1),--A);return D[0]?$(E,D,A):(E.s=f==3?-1:1,E.c=[E.e=0],E)},l.modulo=l.mod=function(E,k){var C,F,P=this;return E=new O(E,k),!P.c||!E.s||E.c&&!E.c[0]?new O(NaN):!E.c||P.c&&!P.c[0]?new O(P):(N==9?(F=E.s,E.s=1,C=s(P,E,0,3),E.s=F,C.s*=F):C=s(P,E,0,N),E=P.minus(C.times(E)),!E.c[0]&&N==1&&(E.s=P.s),E)},l.multipliedBy=l.times=function(E,k){var C,F,P,q,M,L,b,A,D,V,H,et,st,yt,nt,lt=this,wt=lt.c,At=(E=new O(E,k)).c;if(!wt||!At||!wt[0]||!At[0])return!lt.s||!E.s||wt&&!wt[0]&&!At||At&&!At[0]&&!wt?E.c=E.e=E.s=null:(E.s*=lt.s,!wt||!At?E.c=E.e=null:(E.c=[0],E.e=0)),E;for(F=le(lt.e/ft)+le(E.e/ft),E.s*=lt.s,b=wt.length,V=At.length,b<V&&(st=wt,wt=At,At=st,P=b,b=V,V=P),P=b+V,st=[];P--;st.push(0));for(yt=ye,nt=Ye,P=V;--P>=0;){for(C=0,H=At[P]%nt,et=At[P]/nt|0,M=b,q=P+M;q>P;)A=wt[--M]%nt,D=wt[M]/nt|0,L=et*A+D*H,A=H*A+L%nt*nt+st[q]+C,C=(A/yt|0)+(L/nt|0)+et*D,st[q--]=A%yt;st[q]=C}return C?++F:st.splice(0,1),$(E,st,F)},l.negated=function(){var E=new O(this);return E.s=-E.s||null,E},l.plus=function(E,k){var C,F=this,P=F.s;if(E=new O(E,k),k=E.s,!P||!k)return new O(NaN);if(P!=k)return E.s=-k,F.minus(E);var q=F.e/ft,M=E.e/ft,L=F.c,b=E.c;if(!q||!M){if(!L||!b)return new O(P/0);if(!L[0]||!b[0])return b[0]?E:new O(L[0]?F:P*0)}if(q=le(q),M=le(M),L=L.slice(),P=q-M){for(P>0?(M=q,C=b):(P=-P,C=L),C.reverse();P--;C.push(0));C.reverse()}for(P=L.length,k=b.length,P-k<0&&(C=b,b=L,L=C,k=P),P=0;k;)P=(L[--k]=L[k]+b[k]+P)/ye|0,L[k]=ye===L[k]?0:L[k]%ye;return P&&(L=[P].concat(L),++M),$(E,L,M)},l.precision=l.sd=function(E,k){var C,F,P,q=this;if(E!=null&&E!==!!E)return Lt(E,1,Qt),k==null?k=f:Lt(k,0,8),Z(new O(q),E,k);if(!(C=q.c))return null;if(P=C.length-1,F=P*ft+1,P=C[P]){for(;P%10==0;P/=10,F--);for(P=C[0];P>=10;P/=10,F++);}return E&&q.e+1>F&&(F=q.e+1),F},l.shiftedBy=function(E){return Lt(E,-9007199254740991,Ga),this.times("1e"+E)},l.squareRoot=l.sqrt=function(){var E,k,C,F,P,q=this,M=q.c,L=q.s,b=q.e,A=y+4,D=new O("0.5");if(L!==1||!M||!M[0])return new O(!L||L<0&&(!M||M[0])?NaN:M?q:1/0);if(L=Math.sqrt(+W(q)),L==0||L==1/0?(k=ue(M),(k.length+b)%2==0&&(k+="0"),L=Math.sqrt(+k),b=le((b+1)/2)-(b<0||b%2),L==1/0?k="5e"+b:(k=L.toExponential(),k=k.slice(0,k.indexOf("e")+1)+b),C=new O(k)):C=new O(L+""),C.c[0]){for(b=C.e,L=b+A,L<3&&(L=0);;)if(P=C,C=D.times(P.plus(s(q,P,A,1))),ue(P.c).slice(0,L)===(k=ue(C.c)).slice(0,L))if(C.e<b&&--L,k=k.slice(L-3,L+1),k=="9999"||!F&&k=="4999"){if(!F&&(Z(P,P.e+y+2,0),P.times(P).eq(q))){C=P;break}A+=4,L+=4,F=1}else{(!+k||!+k.slice(1)&&k.charAt(0)=="5")&&(Z(C,C.e+y+2,1),E=!C.times(C).eq(q));break}}return Z(C,C.e+y+1,f,E)},l.toExponential=function(E,k){return E!=null&&(Lt(E,0,Qt),E++),U(this,E,k,1)},l.toFixed=function(E,k){return E!=null&&(Lt(E,0,Qt),E=E+this.e+1),U(this,E,k)},l.toFormat=function(E,k,C){var F,P=this;if(C==null)E!=null&&k&&typeof k=="object"?(C=k,k=null):E&&typeof E=="object"?(C=E,E=k=null):C=R;else if(typeof C!="object")throw Error(Zt+"Argument not an object: "+C);if(F=P.toFixed(E,k),P.c){var q,M=F.split("."),L=+C.groupSize,b=+C.secondaryGroupSize,A=C.groupSeparator||"",D=M[0],V=M[1],H=P.s<0,et=H?D.slice(1):D,st=et.length;if(b&&(q=L,L=b,b=q,st-=q),L>0&&st>0){for(q=st%L||L,D=et.substr(0,q);q<st;q+=L)D+=A+et.substr(q,L);b>0&&(D+=A+et.slice(q)),H&&(D="-"+D)}F=V?D+(C.decimalSeparator||"")+((b=+C.fractionGroupSize)?V.replace(new RegExp("\\d{"+b+"}\\B","g"),"$&"+(C.fractionGroupSeparator||"")):V):D}return(C.prefix||"")+F+(C.suffix||"")},l.toFraction=function(E){var k,C,F,P,q,M,L,b,A,D,V,H,et=this,st=et.c;if(E!=null&&(L=new O(E),!L.isInteger()&&(L.c||L.s!==1)||L.lt(h)))throw Error(Zt+"Argument "+(L.isInteger()?"out of range: ":"not an integer: ")+W(L));if(!st)return new O(et);for(k=new O(h),A=C=new O(h),F=b=new O(h),H=ue(st),q=k.e=H.length-et.e-1,k.c[0]=qr[(M=q%ft)<0?ft+M:M],E=!E||L.comparedTo(k)>0?q>0?k:A:L,M=d,d=1/0,L=new O(H),b.c[0]=0;D=s(L,k,0,1),P=C.plus(D.times(F)),P.comparedTo(E)!=1;)C=F,F=P,A=b.plus(D.times(P=A)),b=P,k=L.minus(D.times(P=k)),L=P;return P=s(E.minus(C),F,0,1),b=b.plus(P.times(A)),C=C.plus(P.times(F)),b.s=A.s=et.s,q=q*2,V=s(A,F,q,f).minus(et).abs().comparedTo(s(b,C,q,f).minus(et).abs())<1?[A,F]:[b,C],d=M,V},l.toNumber=function(){return+W(this)},l.toPrecision=function(E,k){return E!=null&&Lt(E,1,Qt),U(this,E,k,2)},l.toString=function(E){var k,C=this,F=C.s,P=C.e;return P===null?F?(k="Infinity",F<0&&(k="-"+k)):k="NaN":(E==null?k=P<=p||P>=m?Si(ue(C.c),P):Oe(ue(C.c),P,"0"):E===10&&Y?(C=Z(new O(C),y+P+1,f),k=Oe(ue(C.c),C.e,"0")):(Lt(E,2,B.length,"Base"),k=a(Oe(ue(C.c),P,"0"),10,E,F,!0)),F<0&&C.c[0]&&(k="-"+k)),k},l.valueOf=l.toJSON=function(){return W(this)},l._isBigNumber=!0,l[Symbol.toStringTag]="BigNumber",l[Symbol.for("nodejs.util.inspect.custom")]=l.valueOf,r!=null&&O.set(r),O}function le(r){var s=r|0;return r>0||r===s?s:s-1}function ue(r){for(var s,a,u=1,l=r.length,h=r[0]+"";u<l;){for(s=r[u++]+"",a=ft-s.length;a--;s="0"+s);h+=s}for(l=h.length;h.charCodeAt(--l)===48;);return h.slice(0,l+1||1)}function Je(r,s){var a,u,l=r.c,h=s.c,y=r.s,f=s.s,p=r.e,m=s.e;if(!y||!f)return null;if(a=l&&!l[0],u=h&&!h[0],a||u)return a?u?0:-f:y;if(y!=f)return y;if(a=y<0,u=p==m,!l||!h)return u?0:!l^a?1:-1;if(!u)return p>m^a?1:-1;for(f=(p=l.length)<(m=h.length)?p:m,y=0;y<f;y++)if(l[y]!=h[y])return l[y]>h[y]^a?1:-1;return p==m?0:p>m^a?1:-1}function Lt(r,s,a,u){if(r<s||r>a||r!==oe(r))throw Error(Zt+(u||"Argument")+(typeof r=="number"?r<s||r>a?" out of range: ":" not an integer: ":" not a primitive number: ")+String(r))}function Ni(r){var s=r.c.length-1;return le(r.e/ft)==s&&r.c[s]%2!=0}function Si(r,s){return(r.length>1?r.charAt(0)+"."+r.slice(1):r)+(s<0?"e":"e+")+s}function Oe(r,s,a){var u,l;if(s<0){for(l=a+".";++s;l+=a);r=l+r}else if(u=r.length,++s>u){for(l=a,s-=u;--s;l+=a);r+=l}else s<u&&(r=r.slice(0,s)+"."+r.slice(s));return r}var Se=Yu(),_c=class{constructor(r){at(this,"key");at(this,"left",null);at(this,"right",null);this.key=r}},Gn=class extends _c{constructor(r){super(r)}},xc=class{constructor(){at(this,"size",0);at(this,"modificationCount",0);at(this,"splayCount",0)}splay(r){const s=this.root;if(s==null)return this.compare(r,r),-1;let a=null,u=null,l=null,h=null,y=s;const f=this.compare;let p;for(;;)if(p=f(y.key,r),p>0){let m=y.left;if(m==null||(p=f(m.key,r),p>0&&(y.left=m.right,m.right=y,y=m,m=y.left,m==null)))break;a==null?u=y:a.left=y,a=y,y=m}else if(p<0){let m=y.right;if(m==null||(p=f(m.key,r),p<0&&(y.right=m.left,m.left=y,y=m,m=y.right,m==null)))break;l==null?h=y:l.right=y,l=y,y=m}else break;return l!=null&&(l.right=y.left,y.left=h),a!=null&&(a.left=y.right,y.right=u),this.root!==y&&(this.root=y,this.splayCount++),p}splayMin(r){let s=r,a=s.left;for(;a!=null;){const u=a;s.left=u.right,u.right=s,s=u,a=s.left}return s}splayMax(r){let s=r,a=s.right;for(;a!=null;){const u=a;s.right=u.left,u.left=s,s=u,a=s.right}return s}_delete(r){if(this.root==null||this.splay(r)!=0)return null;let a=this.root;const u=a,l=a.left;if(this.size--,l==null)this.root=a.right;else{const h=a.right;a=this.splayMax(l),a.right=h,this.root=a}return this.modificationCount++,u}addNewRoot(r,s){this.size++,this.modificationCount++;const a=this.root;if(a==null){this.root=r;return}s<0?(r.left=a,r.right=a.right,a.right=null):(r.right=a,r.left=a.left,a.left=null),this.root=r}_first(){const r=this.root;return r==null?null:(this.root=this.splayMin(r),this.root)}_last(){const r=this.root;return r==null?null:(this.root=this.splayMax(r),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(r){return this.validKey(r)&&this.splay(r)==0}defaultCompare(){return(r,s)=>r<s?-1:r>s?1:0}wrap(){return{getRoot:()=>this.root,setRoot:r=>{this.root=r},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:r=>{this.splayCount=r},splay:r=>this.splay(r),has:r=>this.has(r)}}},Eu,ku,Wi=class Wn extends xc{constructor(a,u){super();at(this,"root",null);at(this,"compare");at(this,"validKey");at(this,Eu,"[object Set]");this.compare=a??this.defaultCompare(),this.validKey=u??(l=>l!=null&&l!=null)}delete(a){return this.validKey(a)?this._delete(a)!=null:!1}deleteAll(a){for(const u of a)this.delete(u)}forEach(a){const u=this[Symbol.iterator]();let l;for(;l=u.next(),!l.done;)a(l.value,l.value,this)}add(a){const u=this.splay(a);return u!=0&&this.addNewRoot(new Gn(a),u),this}addAndReturn(a){const u=this.splay(a);return u!=0&&this.addNewRoot(new Gn(a),u),this.root.key}addAll(a){for(const u of a)this.add(u)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(a){if(a==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(a)<0)return this.root.key;let l=this.root.left;if(l==null)return null;let h=l.right;for(;h!=null;)l=h,h=l.right;return l.key}firstAfter(a){if(a==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(a)>0)return this.root.key;let l=this.root.right;if(l==null)return null;let h=l.left;for(;h!=null;)l=h,h=l.left;return l.key}retainAll(a){const u=new Wn(this.compare,this.validKey),l=this.modificationCount;for(const h of a){if(l!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(h)&&this.splay(h)==0&&u.add(this.root.key)}u.size!=this.size&&(this.root=u.root,this.size=u.size,this.modificationCount++)}lookup(a){return!this.validKey(a)||this.splay(a)!=0?null:this.root.key}intersection(a){const u=new Wn(this.compare,this.validKey);for(const l of this)a.has(l)&&u.add(l);return u}difference(a){const u=new Wn(this.compare,this.validKey);for(const l of this)a.has(l)||u.add(l);return u}union(a){const u=this.clone();return u.addAll(a),u}clone(){const a=new Wn(this.compare,this.validKey);return a.size=this.size,a.root=this.copyNode(this.root),a}copyNode(a){if(a==null)return null;function u(h,y){let f,p;do{if(f=h.left,p=h.right,f!=null){const m=new Gn(f.key);y.left=m,u(f,m)}if(p!=null){const m=new Gn(p.key);y.right=m,h=p,y=m}}while(p!=null)}const l=new Gn(a.key);return u(a,l),l}toSet(){return this.clone()}entries(){return new kc(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(ku=Symbol.iterator,Eu=Symbol.toStringTag,ku)](){return new Ec(this.wrap())}},zu=class{constructor(r){at(this,"tree");at(this,"path",new Array);at(this,"modificationCount",null);at(this,"splayCount");this.tree=r,this.splayCount=r.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const r=this.path[this.path.length-1];return this.getValue(r)}rebuildPath(r){this.path.splice(0,this.path.length),this.tree.splay(r),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(r){for(;r!=null;)this.path.push(r),r=r.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let a=this.tree.getRoot();for(;a!=null;)this.path.push(a),a=a.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let r=this.path[this.path.length-1],s=r.right;if(s!=null){for(;s!=null;)this.path.push(s),s=s.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===r;)r=this.path.pop();return this.path.length>0}},Ec=class extends zu{getValue(r){return r.key}},kc=class extends zu{getValue(r){return[r.key,r.key]}},Xu=r=>()=>r,Jr=r=>{const s=r?(a,u)=>u.minus(a).abs().isLessThanOrEqualTo(r):Xu(!1);return(a,u)=>s(a,u)?0:a.comparedTo(u)};function wc(r){const s=r?(a,u,l,h,y)=>a.exponentiatedBy(2).isLessThanOrEqualTo(h.minus(u).exponentiatedBy(2).plus(y.minus(l).exponentiatedBy(2)).times(r)):Xu(!1);return(a,u,l)=>{const h=a.x,y=a.y,f=l.x,p=l.y,m=y.minus(p).times(u.x.minus(f)).minus(h.minus(f).times(u.y.minus(p)));return s(m,h,y,f,p)?0:m.comparedTo(0)}}var Ic=r=>r,Nc=r=>{if(r){const s=new Wi(Jr(r)),a=new Wi(Jr(r)),u=(h,y)=>y.addAndReturn(h),l=h=>({x:u(h.x,s),y:u(h.y,a)});return l({x:new Se(0),y:new Se(0)}),l}return Ic},Qr=r=>({set:s=>{Fe=Qr(s)},reset:()=>Qr(r),compare:Jr(r),snap:Nc(r),orient:wc(r)}),Fe=Qr(),Bn=(r,s)=>r.ll.x.isLessThanOrEqualTo(s.x)&&s.x.isLessThanOrEqualTo(r.ur.x)&&r.ll.y.isLessThanOrEqualTo(s.y)&&s.y.isLessThanOrEqualTo(r.ur.y),ts=(r,s)=>{if(s.ur.x.isLessThan(r.ll.x)||r.ur.x.isLessThan(s.ll.x)||s.ur.y.isLessThan(r.ll.y)||r.ur.y.isLessThan(s.ll.y))return null;const a=r.ll.x.isLessThan(s.ll.x)?s.ll.x:r.ll.x,u=r.ur.x.isLessThan(s.ur.x)?r.ur.x:s.ur.x,l=r.ll.y.isLessThan(s.ll.y)?s.ll.y:r.ll.y,h=r.ur.y.isLessThan(s.ur.y)?r.ur.y:s.ur.y;return{ll:{x:a,y:l},ur:{x:u,y:h}}},Fi=(r,s)=>r.x.times(s.y).minus(r.y.times(s.x)),Uu=(r,s)=>r.x.times(s.x).plus(r.y.times(s.y)),Zi=r=>Uu(r,r).sqrt(),Sc=(r,s,a)=>{const u={x:s.x.minus(r.x),y:s.y.minus(r.y)},l={x:a.x.minus(r.x),y:a.y.minus(r.y)};return Fi(l,u).div(Zi(l)).div(Zi(u))},bc=(r,s,a)=>{const u={x:s.x.minus(r.x),y:s.y.minus(r.y)},l={x:a.x.minus(r.x),y:a.y.minus(r.y)};return Uu(l,u).div(Zi(l)).div(Zi(u))},Ba=(r,s,a)=>s.y.isZero()?null:{x:r.x.plus(s.x.div(s.y).times(a.minus(r.y))),y:a},Ya=(r,s,a)=>s.x.isZero()?null:{x:a,y:r.y.plus(s.y.div(s.x).times(a.minus(r.x)))},Cc=(r,s,a,u)=>{if(s.x.isZero())return Ya(a,u,r.x);if(u.x.isZero())return Ya(r,s,a.x);if(s.y.isZero())return Ba(a,u,r.y);if(u.y.isZero())return Ba(r,s,a.y);const l=Fi(s,u);if(l.isZero())return null;const h={x:a.x.minus(r.x),y:a.y.minus(r.y)},y=Fi(h,s).div(l),f=Fi(h,u).div(l),p=r.x.plus(f.times(s.x)),m=a.x.plus(y.times(u.x)),_=r.y.plus(f.times(s.y)),d=a.y.plus(y.times(u.y)),w=p.plus(m).div(2),N=_.plus(d).div(2);return{x:w,y:N}},ke=class Vu{constructor(s,a){at(this,"point");at(this,"isLeft");at(this,"segment");at(this,"otherSE");at(this,"consumedBy");s.events===void 0?s.events=[this]:s.events.push(this),this.point=s,this.isLeft=a}static compare(s,a){const u=Vu.comparePoints(s.point,a.point);return u!==0?u:(s.point!==a.point&&s.link(a),s.isLeft!==a.isLeft?s.isLeft?1:-1:$i.compare(s.segment,a.segment))}static comparePoints(s,a){return s.x.isLessThan(a.x)?-1:s.x.isGreaterThan(a.x)?1:s.y.isLessThan(a.y)?-1:s.y.isGreaterThan(a.y)?1:0}link(s){if(s.point===this.point)throw new Error("Tried to link already linked events");const a=s.point.events;for(let u=0,l=a.length;u<l;u++){const h=a[u];this.point.events.push(h),h.point=this.point}this.checkForConsuming()}checkForConsuming(){const s=this.point.events.length;for(let a=0;a<s;a++){const u=this.point.events[a];if(u.segment.consumedBy===void 0)for(let l=a+1;l<s;l++){const h=this.point.events[l];h.consumedBy===void 0&&u.otherSE.point.events===h.otherSE.point.events&&u.segment.consume(h.segment)}}}getAvailableLinkedEvents(){const s=[];for(let a=0,u=this.point.events.length;a<u;a++){const l=this.point.events[a];l!==this&&!l.segment.ringOut&&l.segment.isInResult()&&s.push(l)}return s}getLeftmostComparator(s){const a=new Map,u=l=>{const h=l.otherSE;a.set(l,{sine:Sc(this.point,s.point,h.point),cosine:bc(this.point,s.point,h.point)})};return(l,h)=>{a.has(l)||u(l),a.has(h)||u(h);const{sine:y,cosine:f}=a.get(l),{sine:p,cosine:m}=a.get(h);return y.isGreaterThanOrEqualTo(0)&&p.isGreaterThanOrEqualTo(0)?f.isLessThan(m)?1:f.isGreaterThan(m)?-1:0:y.isLessThan(0)&&p.isLessThan(0)?f.isLessThan(m)?-1:f.isGreaterThan(m)?1:0:p.isLessThan(y)?-1:p.isGreaterThan(y)?1:0}}},Tc=class es{constructor(s){at(this,"events");at(this,"poly");at(this,"_isExteriorRing");at(this,"_enclosingRing");this.events=s;for(let a=0,u=s.length;a<u;a++)s[a].segment.ringOut=this;this.poly=null}static factory(s){const a=[];for(let u=0,l=s.length;u<l;u++){const h=s[u];if(!h.isInResult()||h.ringOut)continue;let y=null,f=h.leftSE,p=h.rightSE;const m=[f],_=f.point,d=[];for(;y=f,f=p,m.push(f),f.point!==_;)for(;;){const w=f.getAvailableLinkedEvents();if(w.length===0){const R=m[0].point,B=m[m.length-1].point;throw new Error(`Unable to complete output ring starting at [${R.x}, ${R.y}]. Last matching segment found ends at [${B.x}, ${B.y}].`)}if(w.length===1){p=w[0].otherSE;break}let N=null;for(let R=0,B=d.length;R<B;R++)if(d[R].point===f.point){N=R;break}if(N!==null){const R=d.splice(N)[0],B=m.splice(R.index);B.unshift(B[0].otherSE),a.push(new es(B.reverse()));continue}d.push({index:m.length,point:f.point});const S=f.getLeftmostComparator(y);p=w.sort(S)[0].otherSE;break}a.push(new es(m))}return a}getGeom(){let s=this.events[0].point;const a=[s];for(let m=1,_=this.events.length-1;m<_;m++){const d=this.events[m].point,w=this.events[m+1].point;Fe.orient(d,s,w)!==0&&(a.push(d),s=d)}if(a.length===1)return null;const u=a[0],l=a[1];Fe.orient(u,s,l)===0&&a.shift(),a.push(a[0]);const h=this.isExteriorRing()?1:-1,y=this.isExteriorRing()?0:a.length-1,f=this.isExteriorRing()?a.length:-1,p=[];for(let m=y;m!=f;m+=h)p.push([a[m].x.toNumber(),a[m].y.toNumber()]);return p}isExteriorRing(){if(this._isExteriorRing===void 0){const s=this.enclosingRing();this._isExteriorRing=s?!s.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var l,h;let s=this.events[0];for(let y=1,f=this.events.length;y<f;y++){const p=this.events[y];ke.compare(s,p)>0&&(s=p)}let a=s.segment.prevInResult(),u=a?a.prevInResult():null;for(;;){if(!a)return null;if(!u)return a.ringOut;if(u.ringOut!==a.ringOut)return((l=u.ringOut)==null?void 0:l.enclosingRing())!==a.ringOut?a.ringOut:(h=a.ringOut)==null?void 0:h.enclosingRing();a=u.prevInResult(),u=a?a.prevInResult():null}}},za=class{constructor(r){at(this,"exteriorRing");at(this,"interiorRings");this.exteriorRing=r,r.poly=this,this.interiorRings=[]}addInterior(r){this.interiorRings.push(r),r.poly=this}getGeom(){const r=this.exteriorRing.getGeom();if(r===null)return null;const s=[r];for(let a=0,u=this.interiorRings.length;a<u;a++){const l=this.interiorRings[a].getGeom();l!==null&&s.push(l)}return s}},Lc=class{constructor(r){at(this,"rings");at(this,"polys");this.rings=r,this.polys=this._composePolys(r)}getGeom(){const r=[];for(let s=0,a=this.polys.length;s<a;s++){const u=this.polys[s].getGeom();u!==null&&r.push(u)}return r}_composePolys(r){var a;const s=[];for(let u=0,l=r.length;u<l;u++){const h=r[u];if(!h.poly)if(h.isExteriorRing())s.push(new za(h));else{const y=h.enclosingRing();y!=null&&y.poly||s.push(new za(y)),(a=y==null?void 0:y.poly)==null||a.addInterior(h)}}return s}},Rc=class{constructor(r,s=$i.compare){at(this,"queue");at(this,"tree");at(this,"segments");this.queue=r,this.tree=new Wi(s),this.segments=[]}process(r){const s=r.segment,a=[];if(r.consumedBy)return r.isLeft?this.queue.delete(r.otherSE):this.tree.delete(s),a;r.isLeft&&this.tree.add(s);let u=s,l=s;do u=this.tree.lastBefore(u);while(u!=null&&u.consumedBy!=null);do l=this.tree.firstAfter(l);while(l!=null&&l.consumedBy!=null);if(r.isLeft){let h=null;if(u){const f=u.getIntersection(s);if(f!==null&&(s.isAnEndpoint(f)||(h=f),!u.isAnEndpoint(f))){const p=this._splitSafely(u,f);for(let m=0,_=p.length;m<_;m++)a.push(p[m])}}let y=null;if(l){const f=l.getIntersection(s);if(f!==null&&(s.isAnEndpoint(f)||(y=f),!l.isAnEndpoint(f))){const p=this._splitSafely(l,f);for(let m=0,_=p.length;m<_;m++)a.push(p[m])}}if(h!==null||y!==null){let f=null;h===null?f=y:y===null?f=h:f=ke.comparePoints(h,y)<=0?h:y,this.queue.delete(s.rightSE),a.push(s.rightSE);const p=s.split(f);for(let m=0,_=p.length;m<_;m++)a.push(p[m])}a.length>0?(this.tree.delete(s),a.push(r)):(this.segments.push(s),s.prev=u)}else{if(u&&l){const h=u.getIntersection(l);if(h!==null){if(!u.isAnEndpoint(h)){const y=this._splitSafely(u,h);for(let f=0,p=y.length;f<p;f++)a.push(y[f])}if(!l.isAnEndpoint(h)){const y=this._splitSafely(l,h);for(let f=0,p=y.length;f<p;f++)a.push(y[f])}}}this.tree.delete(s)}return a}_splitSafely(r,s){this.tree.delete(r);const a=r.rightSE;this.queue.delete(a);const u=r.split(s);return u.push(a),r.consumedBy===void 0&&this.tree.add(r),u}},Oc=class{constructor(){at(this,"type");at(this,"numMultiPolys")}run(r,s,a){Zn.type=r;const u=[new Ua(s,!0)];for(let m=0,_=a.length;m<_;m++)u.push(new Ua(a[m],!1));if(Zn.numMultiPolys=u.length,Zn.type==="difference"){const m=u[0];let _=1;for(;_<u.length;)ts(u[_].bbox,m.bbox)!==null?_++:u.splice(_,1)}if(Zn.type==="intersection")for(let m=0,_=u.length;m<_;m++){const d=u[m];for(let w=m+1,N=u.length;w<N;w++)if(ts(d.bbox,u[w].bbox)===null)return[]}const l=new Wi(ke.compare);for(let m=0,_=u.length;m<_;m++){const d=u[m].getSweepEvents();for(let w=0,N=d.length;w<N;w++)l.add(d[w])}const h=new Rc(l);let y=null;for(l.size!=0&&(y=l.first(),l.delete(y));y;){const m=h.process(y);for(let _=0,d=m.length;_<d;_++){const w=m[_];w.consumedBy===void 0&&l.add(w)}l.size!=0?(y=l.first(),l.delete(y)):y=null}Fe.reset();const f=Tc.factory(h.segments);return new Lc(f).getGeom()}},Zn=new Oc,ti=Zn,Mc=0,$i=class qi{constructor(s,a,u,l){at(this,"id");at(this,"leftSE");at(this,"rightSE");at(this,"rings");at(this,"windings");at(this,"ringOut");at(this,"consumedBy");at(this,"prev");at(this,"_prevInResult");at(this,"_beforeState");at(this,"_afterState");at(this,"_isInResult");this.id=++Mc,this.leftSE=s,s.segment=this,s.otherSE=a,this.rightSE=a,a.segment=this,a.otherSE=s,this.rings=u,this.windings=l}static compare(s,a){const u=s.leftSE.point.x,l=a.leftSE.point.x,h=s.rightSE.point.x,y=a.rightSE.point.x;if(y.isLessThan(u))return 1;if(h.isLessThan(l))return-1;const f=s.leftSE.point.y,p=a.leftSE.point.y,m=s.rightSE.point.y,_=a.rightSE.point.y;if(u.isLessThan(l)){if(p.isLessThan(f)&&p.isLessThan(m))return 1;if(p.isGreaterThan(f)&&p.isGreaterThan(m))return-1;const d=s.comparePoint(a.leftSE.point);if(d<0)return 1;if(d>0)return-1;const w=a.comparePoint(s.rightSE.point);return w!==0?w:-1}if(u.isGreaterThan(l)){if(f.isLessThan(p)&&f.isLessThan(_))return-1;if(f.isGreaterThan(p)&&f.isGreaterThan(_))return 1;const d=a.comparePoint(s.leftSE.point);if(d!==0)return d;const w=s.comparePoint(a.rightSE.point);return w<0?1:w>0?-1:1}if(f.isLessThan(p))return-1;if(f.isGreaterThan(p))return 1;if(h.isLessThan(y)){const d=a.comparePoint(s.rightSE.point);if(d!==0)return d}if(h.isGreaterThan(y)){const d=s.comparePoint(a.rightSE.point);if(d<0)return 1;if(d>0)return-1}if(!h.eq(y)){const d=m.minus(f),w=h.minus(u),N=_.minus(p),S=y.minus(l);if(d.isGreaterThan(w)&&N.isLessThan(S))return 1;if(d.isLessThan(w)&&N.isGreaterThan(S))return-1}return h.isGreaterThan(y)?1:h.isLessThan(y)||m.isLessThan(_)?-1:m.isGreaterThan(_)?1:s.id<a.id?-1:s.id>a.id?1:0}static fromRing(s,a,u){let l,h,y;const f=ke.comparePoints(s,a);if(f<0)l=s,h=a,y=1;else if(f>0)l=a,h=s,y=-1;else throw new Error(`Tried to create degenerate segment at [${s.x}, ${s.y}]`);const p=new ke(l,!0),m=new ke(h,!1);return new qi(p,m,[u],[y])}replaceRightSE(s){this.rightSE=s,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const s=this.leftSE.point.y,a=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:s.isLessThan(a)?s:a},ur:{x:this.rightSE.point.x,y:s.isGreaterThan(a)?s:a}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(s){return s.x.eq(this.leftSE.point.x)&&s.y.eq(this.leftSE.point.y)||s.x.eq(this.rightSE.point.x)&&s.y.eq(this.rightSE.point.y)}comparePoint(s){return Fe.orient(this.leftSE.point,s,this.rightSE.point)}getIntersection(s){const a=this.bbox(),u=s.bbox(),l=ts(a,u);if(l===null)return null;const h=this.leftSE.point,y=this.rightSE.point,f=s.leftSE.point,p=s.rightSE.point,m=Bn(a,f)&&this.comparePoint(f)===0,_=Bn(u,h)&&s.comparePoint(h)===0,d=Bn(a,p)&&this.comparePoint(p)===0,w=Bn(u,y)&&s.comparePoint(y)===0;if(_&&m)return w&&!d?y:!w&&d?p:null;if(_)return d&&h.x.eq(p.x)&&h.y.eq(p.y)?null:h;if(m)return w&&y.x.eq(f.x)&&y.y.eq(f.y)?null:f;if(w&&d)return null;if(w)return y;if(d)return p;const N=Cc(h,this.vector(),f,s.vector());return N===null||!Bn(l,N)?null:Fe.snap(N)}split(s){const a=[],u=s.events!==void 0,l=new ke(s,!0),h=new ke(s,!1),y=this.rightSE;this.replaceRightSE(h),a.push(h),a.push(l);const f=new qi(l,y,this.rings.slice(),this.windings.slice());return ke.comparePoints(f.leftSE.point,f.rightSE.point)>0&&f.swapEvents(),ke.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),u&&(l.checkForConsuming(),h.checkForConsuming()),a}swapEvents(){const s=this.rightSE;this.rightSE=this.leftSE,this.leftSE=s,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let a=0,u=this.windings.length;a<u;a++)this.windings[a]*=-1}consume(s){let a=this,u=s;for(;a.consumedBy;)a=a.consumedBy;for(;u.consumedBy;)u=u.consumedBy;const l=qi.compare(a,u);if(l!==0){if(l>0){const h=a;a=u,u=h}if(a.prev===u){const h=a;a=u,u=h}for(let h=0,y=u.rings.length;h<y;h++){const f=u.rings[h],p=u.windings[h],m=a.rings.indexOf(f);m===-1?(a.rings.push(f),a.windings.push(p)):a.windings[m]+=p}u.rings=null,u.windings=null,u.consumedBy=a,u.leftSE.consumedBy=a.leftSE,u.rightSE.consumedBy=a.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const s=this.prev.consumedBy||this.prev;this._beforeState=s.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const s=this.beforeState();this._afterState={rings:s.rings.slice(0),windings:s.windings.slice(0),multiPolys:[]};const a=this._afterState.rings,u=this._afterState.windings,l=this._afterState.multiPolys;for(let f=0,p=this.rings.length;f<p;f++){const m=this.rings[f],_=this.windings[f],d=a.indexOf(m);d===-1?(a.push(m),u.push(_)):u[d]+=_}const h=[],y=[];for(let f=0,p=a.length;f<p;f++){if(u[f]===0)continue;const m=a[f],_=m.poly;if(y.indexOf(_)===-1)if(m.isExterior)h.push(_);else{y.indexOf(_)===-1&&y.push(_);const d=h.indexOf(m.poly);d!==-1&&h.splice(d,1)}}for(let f=0,p=h.length;f<p;f++){const m=h[f].multiPoly;l.indexOf(m)===-1&&l.push(m)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const s=this.beforeState().multiPolys,a=this.afterState().multiPolys;switch(ti.type){case"union":{const u=s.length===0,l=a.length===0;this._isInResult=u!==l;break}case"intersection":{let u,l;s.length<a.length?(u=s.length,l=a.length):(u=a.length,l=s.length),this._isInResult=l===ti.numMultiPolys&&u<l;break}case"xor":{const u=Math.abs(s.length-a.length);this._isInResult=u%2===1;break}case"difference":{const u=l=>l.length===1&&l[0].isSubject;this._isInResult=u(s)!==u(a);break}}return this._isInResult}},Xa=class{constructor(r,s,a){at(this,"poly");at(this,"isExterior");at(this,"segments");at(this,"bbox");if(!Array.isArray(r)||r.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=s,this.isExterior=a,this.segments=[],typeof r[0][0]!="number"||typeof r[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const u=Fe.snap({x:new Se(r[0][0]),y:new Se(r[0][1])});this.bbox={ll:{x:u.x,y:u.y},ur:{x:u.x,y:u.y}};let l=u;for(let h=1,y=r.length;h<y;h++){if(typeof r[h][0]!="number"||typeof r[h][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const f=Fe.snap({x:new Se(r[h][0]),y:new Se(r[h][1])});f.x.eq(l.x)&&f.y.eq(l.y)||(this.segments.push($i.fromRing(l,f,this)),f.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=f.x),f.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=f.y),f.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=f.x),f.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=f.y),l=f)}(!u.x.eq(l.x)||!u.y.eq(l.y))&&this.segments.push($i.fromRing(l,u,this))}getSweepEvents(){const r=[];for(let s=0,a=this.segments.length;s<a;s++){const u=this.segments[s];r.push(u.leftSE),r.push(u.rightSE)}return r}},Pc=class{constructor(r,s){at(this,"multiPoly");at(this,"exteriorRing");at(this,"interiorRings");at(this,"bbox");if(!Array.isArray(r))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Xa(r[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let a=1,u=r.length;a<u;a++){const l=new Xa(r[a],this,!1);l.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=l.bbox.ll.x),l.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=l.bbox.ll.y),l.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=l.bbox.ur.x),l.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=l.bbox.ur.y),this.interiorRings.push(l)}this.multiPoly=s}getSweepEvents(){const r=this.exteriorRing.getSweepEvents();for(let s=0,a=this.interiorRings.length;s<a;s++){const u=this.interiorRings[s].getSweepEvents();for(let l=0,h=u.length;l<h;l++)r.push(u[l])}return r}},Ua=class{constructor(r,s){at(this,"isSubject");at(this,"polys");at(this,"bbox");if(!Array.isArray(r))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof r[0][0][0]=="number"&&(r=[r])}catch{}this.polys=[],this.bbox={ll:{x:new Se(Number.POSITIVE_INFINITY),y:new Se(Number.POSITIVE_INFINITY)},ur:{x:new Se(Number.NEGATIVE_INFINITY),y:new Se(Number.NEGATIVE_INFINITY)}};for(let a=0,u=r.length;a<u;a++){const l=new Pc(r[a],this);l.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=l.bbox.ll.x),l.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=l.bbox.ll.y),l.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=l.bbox.ur.x),l.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=l.bbox.ur.y),this.polys.push(l)}this.isSubject=s}getSweepEvents(){const r=[];for(let s=0,a=this.polys.length;s<a;s++){const u=this.polys[s].getSweepEvents();for(let l=0,h=u.length;l<h;l++)r.push(u[l])}return r}},ns=(r,...s)=>ti.run("union",r,s),Ac=(r,...s)=>ti.run("intersection",r,s),Dc=(r,...s)=>ti.run("difference",r,s);Fe.set;function mg(r,s={}){const a=[];if(ze(r,l=>{a.push(l.coordinates)}),a.length<2)throw new Error("Must specify at least 2 geometries");const u=Ac(a[0],...a.slice(1));return u.length===0?null:u.length===1?si(u[0],s.properties):Jn(u,s.properties)}function wn(r){"@babel/helpers - typeof";return wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},wn(r)}function Fc(r,s){if(wn(r)!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var u=a.call(r,s);if(wn(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(r)}function Hu(r){var s=Fc(r,"string");return wn(s)=="symbol"?s:s+""}function qc(r,s,a){return(s=Hu(s))in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}function Va(r,s){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);s&&(u=u.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),a.push.apply(a,u)}return a}function dg(r){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Va(Object(a),!0).forEach(function(u){qc(r,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):Va(Object(a)).forEach(function(u){Object.defineProperty(r,u,Object.getOwnPropertyDescriptor(a,u))})}return r}function Gc(r){if(Array.isArray(r))return r}function Bc(r,s){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var u,l,h,y,f=[],p=!0,m=!1;try{if(h=(a=a.call(r)).next,s===0){if(Object(a)!==a)return;p=!1}else for(;!(p=(u=h.call(a)).done)&&(f.push(u.value),f.length!==s);p=!0);}catch(_){m=!0,l=_}finally{try{if(!p&&a.return!=null&&(y=a.return(),Object(y)!==y))return}finally{if(m)throw l}}return f}}function is(r,s){(s==null||s>r.length)&&(s=r.length);for(var a=0,u=Array(s);a<s;a++)u[a]=r[a];return u}function Wu(r,s){if(r){if(typeof r=="string")return is(r,s);var a={}.toString.call(r).slice(8,-1);return a==="Object"&&r.constructor&&(a=r.constructor.name),a==="Map"||a==="Set"?Array.from(r):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?is(r,s):void 0}}function Yc(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pg(r,s){return Gc(r)||Bc(r,s)||Wu(r,s)||Yc()}function zc(r,s){if(r==null)return{};var a={};for(var u in r)if({}.hasOwnProperty.call(r,u)){if(s.indexOf(u)!==-1)continue;a[u]=r[u]}return a}function _g(r,s){if(r==null)return{};var a,u,l=zc(r,s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(r);for(u=0;u<h.length;u++)a=h[u],s.indexOf(a)===-1&&{}.propertyIsEnumerable.call(r,a)&&(l[a]=r[a])}return l}function Ha(){return Ha=Object.assign?Object.assign.bind():function(r){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var u in a)({}).hasOwnProperty.call(a,u)&&(r[u]=a[u])}return r},Ha.apply(null,arguments)}function xg(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}function Wa(r,s){for(var a=0;a<s.length;a++){var u=s[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(r,Hu(u.key),u)}}function Eg(r,s,a){return s&&Wa(r.prototype,s),a&&Wa(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r}function rs(r,s){return rs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},rs(r,s)}function kg(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&rs(r,s)}function ji(r){return ji=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},ji(r)}function Zu(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zu=function(){return!!r})()}function Xc(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Uc(r,s){if(s&&(wn(s)=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xc(r)}function wg(r){var s=Zu();return function(){var a,u=ji(r);if(s){var l=ji(this).constructor;a=Reflect.construct(u,arguments,l)}else a=u.apply(this,arguments);return Uc(this,a)}}function Vc(r){if(Array.isArray(r))return is(r)}function Hc(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Wc(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ig(r){return Vc(r)||Hc(r)||Wu(r)||Wc()}function Zc(r){if(r.sheet)return r.sheet;for(var s=0;s<document.styleSheets.length;s++)if(document.styleSheets[s].ownerNode===r)return document.styleSheets[s]}function $c(r){var s=document.createElement("style");return s.setAttribute("data-emotion",r.key),r.nonce!==void 0&&s.setAttribute("nonce",r.nonce),s.appendChild(document.createTextNode("")),s.setAttribute("data-s",""),s}var jc=function(){function r(a){var u=this;this._insertTag=function(l){var h;u.tags.length===0?u.insertionPoint?h=u.insertionPoint.nextSibling:u.prepend?h=u.container.firstChild:h=u.before:h=u.tags[u.tags.length-1].nextSibling,u.container.insertBefore(l,h),u.tags.push(l)},this.isSpeedy=a.speedy===void 0?!0:a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var s=r.prototype;return s.hydrate=function(u){u.forEach(this._insertTag)},s.insert=function(u){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag($c(this));var l=this.tags[this.tags.length-1];if(this.isSpeedy){var h=Zc(l);try{h.insertRule(u,h.cssRules.length)}catch{}}else l.appendChild(document.createTextNode(u));this.ctr++},s.flush=function(){this.tags.forEach(function(u){var l;return(l=u.parentNode)==null?void 0:l.removeChild(u)}),this.tags=[],this.ctr=0},r}(),Xt="-ms-",Ki="-moz-",Et="-webkit-",$u="comm",fs="rule",gs="decl",Kc="@import",ju="@keyframes",Jc="@layer",Qc=Math.abs,ar=String.fromCharCode,th=Object.assign;function eh(r,s){return Bt(r,0)^45?(((s<<2^Bt(r,0))<<2^Bt(r,1))<<2^Bt(r,2))<<2^Bt(r,3):0}function Ku(r){return r.trim()}function nh(r,s){return(r=s.exec(r))?r[0]:r}function kt(r,s,a){return r.replace(s,a)}function ss(r,s){return r.indexOf(s)}function Bt(r,s){return r.charCodeAt(s)|0}function ei(r,s,a){return r.slice(s,a)}function we(r){return r.length}function ys(r){return r.length}function bi(r,s){return s.push(r),r}function ih(r,s){return r.map(s).join("")}var ur=1,In=1,Ju=0,$t=0,Pt=0,Sn="";function or(r,s,a,u,l,h,y){return{value:r,root:s,parent:a,type:u,props:l,children:h,line:ur,column:In,length:y,return:""}}function Yn(r,s){return th(or("",null,null,"",null,null,0),r,{length:-r.length},s)}function rh(){return Pt}function sh(){return Pt=$t>0?Bt(Sn,--$t):0,In--,Pt===10&&(In=1,ur--),Pt}function ee(){return Pt=$t<Ju?Bt(Sn,$t++):0,In++,Pt===10&&(In=1,ur++),Pt}function be(){return Bt(Sn,$t)}function Gi(){return $t}function ai(r,s){return ei(Sn,r,s)}function ni(r){switch(r){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Qu(r){return ur=In=1,Ju=we(Sn=r),$t=0,[]}function to(r){return Sn="",r}function Bi(r){return Ku(ai($t-1,as(r===91?r+2:r===40?r+1:r)))}function ah(r){for(;(Pt=be())&&Pt<33;)ee();return ni(r)>2||ni(Pt)>3?"":" "}function uh(r,s){for(;--s&&ee()&&!(Pt<48||Pt>102||Pt>57&&Pt<65||Pt>70&&Pt<97););return ai(r,Gi()+(s<6&&be()==32&&ee()==32))}function as(r){for(;ee();)switch(Pt){case r:return $t;case 34:case 39:r!==34&&r!==39&&as(Pt);break;case 40:r===41&&as(r);break;case 92:ee();break}return $t}function oh(r,s){for(;ee()&&r+Pt!==57;)if(r+Pt===84&&be()===47)break;return"/*"+ai(s,$t-1)+"*"+ar(r===47?r:ee())}function lh(r){for(;!ni(be());)ee();return ai(r,$t)}function ch(r){return to(Yi("",null,null,null,[""],r=Qu(r),0,[0],r))}function Yi(r,s,a,u,l,h,y,f,p){for(var m=0,_=0,d=y,w=0,N=0,S=0,R=1,B=1,Y=1,O=0,U="",K=l,$=h,Z=u,W=U;B;)switch(S=O,O=ee()){case 40:if(S!=108&&Bt(W,d-1)==58){ss(W+=kt(Bi(O),"&","&\f"),"&\f")!=-1&&(Y=-1);break}case 34:case 39:case 91:W+=Bi(O);break;case 9:case 10:case 13:case 32:W+=ah(S);break;case 92:W+=uh(Gi()-1,7);continue;case 47:switch(be()){case 42:case 47:bi(hh(oh(ee(),Gi()),s,a),p);break;default:W+="/"}break;case 123*R:f[m++]=we(W)*Y;case 125*R:case 59:case 0:switch(O){case 0:case 125:B=0;case 59+_:Y==-1&&(W=kt(W,/\f/g,"")),N>0&&we(W)-d&&bi(N>32?$a(W+";",u,a,d-1):$a(kt(W," ","")+";",u,a,d-2),p);break;case 59:W+=";";default:if(bi(Z=Za(W,s,a,m,_,l,f,U,K=[],$=[],d),h),O===123)if(_===0)Yi(W,s,Z,Z,K,h,d,f,$);else switch(w===99&&Bt(W,3)===110?100:w){case 100:case 108:case 109:case 115:Yi(r,Z,Z,u&&bi(Za(r,Z,Z,0,0,l,f,U,l,K=[],d),$),l,$,d,f,u?K:$);break;default:Yi(W,Z,Z,Z,[""],$,0,f,$)}}m=_=N=0,R=Y=1,U=W="",d=y;break;case 58:d=1+we(W),N=S;default:if(R<1){if(O==123)--R;else if(O==125&&R++==0&&sh()==125)continue}switch(W+=ar(O),O*R){case 38:Y=_>0?1:(W+="\f",-1);break;case 44:f[m++]=(we(W)-1)*Y,Y=1;break;case 64:be()===45&&(W+=Bi(ee())),w=be(),_=d=we(U=W+=lh(Gi())),O++;break;case 45:S===45&&we(W)==2&&(R=0)}}return h}function Za(r,s,a,u,l,h,y,f,p,m,_){for(var d=l-1,w=l===0?h:[""],N=ys(w),S=0,R=0,B=0;S<u;++S)for(var Y=0,O=ei(r,d+1,d=Qc(R=y[S])),U=r;Y<N;++Y)(U=Ku(R>0?w[Y]+" "+O:kt(O,/&\f/g,w[Y])))&&(p[B++]=U);return or(r,s,a,l===0?fs:f,p,m,_)}function hh(r,s,a){return or(r,s,a,$u,ar(rh()),ei(r,2,-2),0)}function $a(r,s,a,u){return or(r,s,a,gs,ei(r,0,u),ei(r,u+1,-1),u)}function dn(r,s){for(var a="",u=ys(r),l=0;l<u;l++)a+=s(r[l],l,r,s)||"";return a}function fh(r,s,a,u){switch(r.type){case Jc:if(r.children.length)break;case Kc:case gs:return r.return=r.return||r.value;case $u:return"";case ju:return r.return=r.value+"{"+dn(r.children,u)+"}";case fs:r.value=r.props.join(",")}return we(a=dn(r.children,u))?r.return=r.value+"{"+a+"}":""}function gh(r){var s=ys(r);return function(a,u,l,h){for(var y="",f=0;f<s;f++)y+=r[f](a,u,l,h)||"";return y}}function yh(r){return function(s){s.root||(s=s.return)&&r(s)}}function vh(r){var s=Object.create(null);return function(a){return s[a]===void 0&&(s[a]=r(a)),s[a]}}var mh=function(s,a,u){for(var l=0,h=0;l=h,h=be(),l===38&&h===12&&(a[u]=1),!ni(h);)ee();return ai(s,$t)},dh=function(s,a){var u=-1,l=44;do switch(ni(l)){case 0:l===38&&be()===12&&(a[u]=1),s[u]+=mh($t-1,a,u);break;case 2:s[u]+=Bi(l);break;case 4:if(l===44){s[++u]=be()===58?"&\f":"",a[u]=s[u].length;break}default:s[u]+=ar(l)}while(l=ee());return s},ph=function(s,a){return to(dh(Qu(s),a))},ja=new WeakMap,_h=function(s){if(!(s.type!=="rule"||!s.parent||s.length<1)){for(var a=s.value,u=s.parent,l=s.column===u.column&&s.line===u.line;u.type!=="rule";)if(u=u.parent,!u)return;if(!(s.props.length===1&&a.charCodeAt(0)!==58&&!ja.get(u))&&!l){ja.set(s,!0);for(var h=[],y=ph(a,h),f=u.props,p=0,m=0;p<y.length;p++)for(var _=0;_<f.length;_++,m++)s.props[m]=h[p]?y[p].replace(/&\f/g,f[_]):f[_]+" "+y[p]}}},xh=function(s){if(s.type==="decl"){var a=s.value;a.charCodeAt(0)===108&&a.charCodeAt(2)===98&&(s.return="",s.value="")}};function eo(r,s){switch(eh(r,s)){case 5103:return Et+"print-"+r+r;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Et+r+r;case 5349:case 4246:case 4810:case 6968:case 2756:return Et+r+Ki+r+Xt+r+r;case 6828:case 4268:return Et+r+Xt+r+r;case 6165:return Et+r+Xt+"flex-"+r+r;case 5187:return Et+r+kt(r,/(\w+).+(:[^]+)/,Et+"box-$1$2"+Xt+"flex-$1$2")+r;case 5443:return Et+r+Xt+"flex-item-"+kt(r,/flex-|-self/,"")+r;case 4675:return Et+r+Xt+"flex-line-pack"+kt(r,/align-content|flex-|-self/,"")+r;case 5548:return Et+r+Xt+kt(r,"shrink","negative")+r;case 5292:return Et+r+Xt+kt(r,"basis","preferred-size")+r;case 6060:return Et+"box-"+kt(r,"-grow","")+Et+r+Xt+kt(r,"grow","positive")+r;case 4554:return Et+kt(r,/([^-])(transform)/g,"$1"+Et+"$2")+r;case 6187:return kt(kt(kt(r,/(zoom-|grab)/,Et+"$1"),/(image-set)/,Et+"$1"),r,"")+r;case 5495:case 3959:return kt(r,/(image-set\([^]*)/,Et+"$1$`$1");case 4968:return kt(kt(r,/(.+:)(flex-)?(.*)/,Et+"box-pack:$3"+Xt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Et+r+r;case 4095:case 3583:case 4068:case 2532:return kt(r,/(.+)-inline(.+)/,Et+"$1$2")+r;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(we(r)-1-s>6)switch(Bt(r,s+1)){case 109:if(Bt(r,s+4)!==45)break;case 102:return kt(r,/(.+:)(.+)-([^]+)/,"$1"+Et+"$2-$3$1"+Ki+(Bt(r,s+3)==108?"$3":"$2-$3"))+r;case 115:return~ss(r,"stretch")?eo(kt(r,"stretch","fill-available"),s)+r:r}break;case 4949:if(Bt(r,s+1)!==115)break;case 6444:switch(Bt(r,we(r)-3-(~ss(r,"!important")&&10))){case 107:return kt(r,":",":"+Et)+r;case 101:return kt(r,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Et+(Bt(r,14)===45?"inline-":"")+"box$3$1"+Et+"$2$3$1"+Xt+"$2box$3")+r}break;case 5936:switch(Bt(r,s+11)){case 114:return Et+r+Xt+kt(r,/[svh]\w+-[tblr]{2}/,"tb")+r;case 108:return Et+r+Xt+kt(r,/[svh]\w+-[tblr]{2}/,"tb-rl")+r;case 45:return Et+r+Xt+kt(r,/[svh]\w+-[tblr]{2}/,"lr")+r}return Et+r+Xt+r+r}return r}var Eh=function(s,a,u,l){if(s.length>-1&&!s.return)switch(s.type){case gs:s.return=eo(s.value,s.length);break;case ju:return dn([Yn(s,{value:kt(s.value,"@","@"+Et)})],l);case fs:if(s.length)return ih(s.props,function(h){switch(nh(h,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return dn([Yn(s,{props:[kt(h,/:(read-\w+)/,":"+Ki+"$1")]})],l);case"::placeholder":return dn([Yn(s,{props:[kt(h,/:(plac\w+)/,":"+Et+"input-$1")]}),Yn(s,{props:[kt(h,/:(plac\w+)/,":"+Ki+"$1")]}),Yn(s,{props:[kt(h,/:(plac\w+)/,Xt+"input-$1")]})],l)}return""})}},kh=[Eh],Ng=function(s){var a=s.key;if(a==="css"){var u=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(u,function(R){var B=R.getAttribute("data-emotion");B.indexOf(" ")!==-1&&(document.head.appendChild(R),R.setAttribute("data-s",""))})}var l=s.stylisPlugins||kh,h={},y,f=[];y=s.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+a+' "]'),function(R){for(var B=R.getAttribute("data-emotion").split(" "),Y=1;Y<B.length;Y++)h[B[Y]]=!0;f.push(R)});var p,m=[_h,xh];{var _,d=[fh,yh(function(R){_.insert(R)})],w=gh(m.concat(l,d)),N=function(B){return dn(ch(B),w)};p=function(B,Y,O,U){_=O,N(B?B+"{"+Y.styles+"}":Y.styles),U&&(S.inserted[Y.name]=!0)}}var S={key:a,sheet:new jc({key:a,container:y,nonce:s.nonce,speedy:s.speedy,prepend:s.prepend,insertionPoint:s.insertionPoint}),nonce:s.nonce,inserted:h,registered:{},insert:p};return S.sheet.hydrate(f),S},wh=!0;function Sg(r,s,a){var u="";return a.split(" ").forEach(function(l){r[l]!==void 0?s.push(r[l]+";"):l&&(u+=l+" ")}),u}var Ih=function(s,a,u){var l=s.key+"-"+a.name;(u===!1||wh===!1)&&s.registered[l]===void 0&&(s.registered[l]=a.styles)},bg=function(s,a,u){Ih(s,a,u);var l=s.key+"-"+a.name;if(s.inserted[a.name]===void 0){var h=a;do s.insert(a===h?"."+l:"",h,s.sheet,!0),h=h.next;while(h!==void 0)}};function Nh(r){for(var s=0,a,u=0,l=r.length;l>=4;++u,l-=4)a=r.charCodeAt(u)&255|(r.charCodeAt(++u)&255)<<8|(r.charCodeAt(++u)&255)<<16|(r.charCodeAt(++u)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,s=(a&65535)*1540483477+((a>>>16)*59797<<16)^(s&65535)*1540483477+((s>>>16)*59797<<16);switch(l){case 3:s^=(r.charCodeAt(u+2)&255)<<16;case 2:s^=(r.charCodeAt(u+1)&255)<<8;case 1:s^=r.charCodeAt(u)&255,s=(s&65535)*1540483477+((s>>>16)*59797<<16)}return s^=s>>>13,s=(s&65535)*1540483477+((s>>>16)*59797<<16),((s^s>>>15)>>>0).toString(36)}var Sh={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},bh=/[A-Z]|^ms/g,Ch=/_EMO_([^_]+?)_([^]*?)_EMO_/g,no=function(s){return s.charCodeAt(1)===45},Ka=function(s){return s!=null&&typeof s!="boolean"},Gr=vh(function(r){return no(r)?r:r.replace(bh,"-$&").toLowerCase()}),Ja=function(s,a){switch(s){case"animation":case"animationName":if(typeof a=="string")return a.replace(Ch,function(u,l,h){return Ie={name:l,styles:h,next:Ie},l})}return Sh[s]!==1&&!no(s)&&typeof a=="number"&&a!==0?a+"px":a};function ii(r,s,a){if(a==null)return"";var u=a;if(u.__emotion_styles!==void 0)return u;switch(typeof a){case"boolean":return"";case"object":{var l=a;if(l.anim===1)return Ie={name:l.name,styles:l.styles,next:Ie},l.name;var h=a;if(h.styles!==void 0){var y=h.next;if(y!==void 0)for(;y!==void 0;)Ie={name:y.name,styles:y.styles,next:Ie},y=y.next;var f=h.styles+";";return f}return Th(r,s,a)}case"function":{if(r!==void 0){var p=Ie,m=a(r);return Ie=p,ii(r,s,m)}break}}var _=a;return _}function Th(r,s,a){var u="";if(Array.isArray(a))for(var l=0;l<a.length;l++)u+=ii(r,s,a[l])+";";else for(var h in a){var y=a[h];if(typeof y!="object"){var f=y;Ka(f)&&(u+=Gr(h)+":"+Ja(h,f)+";")}else if(Array.isArray(y)&&typeof y[0]=="string"&&s==null)for(var p=0;p<y.length;p++)Ka(y[p])&&(u+=Gr(h)+":"+Ja(h,y[p])+";");else{var m=ii(r,s,y);switch(h){case"animation":case"animationName":{u+=Gr(h)+":"+m+";";break}default:u+=h+"{"+m+"}"}}}return u}var Qa=/label:\s*([^\s;{]+)\s*(;|$)/g,Ie;function Cg(r,s,a){if(r.length===1&&typeof r[0]=="object"&&r[0]!==null&&r[0].styles!==void 0)return r[0];var u=!0,l="";Ie=void 0;var h=r[0];if(h==null||h.raw===void 0)u=!1,l+=ii(a,s,h);else{var y=h;l+=y[0]}for(var f=1;f<r.length;f++)if(l+=ii(a,s,r[f]),u){var p=h;l+=p[f]}Qa.lastIndex=0;for(var m="",_;(_=Qa.exec(l))!==null;)m+="-"+_[1];var d=Nh(l)+m;return{name:d,styles:l,next:Ie}}var Lh=function(s){return s()},Rh=ga.useInsertionEffect?ga.useInsertionEffect:!1,Tg=Rh||Lh;function Lg(r,s){return s||(s=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(s)}}))}const Oh=Math.min,Mh=Math.max,Ji=Math.round,Ci=Math.floor,Qi=r=>({x:r,y:r});function Ph(r){const{x:s,y:a,width:u,height:l}=r;return{width:u,height:l,top:a,left:s,right:s+u,bottom:a+l,x:s,y:a}}function lr(){return typeof window<"u"}function io(r){return so(r)?(r.nodeName||"").toLowerCase():"#document"}function qe(r){var s;return(r==null||(s=r.ownerDocument)==null?void 0:s.defaultView)||window}function ro(r){var s;return(s=(so(r)?r.ownerDocument:r.document)||window.document)==null?void 0:s.documentElement}function so(r){return lr()?r instanceof Node||r instanceof qe(r).Node:!1}function Ah(r){return lr()?r instanceof Element||r instanceof qe(r).Element:!1}function vs(r){return lr()?r instanceof HTMLElement||r instanceof qe(r).HTMLElement:!1}function tu(r){return!lr()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof qe(r).ShadowRoot}function ao(r){const{overflow:s,overflowX:a,overflowY:u,display:l}=ms(r);return/auto|scroll|overlay|hidden|clip/.test(s+u+a)&&!["inline","contents"].includes(l)}function Dh(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Fh(r){return["html","body","#document"].includes(io(r))}function ms(r){return qe(r).getComputedStyle(r)}function qh(r){if(io(r)==="html")return r;const s=r.assignedSlot||r.parentNode||tu(r)&&r.host||ro(r);return tu(s)?s.host:s}function uo(r){const s=qh(r);return Fh(s)?r.ownerDocument?r.ownerDocument.body:r.body:vs(s)&&ao(s)?s:uo(s)}function tr(r,s,a){var u;s===void 0&&(s=[]),a===void 0&&(a=!0);const l=uo(r),h=l===((u=r.ownerDocument)==null?void 0:u.body),y=qe(l);if(h){const f=us(y);return s.concat(y,y.visualViewport||[],ao(l)?l:[],f&&a?tr(f):[])}return s.concat(l,tr(l,[],a))}function us(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function Gh(r){const s=ms(r);let a=parseFloat(s.width)||0,u=parseFloat(s.height)||0;const l=vs(r),h=l?r.offsetWidth:a,y=l?r.offsetHeight:u,f=Ji(a)!==h||Ji(u)!==y;return f&&(a=h,u=y),{width:a,height:u,$:f}}function ds(r){return Ah(r)?r:r.contextElement}function eu(r){const s=ds(r);if(!vs(s))return Qi(1);const a=s.getBoundingClientRect(),{width:u,height:l,$:h}=Gh(s);let y=(h?Ji(a.width):a.width)/u,f=(h?Ji(a.height):a.height)/l;return(!y||!Number.isFinite(y))&&(y=1),(!f||!Number.isFinite(f))&&(f=1),{x:y,y:f}}const Bh=Qi(0);function Yh(r){const s=qe(r);return!Dh()||!s.visualViewport?Bh:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function zh(r,s,a){return!1}function nu(r,s,a,u){s===void 0&&(s=!1);const l=r.getBoundingClientRect(),h=ds(r);let y=Qi(1);s&&(y=eu(r));const f=zh()?Yh(h):Qi(0);let p=(l.left+f.x)/y.x,m=(l.top+f.y)/y.y,_=l.width/y.x,d=l.height/y.y;if(h){const w=qe(h),N=u;let S=w,R=us(S);for(;R&&u&&N!==S;){const B=eu(R),Y=R.getBoundingClientRect(),O=ms(R),U=Y.left+(R.clientLeft+parseFloat(O.paddingLeft))*B.x,K=Y.top+(R.clientTop+parseFloat(O.paddingTop))*B.y;p*=B.x,m*=B.y,_*=B.x,d*=B.y,p+=U,m+=K,S=qe(R),R=us(S)}}return Ph({width:_,height:d,x:p,y:m})}function oo(r,s){return r.x===s.x&&r.y===s.y&&r.width===s.width&&r.height===s.height}function Xh(r,s){let a=null,u;const l=ro(r);function h(){var f;clearTimeout(u),(f=a)==null||f.disconnect(),a=null}function y(f,p){f===void 0&&(f=!1),p===void 0&&(p=1),h();const m=r.getBoundingClientRect(),{left:_,top:d,width:w,height:N}=m;if(f||s(),!w||!N)return;const S=Ci(d),R=Ci(l.clientWidth-(_+w)),B=Ci(l.clientHeight-(d+N)),Y=Ci(_),U={rootMargin:-S+"px "+-R+"px "+-B+"px "+-Y+"px",threshold:Mh(0,Oh(1,p))||1};let K=!0;function $(Z){const W=Z[0].intersectionRatio;if(W!==p){if(!K)return y();W?y(!1,W):u=setTimeout(()=>{y(!1,1e-7)},1e3)}W===1&&!oo(m,r.getBoundingClientRect())&&y(),K=!1}try{a=new IntersectionObserver($,{...U,root:l.ownerDocument})}catch{a=new IntersectionObserver($,U)}a.observe(r)}return y(!0),h}function Rg(r,s,a,u){u===void 0&&(u={});const{ancestorScroll:l=!0,ancestorResize:h=!0,elementResize:y=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:p=!1}=u,m=ds(r),_=l||h?[...m?tr(m):[],...tr(s)]:[];_.forEach(Y=>{l&&Y.addEventListener("scroll",a,{passive:!0}),h&&Y.addEventListener("resize",a)});const d=m&&f?Xh(m,a):null;let w=-1,N=null;y&&(N=new ResizeObserver(Y=>{let[O]=Y;O&&O.target===m&&N&&(N.unobserve(s),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var U;(U=N)==null||U.observe(s)})),a()}),m&&!p&&N.observe(m),N.observe(s));let S,R=p?nu(r):null;p&&B();function B(){const Y=nu(r);R&&!oo(R,Y)&&a(),R=Y,S=requestAnimationFrame(B)}return a(),()=>{var Y;_.forEach(O=>{l&&O.removeEventListener("scroll",a),h&&O.removeEventListener("resize",a)}),d==null||d(),(Y=N)==null||Y.disconnect(),N=null,p&&cancelAnimationFrame(S)}}var Og=Rl.useLayoutEffect,iu=Number.isNaN||function(s){return typeof s=="number"&&s!==s};function Uh(r,s){return!!(r===s||iu(r)&&iu(s))}function Vh(r,s){if(r.length!==s.length)return!1;for(var a=0;a<r.length;a++)if(!Uh(r[a],s[a]))return!1;return!0}function Mg(r,s){s===void 0&&(s=Vh);var a=null;function u(){for(var l=[],h=0;h<arguments.length;h++)l[h]=arguments[h];if(a&&a.lastThis===this&&s(l,a.lastArgs))return a.lastResult;var y=r.apply(this,l);return a={lastResult:y,lastArgs:l,lastThis:this},y}return u.clear=function(){a=null},u}function Pg(r,s={}){const a=[];if(ze(r,l=>{a.push(l.coordinates)}),a.length<2)throw new Error("Must have at least 2 geometries");const u=ns(a[0],...a.slice(1));return u.length===0?null:u.length===1?si(u[0],s.properties):Jn(u,s.properties)}function Ag(r){const s=[];if(ze(r,l=>{s.push(l.coordinates)}),s.length<2)throw new Error("Must have at least two features");const a=r.features[0].properties||{},u=Dc(s[0],...s.slice(1));return u.length===0?null:u.length===1?si(u[0],a):Jn(u,a)}function Dg(r){var s={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return De(r,a=>{var u;switch((u=a.geometry)==null?void 0:u.type){case"Point":s.MultiPoint.coordinates.push(a.geometry.coordinates),s.MultiPoint.properties.push(a.properties);break;case"MultiPoint":s.MultiPoint.coordinates.push(...a.geometry.coordinates),s.MultiPoint.properties.push(a.properties);break;case"LineString":s.MultiLineString.coordinates.push(a.geometry.coordinates),s.MultiLineString.properties.push(a.properties);break;case"MultiLineString":s.MultiLineString.coordinates.push(...a.geometry.coordinates),s.MultiLineString.properties.push(a.properties);break;case"Polygon":s.MultiPolygon.coordinates.push(a.geometry.coordinates),s.MultiPolygon.properties.push(a.properties);break;case"MultiPolygon":s.MultiPolygon.coordinates.push(...a.geometry.coordinates),s.MultiPolygon.properties.push(a.properties);break}}),qt(Object.keys(s).filter(function(a){return s[a].coordinates.length}).sort().map(function(a){var u={type:a,coordinates:s[a].coordinates},l={collectedProperties:s[a].properties};return me(u,l)}))}function ve(r){if(!r)throw new Error("coord is required");if(!Array.isArray(r)){if(r.type==="Feature"&&r.geometry!==null&&r.geometry.type==="Point")return[...r.geometry.coordinates];if(r.type==="Point")return[...r.coordinates]}if(Array.isArray(r)&&r.length>=2&&!Array.isArray(r[0])&&!Array.isArray(r[1]))return[...r];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function en(r){if(Array.isArray(r))return r;if(r.type==="Feature"){if(r.geometry!==null)return r.geometry.coordinates}else if(r.coordinates)return r.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function lo(r,s,a){if(!r)throw new Error("No featureCollection passed");if(!a)throw new Error(".collectionOf() requires a name");if(!r||r.type!=="FeatureCollection")throw new Error("Invalid input to "+a+", FeatureCollection required");for(const u of r.features){if(!u||u.type!=="Feature"||!u.geometry)throw new Error("Invalid input to "+a+", Feature with geometry required");if(!u.geometry||u.geometry.type!==s)throw new Error("Invalid input to "+a+": must be a "+s+", given "+u.geometry.type)}}function os(r){return r.type==="Feature"?r.geometry:r}function ru(r,s){return r.type==="FeatureCollection"?"FeatureCollection":r.type==="GeometryCollection"?"GeometryCollection":r.type==="Feature"&&r.geometry!==null?r.geometry.type:r.type}function su(r){if(!r)throw new Error("geojson is required");var s=[];return sr(r,function(a){s.push(a)}),qt(s)}function Fg(r,s={}){if(s=s||{},!hs(s))throw new Error("options is invalid");const{propertyName:a}=s;lo(r,"Polygon","dissolve");const u=[];if(a){const l={};De(r,function(y){y.properties&&(Object.prototype.hasOwnProperty.call(l,y.properties[a])||(l[y.properties[a]]=[]),l[y.properties[a]].push(y))});const h=Object.keys(l);for(let y=0;y<h.length;y++){const f=Jn(ns.apply(null,l[h[y]].map(function(p){return p.geometry.coordinates})));f&&f.properties&&(f.properties[a]=h[y],u.push(f))}}else return su(Jn(ns.apply(null,r.features.map(function(l){return l.geometry.coordinates}))));return su(qt(u))}function co(r){const s={};return r&&Object.keys(r).forEach(a=>{const u=r[a];typeof u=="object"?u===null?s[a]=null:Array.isArray(u)?s[a]=u.map(l=>l):s[a]=co(u):s[a]=u}),s}function au(r){return function(){return r}}function Hh(r){return r[0]}function Wh(r){return r[1]}function er(){this._=null}function cr(r){r.U=r.C=r.L=r.R=r.P=r.N=null}er.prototype={constructor:er,insert:function(r,s){var a,u,l;if(r){if(s.P=r,s.N=r.N,r.N&&(r.N.P=s),r.N=s,r.R){for(r=r.R;r.L;)r=r.L;r.L=s}else r.R=s;a=r}else this._?(r=uu(this._),s.P=null,s.N=r,r.P=r.L=s,a=r):(s.P=s.N=null,this._=s,a=null);for(s.L=s.R=null,s.U=a,s.C=!0,r=s;a&&a.C;)u=a.U,a===u.L?(l=u.R,l&&l.C?(a.C=l.C=!1,u.C=!0,r=u):(r===a.R&&(zn(this,a),r=a,a=r.U),a.C=!1,u.C=!0,Xn(this,u))):(l=u.L,l&&l.C?(a.C=l.C=!1,u.C=!0,r=u):(r===a.L&&(Xn(this,a),r=a,a=r.U),a.C=!1,u.C=!0,zn(this,u))),a=r.U;this._.C=!1},remove:function(r){r.N&&(r.N.P=r.P),r.P&&(r.P.N=r.N),r.N=r.P=null;var s=r.U,a,u=r.L,l=r.R,h,y;if(u?l?h=uu(l):h=u:h=l,s?s.L===r?s.L=h:s.R=h:this._=h,u&&l?(y=h.C,h.C=r.C,h.L=u,u.U=h,h!==l?(s=h.U,h.U=r.U,r=h.R,s.L=r,h.R=l,l.U=h):(h.U=s,s=h,r=h.R)):(y=r.C,r=h),r&&(r.U=s),!y){if(r&&r.C){r.C=!1;return}do{if(r===this._)break;if(r===s.L){if(a=s.R,a.C&&(a.C=!1,s.C=!0,zn(this,s),a=s.R),a.L&&a.L.C||a.R&&a.R.C){(!a.R||!a.R.C)&&(a.L.C=!1,a.C=!0,Xn(this,a),a=s.R),a.C=s.C,s.C=a.R.C=!1,zn(this,s),r=this._;break}}else if(a=s.L,a.C&&(a.C=!1,s.C=!0,Xn(this,s),a=s.L),a.L&&a.L.C||a.R&&a.R.C){(!a.L||!a.L.C)&&(a.R.C=!1,a.C=!0,zn(this,a),a=s.L),a.C=s.C,s.C=a.L.C=!1,Xn(this,s),r=this._;break}a.C=!0,r=s,s=s.U}while(!r.C);r&&(r.C=!1)}}};function zn(r,s){var a=s,u=s.R,l=a.U;l?l.L===a?l.L=u:l.R=u:r._=u,u.U=l,a.U=u,a.R=u.L,a.R&&(a.R.U=a),u.L=a}function Xn(r,s){var a=s,u=s.L,l=a.U;l?l.L===a?l.L=u:l.R=u:r._=u,u.U=l,a.U=u,a.L=u.R,a.L&&(a.L.U=a),u.R=a}function uu(r){for(;r.L;)r=r.L;return r}function $n(r,s,a,u){var l=[null,null],h=Ut.push(l)-1;return l.left=r,l.right=s,a&&nr(l,r,s,a),u&&nr(l,s,r,u),te[r.index].halfedges.push(h),te[s.index].halfedges.push(h),l}function Un(r,s,a){var u=[s,a];return u.left=r,u}function nr(r,s,a,u){!r[0]&&!r[1]?(r[0]=u,r.left=s,r.right=a):r.left===a?r[1]=u:r[0]=u}function Zh(r,s,a,u,l){var h=r[0],y=r[1],f=h[0],p=h[1],m=y[0],_=y[1],d=0,w=1,N=m-f,S=_-p,R;if(R=s-f,!(!N&&R>0)){if(R/=N,N<0){if(R<d)return;R<w&&(w=R)}else if(N>0){if(R>w)return;R>d&&(d=R)}if(R=u-f,!(!N&&R<0)){if(R/=N,N<0){if(R>w)return;R>d&&(d=R)}else if(N>0){if(R<d)return;R<w&&(w=R)}if(R=a-p,!(!S&&R>0)){if(R/=S,S<0){if(R<d)return;R<w&&(w=R)}else if(S>0){if(R>w)return;R>d&&(d=R)}if(R=l-p,!(!S&&R<0)){if(R/=S,S<0){if(R>w)return;R>d&&(d=R)}else if(S>0){if(R<d)return;R<w&&(w=R)}return!(d>0)&&!(w<1)||(d>0&&(r[0]=[f+d*N,p+d*S]),w<1&&(r[1]=[f+w*N,p+w*S])),!0}}}}}function $h(r,s,a,u,l){var h=r[1];if(h)return!0;var y=r[0],f=r.left,p=r.right,m=f[0],_=f[1],d=p[0],w=p[1],N=(m+d)/2,S=(_+w)/2,R,B;if(w===_){if(N<s||N>=u)return;if(m>d){if(!y)y=[N,a];else if(y[1]>=l)return;h=[N,l]}else{if(!y)y=[N,l];else if(y[1]<a)return;h=[N,a]}}else if(R=(m-d)/(w-_),B=S-R*N,R<-1||R>1)if(m>d){if(!y)y=[(a-B)/R,a];else if(y[1]>=l)return;h=[(l-B)/R,l]}else{if(!y)y=[(l-B)/R,l];else if(y[1]<a)return;h=[(a-B)/R,a]}else if(_<w){if(!y)y=[s,R*s+B];else if(y[0]>=u)return;h=[u,R*u+B]}else{if(!y)y=[u,R*u+B];else if(y[0]<s)return;h=[s,R*s+B]}return r[0]=y,r[1]=h,!0}function jh(r,s,a,u){for(var l=Ut.length,h;l--;)(!$h(h=Ut[l],r,s,a,u)||!Zh(h,r,s,a,u)||!(Math.abs(h[0][0]-h[1][0])>St||Math.abs(h[0][1]-h[1][1])>St))&&delete Ut[l]}function Kh(r){return te[r.index]={site:r,halfedges:[]}}function Jh(r,s){var a=r.site,u=s.left,l=s.right;return a===l&&(l=u,u=a),l?Math.atan2(l[1]-u[1],l[0]-u[0]):(a===u?(u=s[1],l=s[0]):(u=s[0],l=s[1]),Math.atan2(u[0]-l[0],l[1]-u[1]))}function ho(r,s){return s[+(s.left!==r.site)]}function Qh(r,s){return s[+(s.left===r.site)]}function tf(){for(var r=0,s=te.length,a,u,l,h;r<s;++r)if((a=te[r])&&(h=(u=a.halfedges).length)){var y=new Array(h),f=new Array(h);for(l=0;l<h;++l)y[l]=l,f[l]=Jh(a,Ut[u[l]]);for(y.sort(function(p,m){return f[m]-f[p]}),l=0;l<h;++l)f[l]=u[y[l]];for(l=0;l<h;++l)u[l]=f[l]}}function ef(r,s,a,u){var l=te.length,h,y,f,p,m,_,d,w,N,S,R,B,Y=!0;for(h=0;h<l;++h)if(y=te[h]){for(f=y.site,m=y.halfedges,p=m.length;p--;)Ut[m[p]]||m.splice(p,1);for(p=0,_=m.length;p<_;)S=Qh(y,Ut[m[p]]),R=S[0],B=S[1],d=ho(y,Ut[m[++p%_]]),w=d[0],N=d[1],(Math.abs(R-w)>St||Math.abs(B-N)>St)&&(m.splice(p,0,Ut.push(Un(f,S,Math.abs(R-r)<St&&u-B>St?[r,Math.abs(w-r)<St?N:u]:Math.abs(B-u)<St&&a-R>St?[Math.abs(N-u)<St?w:a,u]:Math.abs(R-a)<St&&B-s>St?[a,Math.abs(w-a)<St?N:s]:Math.abs(B-s)<St&&R-r>St?[Math.abs(N-s)<St?w:r,s]:null))-1),++_);_&&(Y=!1)}if(Y){var O,U,K,$=1/0;for(h=0,Y=null;h<l;++h)(y=te[h])&&(f=y.site,O=f[0]-r,U=f[1]-s,K=O*O+U*U,K<$&&($=K,Y=y));if(Y){var Z=[r,s],W=[r,u],E=[a,u],k=[a,s];Y.halfedges.push(Ut.push(Un(f=Y.site,Z,W))-1,Ut.push(Un(f,W,E))-1,Ut.push(Un(f,E,k))-1,Ut.push(Un(f,k,Z))-1)}}for(h=0;h<l;++h)(y=te[h])&&(y.halfedges.length||delete te[h])}var fo=[],ps;function nf(){cr(this),this.x=this.y=this.arc=this.site=this.cy=null}function mn(r){var s=r.P,a=r.N;if(!(!s||!a)){var u=s.site,l=r.site,h=a.site;if(u!==h){var y=l[0],f=l[1],p=u[0]-y,m=u[1]-f,_=h[0]-y,d=h[1]-f,w=2*(p*d-m*_);if(!(w>=-1e-12)){var N=p*p+m*m,S=_*_+d*d,R=(d*N-m*S)/w,B=(p*S-_*N)/w,Y=fo.pop()||new nf;Y.arc=r,Y.site=l,Y.x=R+y,Y.y=(Y.cy=B+f)+Math.sqrt(R*R+B*B),r.circle=Y;for(var O=null,U=ri._;U;)if(Y.y<U.y||Y.y===U.y&&Y.x<=U.x)if(U.L)U=U.L;else{O=U.P;break}else if(U.R)U=U.R;else{O=U;break}ri.insert(O,Y),O||(ps=Y)}}}}function pn(r){var s=r.circle;s&&(s.P||(ps=s.N),ri.remove(s),fo.push(s),cr(s),r.circle=null)}var go=[];function rf(){cr(this),this.edge=this.site=this.circle=null}function ou(r){var s=go.pop()||new rf;return s.site=r,s}function Br(r){pn(r),_n.remove(r),go.push(r),cr(r)}function sf(r){var s=r.circle,a=s.x,u=s.cy,l=[a,u],h=r.P,y=r.N,f=[r];Br(r);for(var p=h;p.circle&&Math.abs(a-p.circle.x)<St&&Math.abs(u-p.circle.cy)<St;)h=p.P,f.unshift(p),Br(p),p=h;f.unshift(p),pn(p);for(var m=y;m.circle&&Math.abs(a-m.circle.x)<St&&Math.abs(u-m.circle.cy)<St;)y=m.N,f.push(m),Br(m),m=y;f.push(m),pn(m);var _=f.length,d;for(d=1;d<_;++d)m=f[d],p=f[d-1],nr(m.edge,p.site,m.site,l);p=f[0],m=f[_-1],m.edge=$n(p.site,m.site,null,l),mn(p),mn(m)}function af(r){for(var s=r[0],a=r[1],u,l,h,y,f=_n._;f;)if(h=yo(f,a)-s,h>St)f=f.L;else if(y=s-uf(f,a),y>St){if(!f.R){u=f;break}f=f.R}else{h>-1e-6?(u=f.P,l=f):y>-1e-6?(u=f,l=f.N):u=l=f;break}Kh(r);var p=ou(r);if(_n.insert(u,p),!(!u&&!l)){if(u===l){pn(u),l=ou(u.site),_n.insert(p,l),p.edge=l.edge=$n(u.site,p.site),mn(u),mn(l);return}if(!l){p.edge=$n(u.site,p.site);return}pn(u),pn(l);var m=u.site,_=m[0],d=m[1],w=r[0]-_,N=r[1]-d,S=l.site,R=S[0]-_,B=S[1]-d,Y=2*(w*B-N*R),O=w*w+N*N,U=R*R+B*B,K=[(B*O-N*U)/Y+_,(w*U-R*O)/Y+d];nr(l.edge,m,S,K),p.edge=$n(m,r,null,K),l.edge=$n(r,S,null,K),mn(u),mn(l)}}function yo(r,s){var a=r.site,u=a[0],l=a[1],h=l-s;if(!h)return u;var y=r.P;if(!y)return-1/0;a=y.site;var f=a[0],p=a[1],m=p-s;if(!m)return f;var _=f-u,d=1/h-1/m,w=_/m;return d?(-w+Math.sqrt(w*w-2*d*(_*_/(-2*m)-p+m/2+l-h/2)))/d+u:(u+f)/2}function uf(r,s){var a=r.N;if(a)return yo(a,s);var u=r.site;return u[1]===s?u[0]:1/0}var St=1e-6,_n,te,ri,Ut;function of(r,s,a){return(r[0]-a[0])*(s[1]-r[1])-(r[0]-s[0])*(a[1]-r[1])}function lf(r,s){return s[1]-r[1]||s[0]-r[0]}function ls(r,s){var a=r.sort(lf).pop(),u,l,h;for(Ut=[],te=new Array(r.length),_n=new er,ri=new er;;)if(h=ps,a&&(!h||a[1]<h.y||a[1]===h.y&&a[0]<h.x))(a[0]!==u||a[1]!==l)&&(af(a),u=a[0],l=a[1]),a=r.pop();else if(h)sf(h.arc);else break;if(tf(),s){var y=+s[0][0],f=+s[0][1],p=+s[1][0],m=+s[1][1];jh(y,f,p,m),ef(y,f,p,m)}this.edges=Ut,this.cells=te,_n=ri=Ut=te=null}ls.prototype={constructor:ls,polygons:function(){var r=this.edges;return this.cells.map(function(s){var a=s.halfedges.map(function(u){return ho(s,r[u])});return a.data=s.site.data,a})},triangles:function(){var r=[],s=this.edges;return this.cells.forEach(function(a,u){if(f=(h=a.halfedges).length)for(var l=a.site,h,y=-1,f,p,m=s[h[f-1]],_=m.left===l?m.right:m.left;++y<f;)p=_,m=s[h[y]],_=m.left===l?m.right:m.left,p&&_&&u<p.index&&u<_.index&&of(l,p,_)<0&&r.push([l.data,p.data,_.data])}),r},links:function(){return this.edges.filter(function(r){return r.right}).map(function(r){return{source:r.left.data,target:r.right.data}})},find:function(r,s,a){for(var u=this,l,h=u._found||0,y=u.cells.length,f;!(f=u.cells[h]);)if(++h>=y)return null;var p=r-f.site[0],m=s-f.site[1],_=p*p+m*m;do f=u.cells[l=h],h=null,f.halfedges.forEach(function(d){var w=u.edges[d],N=w.left;if(!((N===f.site||!N)&&!(N=w.right))){var S=r-N[0],R=s-N[1],B=S*S+R*R;B<_&&(_=B,h=N.index)}});while(h!==null);return u._found=l,a==null||_<=a*a?f.site:null}};function cf(){var r=Hh,s=Wh,a=null;function u(l){return new ls(l.map(function(h,y){var f=[Math.round(r(h,y,l)/St)*St,Math.round(s(h,y,l)/St)*St];return f.index=y,f.data=h,f}),a)}return u.polygons=function(l){return u(l).polygons()},u.links=function(l){return u(l).links()},u.triangles=function(l){return u(l).triangles()},u.x=function(l){return arguments.length?(r=typeof l=="function"?l:au(+l),u):r},u.y=function(l){return arguments.length?(s=typeof l=="function"?l:au(+l),u):s},u.extent=function(l){return arguments.length?(a=l==null?null:[[+l[0][0],+l[0][1]],[+l[1][0],+l[1][1]]],u):a&&[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},u.size=function(l){return arguments.length?(a=l==null?null:[[0,0],[+l[0],+l[1]]],u):a&&[a[1][0]-a[0][0],a[1][1]-a[0][1]]},u}function hf(r){return r=r.slice(),r.push(r[0]),si([r])}function qg(r,s){if(s=s||{},!hs(s))throw new Error("options is invalid");const a=s.bbox||[-180,-85,180,85];if(!r)throw new Error("points is required");if(!Array.isArray(a))throw new Error("bbox is invalid");return lo(r,"Point","points"),qt(cf().x(u=>u.geometry.coordinates[0]).y(u=>u.geometry.coordinates[1]).extent([[a[0],a[1]],[a[2],a[3]]]).polygons(r.features).map(function(u,l){return Object.assign(hf(u),{properties:co(r.features[l].properties)})}))}function Gg(r,s={}){const a=Number(r[0]),u=Number(r[1]),l=Number(r[2]),h=Number(r[3]);if(r.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");const y=[a,u];return si([[y,[l,u],[l,h],[a,h],y]],s.properties,{bbox:r,id:s.id})}const Pe=11102230246251565e-32,zt=134217729,ff=(3+8*Pe)*Pe;function Yr(r,s,a,u,l){let h,y,f,p,m=s[0],_=u[0],d=0,w=0;_>m==_>-m?(h=m,m=s[++d]):(h=_,_=u[++w]);let N=0;if(d<r&&w<a)for(_>m==_>-m?(y=m+h,f=h-(y-m),m=s[++d]):(y=_+h,f=h-(y-_),_=u[++w]),h=y,f!==0&&(l[N++]=f);d<r&&w<a;)_>m==_>-m?(y=h+m,p=y-h,f=h-(y-p)+(m-p),m=s[++d]):(y=h+_,p=y-h,f=h-(y-p)+(_-p),_=u[++w]),h=y,f!==0&&(l[N++]=f);for(;d<r;)y=h+m,p=y-h,f=h-(y-p)+(m-p),m=s[++d],h=y,f!==0&&(l[N++]=f);for(;w<a;)y=h+_,p=y-h,f=h-(y-p)+(_-p),_=u[++w],h=y,f!==0&&(l[N++]=f);return(h!==0||N===0)&&(l[N++]=h),N}function gf(r,s){let a=s[0];for(let u=1;u<r;u++)a+=s[u];return a}function ui(r){return new Float64Array(r)}const yf=(3+16*Pe)*Pe,vf=(2+12*Pe)*Pe,mf=(9+64*Pe)*Pe*Pe,hn=ui(4),lu=ui(8),cu=ui(12),hu=ui(16),Ht=ui(4);function df(r,s,a,u,l,h,y){let f,p,m,_,d,w,N,S,R,B,Y,O,U,K,$,Z,W,E;const k=r-l,C=a-l,F=s-h,P=u-h;K=k*P,w=zt*k,N=w-(w-k),S=k-N,w=zt*P,R=w-(w-P),B=P-R,$=S*B-(K-N*R-S*R-N*B),Z=F*C,w=zt*F,N=w-(w-F),S=F-N,w=zt*C,R=w-(w-C),B=C-R,W=S*B-(Z-N*R-S*R-N*B),Y=$-W,d=$-Y,hn[0]=$-(Y+d)+(d-W),O=K+Y,d=O-K,U=K-(O-d)+(Y-d),Y=U-Z,d=U-Y,hn[1]=U-(Y+d)+(d-Z),E=O+Y,d=E-O,hn[2]=O-(E-d)+(Y-d),hn[3]=E;let q=gf(4,hn),M=vf*y;if(q>=M||-q>=M||(d=r-k,f=r-(k+d)+(d-l),d=a-C,m=a-(C+d)+(d-l),d=s-F,p=s-(F+d)+(d-h),d=u-P,_=u-(P+d)+(d-h),f===0&&p===0&&m===0&&_===0)||(M=mf*y+ff*Math.abs(q),q+=k*_+P*f-(F*m+C*p),q>=M||-q>=M))return q;K=f*P,w=zt*f,N=w-(w-f),S=f-N,w=zt*P,R=w-(w-P),B=P-R,$=S*B-(K-N*R-S*R-N*B),Z=p*C,w=zt*p,N=w-(w-p),S=p-N,w=zt*C,R=w-(w-C),B=C-R,W=S*B-(Z-N*R-S*R-N*B),Y=$-W,d=$-Y,Ht[0]=$-(Y+d)+(d-W),O=K+Y,d=O-K,U=K-(O-d)+(Y-d),Y=U-Z,d=U-Y,Ht[1]=U-(Y+d)+(d-Z),E=O+Y,d=E-O,Ht[2]=O-(E-d)+(Y-d),Ht[3]=E;const L=Yr(4,hn,4,Ht,lu);K=k*_,w=zt*k,N=w-(w-k),S=k-N,w=zt*_,R=w-(w-_),B=_-R,$=S*B-(K-N*R-S*R-N*B),Z=F*m,w=zt*F,N=w-(w-F),S=F-N,w=zt*m,R=w-(w-m),B=m-R,W=S*B-(Z-N*R-S*R-N*B),Y=$-W,d=$-Y,Ht[0]=$-(Y+d)+(d-W),O=K+Y,d=O-K,U=K-(O-d)+(Y-d),Y=U-Z,d=U-Y,Ht[1]=U-(Y+d)+(d-Z),E=O+Y,d=E-O,Ht[2]=O-(E-d)+(Y-d),Ht[3]=E;const b=Yr(L,lu,4,Ht,cu);K=f*_,w=zt*f,N=w-(w-f),S=f-N,w=zt*_,R=w-(w-_),B=_-R,$=S*B-(K-N*R-S*R-N*B),Z=p*m,w=zt*p,N=w-(w-p),S=p-N,w=zt*m,R=w-(w-m),B=m-R,W=S*B-(Z-N*R-S*R-N*B),Y=$-W,d=$-Y,Ht[0]=$-(Y+d)+(d-W),O=K+Y,d=O-K,U=K-(O-d)+(Y-d),Y=U-Z,d=U-Y,Ht[1]=U-(Y+d)+(d-Z),E=O+Y,d=E-O,Ht[2]=O-(E-d)+(Y-d),Ht[3]=E;const A=Yr(b,cu,4,Ht,hu);return hu[A-1]}function pf(r,s,a,u,l,h){const y=(s-h)*(a-l),f=(r-l)*(u-h),p=y-f,m=Math.abs(y+f);return Math.abs(p)>=yf*m?p:-df(r,s,a,u,l,h,m)}function _f(r,s){var a,u,l=0,h,y,f,p,m,_,d,w=r[0],N=r[1],S=s.length;for(a=0;a<S;a++){u=0;var R=s[a],B=R.length-1;if(_=R[0],_[0]!==R[B][0]&&_[1]!==R[B][1])throw new Error("First and last coordinates in a ring must be the same");for(y=_[0]-w,f=_[1]-N,u;u<B;u++){if(d=R[u+1],p=d[0]-w,m=d[1]-N,f===0&&m===0){if(p<=0&&y>=0||y<=0&&p>=0)return 0}else if(m>=0&&f<=0||m<=0&&f>=0){if(h=pf(y,p,f,m,0,0),h===0)return 0;(h>0&&m>0&&f<=0||h<0&&m<=0&&f>0)&&l++}_=d,f=m,y=p}}return l%2!==0}function Ae(r,s,a={}){if(!r)throw new Error("point is required");if(!s)throw new Error("polygon is required");const u=ve(r),l=os(s),h=l.type,y=s.bbox;let f=l.coordinates;if(y&&xf(u,y)===!1)return!1;h==="Polygon"&&(f=[f]);let p=!1;for(var m=0;m<f.length;++m){const _=_f(u,f[m]);if(_===0)return!a.ignoreBoundary;_&&(p=!0)}return p}function xf(r,s){return s[0]<=r[0]&&s[1]<=r[1]&&s[2]>=r[0]&&s[3]>=r[1]}function Bg(r,s){const a=[];return De(r,function(u){let l=!1;if(u.geometry.type==="Point")ze(s,function(y){Ae(u,y)&&(l=!0)}),l&&a.push(u);else if(u.geometry.type==="MultiPoint"){var h=[];ze(s,function(y){rr(u,function(f){Ae(f,y)&&(l=!0,h.push(f))})}),l&&a.push(Al(h,u.properties))}else throw new Error("Input geometry must be a Point or MultiPoint")}),qt(a)}function Ef(r,s,a,u,l){vo(r,s,a||0,u||r.length-1,l||kf)}function vo(r,s,a,u,l){for(;u>a;){if(u-a>600){var h=u-a+1,y=s-a+1,f=Math.log(h),p=.5*Math.exp(2*f/3),m=.5*Math.sqrt(f*p*(h-p)/h)*(y-h/2<0?-1:1),_=Math.max(a,Math.floor(s-y*p/h+m)),d=Math.min(u,Math.floor(s+(h-y)*p/h+m));vo(r,s,_,d,l)}var w=r[s],N=a,S=u;for(Vn(r,a,s),l(r[u],w)>0&&Vn(r,a,u);N<S;){for(Vn(r,N,S),N++,S--;l(r[N],w)<0;)N++;for(;l(r[S],w)>0;)S--}l(r[a],w)===0?Vn(r,a,S):(S++,Vn(r,S,u)),S<=s&&(a=S+1),s<=S&&(u=S-1)}}function Vn(r,s,a){var u=r[s];r[s]=r[a],r[a]=u}function kf(r,s){return r<s?-1:r>s?1:0}class Ee{constructor(s=9){this._maxEntries=Math.max(4,s),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(s){let a=this.data;const u=[];if(!Li(s,a))return u;const l=this.toBBox,h=[];for(;a;){for(let y=0;y<a.children.length;y++){const f=a.children[y],p=a.leaf?l(f):f;Li(s,p)&&(a.leaf?u.push(f):Xr(s,p)?this._all(f,u):h.push(f))}a=h.pop()}return u}collides(s){let a=this.data;if(!Li(s,a))return!1;const u=[];for(;a;){for(let l=0;l<a.children.length;l++){const h=a.children[l],y=a.leaf?this.toBBox(h):h;if(Li(s,y)){if(a.leaf||Xr(s,y))return!0;u.push(h)}}a=u.pop()}return!1}load(s){if(!(s&&s.length))return this;if(s.length<this._minEntries){for(let u=0;u<s.length;u++)this.insert(s[u]);return this}let a=this._build(s.slice(),0,s.length-1,0);if(!this.data.children.length)this.data=a;else if(this.data.height===a.height)this._splitRoot(this.data,a);else{if(this.data.height<a.height){const u=this.data;this.data=a,a=u}this._insert(a,this.data.height-a.height-1,!0)}return this}insert(s){return s&&this._insert(s,this.data.height-1),this}clear(){return this.data=gn([]),this}remove(s,a){if(!s)return this;let u=this.data;const l=this.toBBox(s),h=[],y=[];let f,p,m;for(;u||h.length;){if(u||(u=h.pop(),p=h[h.length-1],f=y.pop(),m=!0),u.leaf){const _=wf(s,u.children,a);if(_!==-1)return u.children.splice(_,1),h.push(u),this._condense(h),this}!m&&!u.leaf&&Xr(u,l)?(h.push(u),y.push(f),f=0,p=u,u=u.children[0]):p?(f++,u=p.children[f],m=!1):u=null}return this}toBBox(s){return s}compareMinX(s,a){return s.minX-a.minX}compareMinY(s,a){return s.minY-a.minY}toJSON(){return this.data}fromJSON(s){return this.data=s,this}_all(s,a){const u=[];for(;s;)s.leaf?a.push(...s.children):u.push(...s.children),s=u.pop();return a}_build(s,a,u,l){const h=u-a+1;let y=this._maxEntries,f;if(h<=y)return f=gn(s.slice(a,u+1)),fn(f,this.toBBox),f;l||(l=Math.ceil(Math.log(h)/Math.log(y)),y=Math.ceil(h/Math.pow(y,l-1))),f=gn([]),f.leaf=!1,f.height=l;const p=Math.ceil(h/y),m=p*Math.ceil(Math.sqrt(y));fu(s,a,u,m,this.compareMinX);for(let _=a;_<=u;_+=m){const d=Math.min(_+m-1,u);fu(s,_,d,p,this.compareMinY);for(let w=_;w<=d;w+=p){const N=Math.min(w+p-1,d);f.children.push(this._build(s,w,N,l-1))}}return fn(f,this.toBBox),f}_chooseSubtree(s,a,u,l){for(;l.push(a),!(a.leaf||l.length-1===u);){let h=1/0,y=1/0,f;for(let p=0;p<a.children.length;p++){const m=a.children[p],_=zr(m),d=Sf(s,m)-_;d<y?(y=d,h=_<h?_:h,f=m):d===y&&_<h&&(h=_,f=m)}a=f||a.children[0]}return a}_insert(s,a,u){const l=u?s:this.toBBox(s),h=[],y=this._chooseSubtree(l,this.data,a,h);for(y.children.push(s),Kn(y,l);a>=0&&h[a].children.length>this._maxEntries;)this._split(h,a),a--;this._adjustParentBBoxes(l,h,a)}_split(s,a){const u=s[a],l=u.children.length,h=this._minEntries;this._chooseSplitAxis(u,h,l);const y=this._chooseSplitIndex(u,h,l),f=gn(u.children.splice(y,u.children.length-y));f.height=u.height,f.leaf=u.leaf,fn(u,this.toBBox),fn(f,this.toBBox),a?s[a-1].children.push(f):this._splitRoot(u,f)}_splitRoot(s,a){this.data=gn([s,a]),this.data.height=s.height+1,this.data.leaf=!1,fn(this.data,this.toBBox)}_chooseSplitIndex(s,a,u){let l,h=1/0,y=1/0;for(let f=a;f<=u-a;f++){const p=jn(s,0,f,this.toBBox),m=jn(s,f,u,this.toBBox),_=bf(p,m),d=zr(p)+zr(m);_<h?(h=_,l=f,y=d<y?d:y):_===h&&d<y&&(y=d,l=f)}return l||u-a}_chooseSplitAxis(s,a,u){const l=s.leaf?this.compareMinX:If,h=s.leaf?this.compareMinY:Nf,y=this._allDistMargin(s,a,u,l),f=this._allDistMargin(s,a,u,h);y<f&&s.children.sort(l)}_allDistMargin(s,a,u,l){s.children.sort(l);const h=this.toBBox,y=jn(s,0,a,h),f=jn(s,u-a,u,h);let p=Ti(y)+Ti(f);for(let m=a;m<u-a;m++){const _=s.children[m];Kn(y,s.leaf?h(_):_),p+=Ti(y)}for(let m=u-a-1;m>=a;m--){const _=s.children[m];Kn(f,s.leaf?h(_):_),p+=Ti(f)}return p}_adjustParentBBoxes(s,a,u){for(let l=u;l>=0;l--)Kn(a[l],s)}_condense(s){for(let a=s.length-1,u;a>=0;a--)s[a].children.length===0?a>0?(u=s[a-1].children,u.splice(u.indexOf(s[a]),1)):this.clear():fn(s[a],this.toBBox)}}function wf(r,s,a){if(!a)return s.indexOf(r);for(let u=0;u<s.length;u++)if(a(r,s[u]))return u;return-1}function fn(r,s){jn(r,0,r.children.length,s,r)}function jn(r,s,a,u,l){l||(l=gn(null)),l.minX=1/0,l.minY=1/0,l.maxX=-1/0,l.maxY=-1/0;for(let h=s;h<a;h++){const y=r.children[h];Kn(l,r.leaf?u(y):y)}return l}function Kn(r,s){return r.minX=Math.min(r.minX,s.minX),r.minY=Math.min(r.minY,s.minY),r.maxX=Math.max(r.maxX,s.maxX),r.maxY=Math.max(r.maxY,s.maxY),r}function If(r,s){return r.minX-s.minX}function Nf(r,s){return r.minY-s.minY}function zr(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function Ti(r){return r.maxX-r.minX+(r.maxY-r.minY)}function Sf(r,s){return(Math.max(s.maxX,r.maxX)-Math.min(s.minX,r.minX))*(Math.max(s.maxY,r.maxY)-Math.min(s.minY,r.minY))}function bf(r,s){const a=Math.max(r.minX,s.minX),u=Math.max(r.minY,s.minY),l=Math.min(r.maxX,s.maxX),h=Math.min(r.maxY,s.maxY);return Math.max(0,l-a)*Math.max(0,h-u)}function Xr(r,s){return r.minX<=s.minX&&r.minY<=s.minY&&s.maxX<=r.maxX&&s.maxY<=r.maxY}function Li(r,s){return s.minX<=r.maxX&&s.minY<=r.maxY&&s.maxX>=r.minX&&s.maxY>=r.minY}function gn(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function fu(r,s,a,u,l){const h=[s,a];for(;h.length;){if(a=h.pop(),s=h.pop(),a-s<=u)continue;const y=s+Math.ceil((a-s)/u/2)*u;Ef(r,y,s,a,l),h.push(s,y,y,a)}}function mo(r){var s=new Ee(r);return s.insert=function(a){if(a.type!=="Feature")throw new Error("invalid feature");return a.bbox=a.bbox?a.bbox:he(a),Ee.prototype.insert.call(this,a)},s.load=function(a){var u=[];return Array.isArray(a)?a.forEach(function(l){if(l.type!=="Feature")throw new Error("invalid features");l.bbox=l.bbox?l.bbox:he(l),u.push(l)}):De(a,function(l){if(l.type!=="Feature")throw new Error("invalid features");l.bbox=l.bbox?l.bbox:he(l),u.push(l)}),Ee.prototype.load.call(this,u)},s.remove=function(a,u){if(a.type!=="Feature")throw new Error("invalid feature");return a.bbox=a.bbox?a.bbox:he(a),Ee.prototype.remove.call(this,a,u)},s.clear=function(){return Ee.prototype.clear.call(this)},s.search=function(a){var u=Ee.prototype.search.call(this,this.toBBox(a));return qt(u)},s.collides=function(a){return Ee.prototype.collides.call(this,this.toBBox(a))},s.all=function(){var a=Ee.prototype.all.call(this);return qt(a)},s.toJSON=function(){return Ee.prototype.toJSON.call(this)},s.fromJSON=function(a){return Ee.prototype.fromJSON.call(this,a)},s.toBBox=function(a){var u;if(a.bbox)u=a.bbox;else if(Array.isArray(a)&&a.length===4)u=a;else if(Array.isArray(a)&&a.length===6)u=[a[0],a[1],a[3],a[4]];else if(a.type==="Feature")u=he(a);else if(a.type==="FeatureCollection")u=he(a);else throw new Error("invalid geojson");return{minX:u[0],minY:u[1],maxX:u[2],maxY:u[3]}},s}function Me(r,s,a={}){var u=ve(r),l=ve(s),h=vn(l[1]-u[1]),y=vn(l[0]-u[0]),f=vn(u[1]),p=vn(l[1]),m=Math.pow(Math.sin(h/2),2)+Math.pow(Math.sin(y/2),2)*Math.cos(f)*Math.cos(p);return Nu(2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m)),a.units)}function Cf(r){var s=r[0],a=r[1],u=r[2],l=r[3],h=Me(r.slice(0,2),[u,a]),y=Me(r.slice(0,2),[s,l]);if(h>=y){var f=(a+l)/2;return[s,f-(u-s)/2,u,f+(u-s)/2]}else{var p=(s+u)/2;return[p-(l-a)/2,a,p+(l-a)/2,l]}}function Tf(r,s){if(s=s??{},!hs(s))throw new Error("options is invalid");var a=s.precision,u=s.coordinates,l=s.mutate;if(a=a==null||isNaN(a)?6:a,u=u==null||isNaN(u)?3:u,!r)throw new Error("<geojson> is required");if(typeof a!="number")throw new Error("<precision> must be a number");if(typeof u!="number")throw new Error("<coordinates> must be a number");(l===!1||l===void 0)&&(r=JSON.parse(JSON.stringify(r)));var h=Math.pow(10,a);return rr(r,function(y){Lf(y,h,u)}),r}function Lf(r,s,a){r.length>a&&r.splice(a,r.length);for(var u=0;u<r.length;u++)r[u]=Math.round(r[u]*s)/s;return r}function Rf(r){if(!r)throw new Error("geojson is required");const s=[];return sr(r,a=>{Of(a,s)}),qt(s)}function Of(r,s){let a=[];const u=r.geometry;if(u!==null){switch(u.type){case"Polygon":a=en(u);break;case"LineString":a=[en(u)]}a.forEach(l=>{Mf(l,r.properties).forEach(y=>{y.id=s.length,s.push(y)})})}}function Mf(r,s){const a=[];return r.reduce((u,l)=>{const h=Hr([u,l],s);return h.bbox=Pf(u,l),a.push(h),l}),a}function Pf(r,s){const a=r[0],u=r[1],l=s[0],h=s[1],y=a<l?a:l,f=u<h?u:h,p=a>l?a:l,m=u>h?u:h;return[y,f,p,m]}class po{constructor(s=[],a=Af){if(this.data=s,this.length=this.data.length,this.compare=a,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(s){this.data.push(s),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const s=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:a,compare:u}=this,l=a[s];for(;s>0;){const h=s-1>>1,y=a[h];if(u(l,y)>=0)break;a[s]=y,s=h}a[s]=l}_down(s){const{data:a,compare:u}=this,l=this.length>>1,h=a[s];for(;s<l;){let y=(s<<1)+1,f=a[y];const p=y+1;if(p<this.length&&u(a[p],f)<0&&(y=p,f=a[p]),u(f,h)>=0)break;a[s]=f,s=y}a[s]=h}}function Af(r,s){return r<s?-1:r>s?1:0}function _o(r,s){return r.p.x>s.p.x?1:r.p.x<s.p.x?-1:r.p.y!==s.p.y?r.p.y>s.p.y?1:-1:1}function Df(r,s){return r.rightSweepEvent.p.x>s.rightSweepEvent.p.x?1:r.rightSweepEvent.p.x<s.rightSweepEvent.p.x?-1:r.rightSweepEvent.p.y!==s.rightSweepEvent.p.y?r.rightSweepEvent.p.y<s.rightSweepEvent.p.y?1:-1:1}class gu{constructor(s,a,u,l){this.p={x:s[0],y:s[1]},this.featureId=a,this.ringId=u,this.eventId=l,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(s){return this.p.x===s.p.x&&this.p.y===s.p.y}}function Ff(r,s){if(r.type==="FeatureCollection"){const a=r.features;for(let u=0;u<a.length;u++)yu(a[u],s)}else yu(r,s)}let Ri=0,Oi=0,Mi=0;function yu(r,s){const a=r.type==="Feature"?r.geometry:r;let u=a.coordinates;(a.type==="Polygon"||a.type==="MultiLineString")&&(u=[u]),a.type==="LineString"&&(u=[[u]]);for(let l=0;l<u.length;l++)for(let h=0;h<u[l].length;h++){let y=u[l][h][0],f=null;Oi=Oi+1;for(let p=0;p<u[l][h].length-1;p++){f=u[l][h][p+1];const m=new gu(y,Ri,Oi,Mi),_=new gu(f,Ri,Oi,Mi+1);m.otherEvent=_,_.otherEvent=m,_o(m,_)>0?(_.isLeftEndpoint=!0,m.isLeftEndpoint=!1):(m.isLeftEndpoint=!0,_.isLeftEndpoint=!1),s.push(m),s.push(_),y=f,Mi=Mi+1}}Ri=Ri+1}class qf{constructor(s){this.leftSweepEvent=s,this.rightSweepEvent=s.otherEvent}}function Gf(r,s){if(r===null||s===null||r.leftSweepEvent.ringId===s.leftSweepEvent.ringId&&(r.rightSweepEvent.isSamePoint(s.leftSweepEvent)||r.rightSweepEvent.isSamePoint(s.leftSweepEvent)||r.rightSweepEvent.isSamePoint(s.rightSweepEvent)||r.leftSweepEvent.isSamePoint(s.leftSweepEvent)||r.leftSweepEvent.isSamePoint(s.rightSweepEvent)))return!1;const a=r.leftSweepEvent.p.x,u=r.leftSweepEvent.p.y,l=r.rightSweepEvent.p.x,h=r.rightSweepEvent.p.y,y=s.leftSweepEvent.p.x,f=s.leftSweepEvent.p.y,p=s.rightSweepEvent.p.x,m=s.rightSweepEvent.p.y,_=(m-f)*(l-a)-(p-y)*(h-u),d=(p-y)*(u-f)-(m-f)*(a-y),w=(l-a)*(u-f)-(h-u)*(a-y);if(_===0)return!1;const N=d/_,S=w/_;if(N>=0&&N<=1&&S>=0&&S<=1){const R=a+N*(l-a),B=u+N*(h-u);return[R,B]}return!1}function Bf(r,s){s=s||!1;const a=[],u=new po([],Df);for(;r.length;){const l=r.pop();if(l.isLeftEndpoint){const h=new qf(l);for(let y=0;y<u.data.length;y++){const f=u.data[y];if(s&&f.leftSweepEvent.featureId===l.featureId)continue;const p=Gf(h,f);p!==!1&&a.push(p)}u.push(h)}else l.isLeftEndpoint===!1&&u.pop()}return a}function Yf(r,s){const a=new po([],_o);return Ff(r,a),Bf(a,s)}var zf=Yf;function Xf(r,s,a={}){const{removeDuplicates:u=!0,ignoreSelfIntersections:l=!0}=a;let h=[];r.type==="FeatureCollection"?h=h.concat(r.features):r.type==="Feature"?h.push(r):(r.type==="LineString"||r.type==="Polygon"||r.type==="MultiLineString"||r.type==="MultiPolygon")&&h.push(me(r)),s.type==="FeatureCollection"?h=h.concat(s.features):s.type==="Feature"?h.push(s):(s.type==="LineString"||s.type==="Polygon"||s.type==="MultiLineString"||s.type==="MultiPolygon")&&h.push(me(s));const y=zf(qt(h),l);let f=[];if(u){const p={};y.forEach(m=>{const _=m.join(",");p[_]||(p[_]=!0,f.push(m))})}else f=y;return qt(f.map(p=>yn(p)))}var Uf=Object.defineProperty,Vf=Object.defineProperties,Hf=Object.getOwnPropertyDescriptors,vu=Object.getOwnPropertySymbols,Wf=Object.prototype.hasOwnProperty,Zf=Object.prototype.propertyIsEnumerable,mu=(r,s,a)=>s in r?Uf(r,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[s]=a,du=(r,s)=>{for(var a in s||(s={}))Wf.call(s,a)&&mu(r,a,s[a]);if(vu)for(var a of vu(s))Zf.call(s,a)&&mu(r,a,s[a]);return r},pu=(r,s)=>Vf(r,Hf(s));function $f(r,s,a={}){if(!r||!s)throw new Error("lines and pt are required arguments");const u=ve(s);let l=yn([1/0,1/0],{dist:1/0,index:-1,multiFeatureIndex:-1,location:-1}),h=0;return sr(r,function(y,f,p){const m=en(y);for(let _=0;_<m.length-1;_++){const d=yn(m[_]);d.properties.dist=Me(s,d,a);const w=ve(d),N=yn(m[_+1]);N.properties.dist=Me(s,N,a);const S=ve(N),R=Me(d,N,a);let B,Y;w[0]===u[0]&&w[1]===u[1]?[B,,Y]=[w,void 0,!1]:S[0]===u[0]&&S[1]===u[1]?[B,,Y]=[S,void 0,!0]:[B,,Y]=Jf(d.geometry.coordinates,N.geometry.coordinates,ve(s));let O;B&&(O=yn(B,{dist:Me(s,B,a),multiFeatureIndex:p,location:h+Me(d,B,a)})),O&&O.properties.dist<l.properties.dist&&(l=pu(du({},O),{properties:pu(du({},O.properties),{index:Y?_+1:_})})),h+=R}}),l}function jf(r,s){const[a,u,l]=r,[h,y,f]=s;return a*h+u*y+l*f}function Kf(r,s){const[a,u,l]=r,[h,y,f]=s;return[u*f-l*y,l*h-a*f,a*y-u*h]}function _u(r){return Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)+Math.pow(r[2],2))}function Qe(r,s){const a=jf(r,s)/(_u(r)*_u(s));return Math.acos(Math.min(Math.max(a,-1),1))}function Ur(r){const s=vn(r[1]),a=vn(r[0]);return[Math.cos(s)*Math.cos(a),Math.cos(s)*Math.sin(a),Math.sin(s)]}function tn(r){const[s,a,u]=r,l=_a(Math.asin(u));return[_a(Math.atan2(a,s)),l]}function Jf(r,s,a){const u=Ur(r),l=Ur(s),h=Ur(a),[y,f,p]=h,[m,_,d]=Kf(u,l),w=_*p-d*f,N=d*y-m*p,S=m*f-_*y,R=S*_-N*d,B=w*d-S*m,Y=N*m-w*_,O=1/Math.sqrt(Math.pow(R,2)+Math.pow(B,2)+Math.pow(Y,2)),U=[R*O,B*O,Y*O],K=[-1*R*O,-1*B*O,-1*Y*O],$=Qe(u,l),Z=Qe(u,U),W=Qe(l,U),E=Qe(u,K),k=Qe(l,K);let C;return Z<E&&Z<k||W<E&&W<k?C=U:C=K,Qe(u,C)>$||Qe(l,C)>$?Me(tn(C),tn(u))<=Me(tn(C),tn(l))?[tn(u),!0,!1]:[tn(l),!1,!0]:[tn(C),!1,!1]}function Yg(r,s){if(!r)throw new Error("line is required");if(!s)throw new Error("splitter is required");var a=ru(r),u=ru(s);if(a!=="LineString")throw new Error("line must be LineString");if(u==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(u==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var l=Tf(s,{precision:7});switch(u){case"Point":return cs(r,l);case"MultiPoint":return xu(r,l);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return xu(r,Xf(r,l,{ignoreSelfIntersections:!0}))}}function xu(r,s){var a=[],u=mo();return sr(s,function(l){if(a.forEach(function(f,p){f.id=p}),!a.length)a=cs(r,l).features,a.forEach(function(f){f.bbox||(f.bbox=Cf(he(f)))}),u.load(qt(a));else{var h=u.search(l);if(h.features.length){var y=xo(l,h);a=a.filter(function(f){return f.id!==y.id}),u.remove(y),De(cs(y,l),function(f){a.push(f),u.insert(f)})}}}),qt(a)}function cs(r,s){var a=[],u=en(r)[0],l=en(r)[r.geometry.coordinates.length-1];if(Vr(u,ve(s))||Vr(l,ve(s)))return qt([r]);var h=mo(),y=Rf(r);h.load(y);var f=h.search(s);if(!f.features.length)return qt([r]);var p=xo(s,f),m=[u],_=Fl(y,function(d,w,N){var S=en(w)[1],R=ve(s);return N===p.id?(d.push(R),a.push(Hr(d)),Vr(R,S)?[R]:[R,S]):(d.push(S),d)},m);return _.length>1&&a.push(Hr(_)),qt(a)}function xo(r,s){if(!s.features.length)throw new Error("lines must contain features");if(s.features.length===1)return s.features[0];var a,u=1/0;return De(s,function(l){var h=$f(l,r),y=h.properties.dist;y<u&&(a=l,u=y)}),a}function Vr(r,s){return r[0]===s[0]&&r[1]===s[1]}function ir(r,s,a={}){const u=ve(r),l=en(s);for(let h=0;h<l.length-1;h++){let y=!1;if(a.ignoreEndVertices&&(h===0&&(y="start"),h===l.length-2&&(y="end"),h===0&&h+1===l.length-1&&(y="both")),Qf(l[h],l[h+1],u,y,typeof a.epsilon>"u"?null:a.epsilon))return!0}return!1}function Qf(r,s,a,u,l){const h=a[0],y=a[1],f=r[0],p=r[1],m=s[0],_=s[1],d=a[0]-f,w=a[1]-p,N=m-f,S=_-p,R=d*S-w*N;if(l!==null){if(Math.abs(R)>l)return!1}else if(R!==0)return!1;if(Math.abs(N)===Math.abs(S)&&Math.abs(N)===0)return u?!1:a[0]===r[0]&&a[1]===r[1];if(u){if(u==="start")return Math.abs(N)>=Math.abs(S)?N>0?f<h&&h<=m:m<=h&&h<f:S>0?p<y&&y<=_:_<=y&&y<p;if(u==="end")return Math.abs(N)>=Math.abs(S)?N>0?f<=h&&h<m:m<h&&h<=f:S>0?p<=y&&y<_:_<y&&y<=p;if(u==="both")return Math.abs(N)>=Math.abs(S)?N>0?f<h&&h<m:m<h&&h<f:S>0?p<y&&y<_:_<y&&y<p}else return Math.abs(N)>=Math.abs(S)?N>0?f<=h&&h<=m:m<=h&&h<=f:S>0?p<=y&&y<=_:_<=y&&y<=p;return!1}function zg(r,s){var a=os(r),u=os(s),l=a.type,h=u.type;switch(l){case"Point":switch(h){case"MultiPoint":return tg(a,u);case"LineString":return ir(a,u,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return Ae(a,u,{ignoreBoundary:!0});default:throw new Error("feature2 "+h+" geometry not supported")}case"MultiPoint":switch(h){case"MultiPoint":return eg(a,u);case"LineString":return ng(a,u);case"Polygon":case"MultiPolygon":return ig(a,u);default:throw new Error("feature2 "+h+" geometry not supported")}case"LineString":switch(h){case"LineString":return rg(a,u);case"Polygon":case"MultiPolygon":return sg(a,u);default:throw new Error("feature2 "+h+" geometry not supported")}case"Polygon":switch(h){case"Polygon":case"MultiPolygon":return ag(a,u);default:throw new Error("feature2 "+h+" geometry not supported")}default:throw new Error("feature1 "+l+" geometry not supported")}}function tg(r,s){var a,u=!1;for(a=0;a<s.coordinates.length;a++)if(ko(s.coordinates[a],r.coordinates)){u=!0;break}return u}function eg(r,s){for(var a=0;a<r.coordinates.length;a++){for(var u=!1,l=0;l<s.coordinates.length;l++)ko(r.coordinates[a],s.coordinates[l])&&(u=!0);if(!u)return!1}return!0}function ng(r,s){for(var a=!1,u=0;u<r.coordinates.length;u++){if(!ir(r.coordinates[u],s))return!1;a||(a=ir(r.coordinates[u],s,{ignoreEndVertices:!0}))}return a}function ig(r,s){for(var a=!0,u=!1,l=0;l<r.coordinates.length;l++){if(u=Ae(r.coordinates[l],s),!u){a=!1;break}u=Ae(r.coordinates[l],s,{ignoreBoundary:!0})}return a&&u}function rg(r,s){for(var a=0;a<r.coordinates.length;a++)if(!ir(r.coordinates[a],s))return!1;return!0}function sg(r,s){var a=he(s),u=he(r);if(!Eo(a,u))return!1;for(var l=!1,h=0;h<r.coordinates.length;h++){if(!Ae(r.coordinates[h],s))return!1;if(l||(l=Ae(r.coordinates[h],s,{ignoreBoundary:!0})),!l&&h<r.coordinates.length-1){var y=ug(r.coordinates[h],r.coordinates[h+1]);l=Ae(y,s,{ignoreBoundary:!0})}}return l}function ag(r,s){var a=he(r),u=he(s);if(!Eo(u,a))return!1;for(var l=0;l<r.coordinates[0].length;l++)if(!Ae(r.coordinates[0][l],s))return!1;return!0}function Eo(r,s){return!(r[0]>s[0]||r[2]<s[2]||r[1]>s[1]||r[3]<s[3])}function ko(r,s){return r[0]===s[0]&&r[1]===s[1]}function ug(r,s){return[(r[0]+s[0])/2,(r[1]+s[1])/2]}export{vg as A,mg as B,Pg as C,Dg as D,Ag as E,Fg as F,su as G,qg as H,he as I,Gg as J,Bg as K,zg as L,Yg as M,_g as _,cg as a,hg as b,gg as c,pg as d,dg as e,Ng as f,wu as g,Sg as h,yg as i,Ih as j,bg as k,qc as l,wn as m,Ha as n,Og as o,Rg as p,Lg as q,fg as r,Cg as s,kg as t,Tg as u,wg as v,Eg as w,xg as x,Ig as y,Mg as z};
