var an=Object.defineProperty;var hn=(t,e,n)=>e in t?an(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var A=(t,e,n)=>hn(t,typeof e!="symbol"?e+"":e,n);function pn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var te={exports:{}},ee={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var de;function gn(){return de||(de=1,function(t){function e(u,v){var g=u.length;u.push(v);t:for(;0<g;){var R=g-1>>>1,P=u[R];if(0<r(P,v))u[R]=v,u[g]=P,g=R;else break t}}function n(u){return u.length===0?null:u[0]}function i(u){if(u.length===0)return null;var v=u[0],g=u.pop();if(g!==v){u[0]=g;t:for(var R=0,P=u.length,M=P>>>1;R<M;){var B=2*(R+1)-1,F=u[B],$=B+1,q=u[$];if(0>r(F,g))$<P&&0>r(q,F)?(u[R]=q,u[$]=g,R=$):(u[R]=F,u[B]=g,R=B);else if($<P&&0>r(q,g))u[R]=q,u[$]=g,R=$;else break t}}return v}function r(u,v){var g=u.sortIndex-v.sortIndex;return g!==0?g:u.id-v.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var a=Date,p=a.now();t.unstable_now=function(){return a.now()-p}}var T=[],y=[],w=1,x=null,m=3,_=!1,I=!1,b=!1,L=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function k(u){for(var v=n(y);v!==null;){if(v.callback===null)i(y);else if(v.startTime<=u)i(y),v.sortIndex=v.expirationTime,e(T,v);else break;v=n(y)}}function G(u){if(b=!1,k(u),!I)if(n(T)!==null)I=!0,h();else{var v=n(y);v!==null&&c(G,v.startTime-u)}}var U=!1,N=-1,C=5,s=-1;function o(){return!(t.unstable_now()-s<C)}function f(){if(U){var u=t.unstable_now();s=u;var v=!0;try{t:{I=!1,b&&(b=!1,z(N),N=-1),_=!0;var g=m;try{e:{for(k(u),x=n(T);x!==null&&!(x.expirationTime>u&&o());){var R=x.callback;if(typeof R=="function"){x.callback=null,m=x.priorityLevel;var P=R(x.expirationTime<=u);if(u=t.unstable_now(),typeof P=="function"){x.callback=P,k(u),v=!0;break e}x===n(T)&&i(T),k(u)}else i(T);x=n(T)}if(x!==null)v=!0;else{var M=n(y);M!==null&&c(G,M.startTime-u),v=!1}}break t}finally{x=null,m=g,_=!1}v=void 0}}finally{v?E():U=!1}}}var E;if(typeof O=="function")E=function(){O(f)};else if(typeof MessageChannel<"u"){var d=new MessageChannel,S=d.port2;d.port1.onmessage=f,E=function(){S.postMessage(null)}}else E=function(){L(f,0)};function h(){U||(U=!0,E())}function c(u,v){N=L(function(){u(t.unstable_now())},v)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(u){u.callback=null},t.unstable_continueExecution=function(){I||_||(I=!0,h())},t.unstable_forceFrameRate=function(u){0>u||125<u?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<u?Math.floor(1e3/u):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(T)},t.unstable_next=function(u){switch(m){case 1:case 2:case 3:var v=3;break;default:v=m}var g=m;m=v;try{return u()}finally{m=g}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(u,v){switch(u){case 1:case 2:case 3:case 4:case 5:break;default:u=3}var g=m;m=u;try{return v()}finally{m=g}},t.unstable_scheduleCallback=function(u,v,g){var R=t.unstable_now();switch(typeof g=="object"&&g!==null?(g=g.delay,g=typeof g=="number"&&0<g?R+g:R):g=R,u){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=g+P,u={id:w++,callback:v,priorityLevel:u,startTime:g,expirationTime:P,sortIndex:-1},g>R?(u.sortIndex=g,e(y,u),n(T)===null&&u===n(y)&&(b?(z(N),N=-1):b=!0,c(G,g-R))):(u.sortIndex=P,e(T,u),I||_||(I=!0,h())),u},t.unstable_shouldYield=o,t.unstable_wrapCallback=function(u){var v=m;return function(){var g=m;m=v;try{return u.apply(this,arguments)}finally{m=g}}}}(ee)),ee}var Ee;function si(){return Ee||(Ee=1,te.exports=gn()),te.exports}const we=t=>{let e;const n=new Set,i=(y,w)=>{const x=typeof y=="function"?y(e):y;if(!Object.is(x,e)){const m=e;e=w??(typeof x!="object"||x===null)?x:Object.assign({},e,x),n.forEach(_=>_(e,m))}},r=()=>e,p={setState:i,getState:r,getInitialState:()=>T,subscribe:y=>(n.add(y),()=>n.delete(y))},T=e=t(i,r,p);return p},oi=t=>t?we(t):we;var Ot={},Se;function li(){return Se||(Se=1,Ot.RADIUS=6378137,Ot.FLATTENING=1/298.257223563,Ot.POLAR_RADIUS=63567523142e-4),Ot}let ui=(t,e=21)=>(n=e)=>{let i="",r=n|0;for(;r--;)i+=t[Math.random()*t.length|0];return i};var ne,xe;function yn(){return xe||(xe=1,ne=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var i,r,l;if(Array.isArray(e)){if(i=e.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(l=Object.keys(e),i=l.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,l[r]))return!1;for(r=i;r--!==0;){var a=l[r];if(!t(e[a],n[a]))return!1}return!0}return e!==e&&n!==n}),ne}var vn=yn();const fi=pn(vn);function dt(){return new Ht}function Ht(){this.reset()}Ht.prototype={constructor:Ht,reset:function(){this.s=this.t=0},add:function(t){me(Ct,t,this.t),me(this,Ct.s,this.s),this.s?this.t+=Ct.t:this.s=Ct.t},valueOf:function(){return this.s}};var Ct=new Ht;function me(t,e,n){var i=t.s=e+n,r=i-e,l=i-r;t.t=e-l+(n-r)}var j=1e-6,H=Math.PI,ct=H/2,Te=H/4,ht=H*2,yt=180/H,ot=H/180,Z=Math.abs,dn=Math.atan,St=Math.atan2,X=Math.cos,Y=Math.sin,Tt=Math.sqrt;function Ke(t){return t>1?0:t<-1?H:Math.acos(t)}function wt(t){return t>1?ct:t<-1?-ct:Math.asin(t)}function Pt(){}function Vt(t,e){t&&Oe.hasOwnProperty(t.type)&&Oe[t.type](t,e)}var Re={Feature:function(t,e){Vt(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Vt(n[i].geometry,e)}},Oe={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){le(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)le(n[i],e,0)},Polygon:function(t,e){_e(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)_e(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Vt(n[i],e)}};function le(t,e,n){var i=-1,r=t.length-n,l;for(e.lineStart();++i<r;)l=t[i],e.point(l[0],l[1],l[2]);e.lineEnd()}function _e(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)le(t[n],e,1);e.polygonEnd()}function En(t,e){t&&Re.hasOwnProperty(t.type)?Re[t.type](t,e):Vt(t,e)}dt();dt();function ue(t){return[St(t[1],t[0]),wt(t[2])]}function xt(t){var e=t[0],n=t[1],i=X(n);return[i*X(e),i*Y(e),Y(n)]}function bt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function jt(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ie(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function kt(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function fe(t){var e=Tt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}dt();function Xe(t,e){function n(i,r){return i=t(i,r),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,r){return i=e.invert(i,r),i&&t.invert(i[0],i[1])}),n}function ce(t,e){return[t>H?t-ht:t<-H?t+ht:t,e]}ce.invert=ce;function wn(t,e,n){return(t%=ht)?e||n?Xe(Pe(t),Ne(e,n)):Pe(t):e||n?Ne(e,n):ce}function Ie(t){return function(e,n){return e+=t,[e>H?e-ht:e<-H?e+ht:e,n]}}function Pe(t){var e=Ie(t);return e.invert=Ie(-t),e}function Ne(t,e){var n=X(t),i=Y(t),r=X(e),l=Y(e);function a(p,T){var y=X(T),w=X(p)*y,x=Y(p)*y,m=Y(T),_=m*n+w*i;return[St(x*r-_*l,w*n-m*i),wt(_*r+x*l)]}return a.invert=function(p,T){var y=X(T),w=X(p)*y,x=Y(p)*y,m=Y(T),_=m*r-x*l;return[St(x*r+m*l,w*n+_*i),wt(_*n-w*i)]},a}function Sn(t,e,n,i,r,l){if(n){var a=X(e),p=Y(e),T=i*n;r==null?(r=e+i*ht,l=e-T/2):(r=Me(a,r),l=Me(a,l),(i>0?r<l:r>l)&&(r+=i*ht));for(var y,w=r;i>0?w>l:w<l;w-=T)y=ue([a,-p*X(w),-p*Y(w)]),t.point(y[0],y[1])}}function Me(t,e){e=xt(e),e[0]-=t,fe(e);var n=Ke(-e[1]);return((-e[2]<0?-n:n)+ht-j)%ht}function Ye(){var t=[],e;return{point:function(n,i){e.push([n,i])},lineStart:function(){t.push(e=[])},lineEnd:Pt,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function xn(t,e,n,i,r,l){var a=t[0],p=t[1],T=e[0],y=e[1],w=0,x=1,m=T-a,_=y-p,I;if(I=n-a,!(!m&&I>0)){if(I/=m,m<0){if(I<w)return;I<x&&(x=I)}else if(m>0){if(I>x)return;I>w&&(w=I)}if(I=r-a,!(!m&&I<0)){if(I/=m,m<0){if(I>x)return;I>w&&(w=I)}else if(m>0){if(I<w)return;I<x&&(x=I)}if(I=i-p,!(!_&&I>0)){if(I/=_,_<0){if(I<w)return;I<x&&(x=I)}else if(_>0){if(I>x)return;I>w&&(w=I)}if(I=l-p,!(!_&&I<0)){if(I/=_,_<0){if(I>x)return;I>w&&(w=I)}else if(_>0){if(I<w)return;I<x&&(x=I)}return w>0&&(t[0]=a+w*m,t[1]=p+w*_),x<1&&(e[0]=a+x*m,e[1]=p+x*_),!0}}}}}function Ft(t,e){return Z(t[0]-e[0])<j&&Z(t[1]-e[1])<j}function Bt(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function We(t,e,n,i,r){var l=[],a=[],p,T;if(t.forEach(function(I){if(!((b=I.length-1)<=0)){var b,L=I[0],z=I[b],O;if(Ft(L,z)){for(r.lineStart(),p=0;p<b;++p)r.point((L=I[p])[0],L[1]);r.lineEnd();return}l.push(O=new Bt(L,I,null,!0)),a.push(O.o=new Bt(L,null,O,!1)),l.push(O=new Bt(z,I,null,!1)),a.push(O.o=new Bt(z,null,O,!0))}}),!!l.length){for(a.sort(e),Le(l),Le(a),p=0,T=a.length;p<T;++p)a[p].e=n=!n;for(var y=l[0],w,x;;){for(var m=y,_=!0;m.v;)if((m=m.n)===y)return;w=m.z,r.lineStart();do{if(m.v=m.o.v=!0,m.e){if(_)for(p=0,T=w.length;p<T;++p)r.point((x=w[p])[0],x[1]);else i(m.x,m.n.x,1,r);m=m.n}else{if(_)for(w=m.p.z,p=w.length-1;p>=0;--p)r.point((x=w[p])[0],x[1]);else i(m.x,m.p.x,-1,r);m=m.p}m=m.o,w=m.z,_=!_}while(!m.v);r.lineEnd()}}}function Le(t){if(e=t.length){for(var e,n=0,i=t[0],r;++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function Ze(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function mn(t){return t.length===1&&(t=Tn(t)),{left:function(e,n,i,r){for(i==null&&(i=0),r==null&&(r=e.length);i<r;){var l=i+r>>>1;t(e[l],n)<0?i=l+1:r=l}return i},right:function(e,n,i,r){for(i==null&&(i=0),r==null&&(r=e.length);i<r;){var l=i+r>>>1;t(e[l],n)>0?r=l:i=l+1}return i}}}function Tn(t){return function(e,n){return Ze(t(e),n)}}mn(Ze);function Qe(t){for(var e=t.length,n,i=-1,r=0,l,a;++i<e;)r+=t[i].length;for(l=new Array(r);--e>=0;)for(a=t[e],n=a.length;--n>=0;)l[--r]=a[n];return l}var qt=1e9,Gt=-1e9;function Rn(t,e,n,i){function r(y,w){return t<=y&&y<=n&&e<=w&&w<=i}function l(y,w,x,m){var _=0,I=0;if(y==null||(_=a(y,x))!==(I=a(w,x))||T(y,w)<0^x>0)do m.point(_===0||_===3?t:n,_>1?i:e);while((_=(_+x+4)%4)!==I);else m.point(w[0],w[1])}function a(y,w){return Z(y[0]-t)<j?w>0?0:3:Z(y[0]-n)<j?w>0?2:1:Z(y[1]-e)<j?w>0?1:0:w>0?3:2}function p(y,w){return T(y.x,w.x)}function T(y,w){var x=a(y,1),m=a(w,1);return x!==m?x-m:x===0?w[1]-y[1]:x===1?y[0]-w[0]:x===2?y[1]-w[1]:w[0]-y[0]}return function(y){var w=y,x=Ye(),m,_,I,b,L,z,O,k,G,U,N,C={point:s,lineStart:d,lineEnd:S,polygonStart:f,polygonEnd:E};function s(c,u){r(c,u)&&w.point(c,u)}function o(){for(var c=0,u=0,v=_.length;u<v;++u)for(var g=_[u],R=1,P=g.length,M=g[0],B,F,$=M[0],q=M[1];R<P;++R)B=$,F=q,M=g[R],$=M[0],q=M[1],F<=i?q>i&&($-B)*(i-F)>(q-F)*(t-B)&&++c:q<=i&&($-B)*(i-F)<(q-F)*(t-B)&&--c;return c}function f(){w=x,m=[],_=[],N=!0}function E(){var c=o(),u=N&&c,v=(m=Qe(m)).length;(u||v)&&(y.polygonStart(),u&&(y.lineStart(),l(null,null,1,y),y.lineEnd()),v&&We(m,p,c,l,y),y.polygonEnd()),w=y,m=_=I=null}function d(){C.point=h,_&&_.push(I=[]),U=!0,G=!1,O=k=NaN}function S(){m&&(h(b,L),z&&G&&x.rejoin(),m.push(x.result())),C.point=s,G&&w.lineEnd()}function h(c,u){var v=r(c,u);if(_&&I.push([c,u]),U)b=c,L=u,z=v,U=!1,v&&(w.lineStart(),w.point(c,u));else if(v&&G)w.point(c,u);else{var g=[O=Math.max(Gt,Math.min(qt,O)),k=Math.max(Gt,Math.min(qt,k))],R=[c=Math.max(Gt,Math.min(qt,c)),u=Math.max(Gt,Math.min(qt,u))];xn(g,R,t,e,n,i)?(G||(w.lineStart(),w.point(g[0],g[1])),w.point(R[0],R[1]),v||w.lineEnd(),N=!1):v&&(w.lineStart(),w.point(c,u),N=!1)}O=c,k=u,G=v}return C}}var re=dt();function On(t,e){var n=e[0],i=e[1],r=[Y(n),-X(n),0],l=0,a=0;re.reset();for(var p=0,T=t.length;p<T;++p)if(w=(y=t[p]).length)for(var y,w,x=y[w-1],m=x[0],_=x[1]/2+Te,I=Y(_),b=X(_),L=0;L<w;++L,m=O,I=G,b=U,x=z){var z=y[L],O=z[0],k=z[1]/2+Te,G=Y(k),U=X(k),N=O-m,C=N>=0?1:-1,s=C*N,o=s>H,f=I*G;if(re.add(St(f*C*Y(s),b*U+f*X(s))),l+=o?N+C*ht:N,o^m>=n^O>=n){var E=jt(xt(x),xt(z));fe(E);var d=jt(r,E);fe(d);var S=(o^N>=0?-1:1)*wt(d[2]);(i>S||i===S&&(E[0]||E[1]))&&(a+=o^N>=0?1:-1)}}return(l<-1e-6||l<j&&re<-1e-6)^a&1}dt();function Ae(t){return t}dt();dt();var mt=1/0,Kt=mt,Lt=-mt,Xt=Lt,Ce={point:_n,lineStart:Pt,lineEnd:Pt,polygonStart:Pt,polygonEnd:Pt,result:function(){var t=[[mt,Kt],[Lt,Xt]];return Lt=Xt=-(Kt=mt=1/0),t}};function _n(t,e){t<mt&&(mt=t),t>Lt&&(Lt=t),e<Kt&&(Kt=e),e>Xt&&(Xt=e)}dt();function Je(t,e,n,i){return function(r,l){var a=e(l),p=r.invert(i[0],i[1]),T=Ye(),y=e(T),w=!1,x,m,_,I={point:b,lineStart:z,lineEnd:O,polygonStart:function(){I.point=k,I.lineStart=G,I.lineEnd=U,m=[],x=[]},polygonEnd:function(){I.point=b,I.lineStart=z,I.lineEnd=O,m=Qe(m);var N=On(x,p);m.length?(w||(l.polygonStart(),w=!0),We(m,Pn,N,n,l)):N&&(w||(l.polygonStart(),w=!0),l.lineStart(),n(null,null,1,l),l.lineEnd()),w&&(l.polygonEnd(),w=!1),m=x=null},sphere:function(){l.polygonStart(),l.lineStart(),n(null,null,1,l),l.lineEnd(),l.polygonEnd()}};function b(N,C){var s=r(N,C);t(N=s[0],C=s[1])&&l.point(N,C)}function L(N,C){var s=r(N,C);a.point(s[0],s[1])}function z(){I.point=L,a.lineStart()}function O(){I.point=b,a.lineEnd()}function k(N,C){_.push([N,C]);var s=r(N,C);y.point(s[0],s[1])}function G(){y.lineStart(),_=[]}function U(){k(_[0][0],_[0][1]),y.lineEnd();var N=y.clean(),C=T.result(),s,o=C.length,f,E,d;if(_.pop(),x.push(_),_=null,!!o){if(N&1){if(E=C[0],(f=E.length-1)>0){for(w||(l.polygonStart(),w=!0),l.lineStart(),s=0;s<f;++s)l.point((d=E[s])[0],d[1]);l.lineEnd()}return}o>1&&N&2&&C.push(C.pop().concat(C.shift())),m.push(C.filter(In))}}return I}}function In(t){return t.length>1}function Pn(t,e){return((t=t.x)[0]<0?t[1]-ct-j:ct-t[1])-((e=e.x)[0]<0?e[1]-ct-j:ct-e[1])}const be=Je(function(){return!0},Nn,Ln,[-H,-ct]);function Nn(t){var e=NaN,n=NaN,i=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(l,a){var p=l>0?H:-H,T=Z(l-e);Z(T-H)<j?(t.point(e,n=(n+a)/2>0?ct:-ct),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(p,n),t.point(l,n),r=0):i!==p&&T>=H&&(Z(e-i)<j&&(e-=i*j),Z(l-p)<j&&(l-=p*j),n=Mn(e,n,l,a),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(p,n),r=0),t.point(e=l,n=a),i=p},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-r}}}function Mn(t,e,n,i){var r,l,a=Y(t-n);return Z(a)>j?dn((Y(e)*(l=X(i))*Y(n)-Y(i)*(r=X(e))*Y(t))/(r*l*a)):(e+i)/2}function Ln(t,e,n,i){var r;if(t==null)r=n*ct,i.point(-H,r),i.point(0,r),i.point(H,r),i.point(H,0),i.point(H,-r),i.point(0,-r),i.point(-H,-r),i.point(-H,0),i.point(-H,r);else if(Z(t[0]-e[0])>j){var l=t[0]<e[0]?H:-H;r=n*l/2,i.point(-l,r),i.point(0,r),i.point(l,r)}else i.point(e[0],e[1])}function An(t,e){var n=X(t),i=n>0,r=Z(n)>j;function l(w,x,m,_){Sn(_,t,e,m,w,x)}function a(w,x){return X(w)*X(x)>n}function p(w){var x,m,_,I,b;return{lineStart:function(){I=_=!1,b=1},point:function(L,z){var O=[L,z],k,G=a(L,z),U=i?G?0:y(L,z):G?y(L+(L<0?H:-H),z):0;if(!x&&(I=_=G)&&w.lineStart(),G!==_&&(k=T(x,O),(!k||Ft(x,k)||Ft(O,k))&&(O[0]+=j,O[1]+=j,G=a(O[0],O[1]))),G!==_)b=0,G?(w.lineStart(),k=T(O,x),w.point(k[0],k[1])):(k=T(x,O),w.point(k[0],k[1]),w.lineEnd()),x=k;else if(r&&x&&i^G){var N;!(U&m)&&(N=T(O,x,!0))&&(b=0,i?(w.lineStart(),w.point(N[0][0],N[0][1]),w.point(N[1][0],N[1][1]),w.lineEnd()):(w.point(N[1][0],N[1][1]),w.lineEnd(),w.lineStart(),w.point(N[0][0],N[0][1])))}G&&(!x||!Ft(x,O))&&w.point(O[0],O[1]),x=O,_=G,m=U},lineEnd:function(){_&&w.lineEnd(),x=null},clean:function(){return b|(I&&_)<<1}}}function T(w,x,m){var _=xt(w),I=xt(x),b=[1,0,0],L=jt(_,I),z=bt(L,L),O=L[0],k=z-O*O;if(!k)return!m&&w;var G=n*z/k,U=-n*O/k,N=jt(b,L),C=kt(b,G),s=kt(L,U);ie(C,s);var o=N,f=bt(C,o),E=bt(o,o),d=f*f-E*(bt(C,C)-1);if(!(d<0)){var S=Tt(d),h=kt(o,(-f-S)/E);if(ie(h,C),h=ue(h),!m)return h;var c=w[0],u=x[0],v=w[1],g=x[1],R;u<c&&(R=c,c=u,u=R);var P=u-c,M=Z(P-H)<j,B=M||P<j;if(!M&&g<v&&(R=v,v=g,g=R),B?M?v+g>0^h[1]<(Z(h[0]-c)<j?v:g):v<=h[1]&&h[1]<=g:P>H^(c<=h[0]&&h[0]<=u)){var F=kt(o,(-f+S)/E);return ie(F,C),[h,ue(F)]}}}function y(w,x){var m=i?t:H-t,_=0;return w<-m?_|=1:w>m&&(_|=2),x<-m?_|=4:x>m&&(_|=8),_}return Je(a,p,l,i?[0,-t]:[-H,t-H])}function tn(t){return function(e){var n=new ae;for(var i in t)n[i]=t[i];return n.stream=e,n}}function ae(){}ae.prototype={constructor:ae,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function en(t,e,n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],l=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),l!=null&&t.clipExtent(null),En(n,t.stream(Ce));var a=Ce.result(),p=Math.min(i/(a[1][0]-a[0][0]),r/(a[1][1]-a[0][1])),T=+e[0][0]+(i-p*(a[1][0]+a[0][0]))/2,y=+e[0][1]+(r-p*(a[1][1]+a[0][1]))/2;return l!=null&&t.clipExtent(l),t.scale(p*150).translate([T,y])}function Cn(t,e,n){return en(t,[[0,0],e],n)}var ke=16,bn=X(30*ot);function Be(t,e){return+e?Bn(t,e):kn(t)}function kn(t){return tn({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Bn(t,e){function n(i,r,l,a,p,T,y,w,x,m,_,I,b,L){var z=y-i,O=w-r,k=z*z+O*O;if(k>4*e&&b--){var G=a+m,U=p+_,N=T+I,C=Tt(G*G+U*U+N*N),s=wt(N/=C),o=Z(Z(N)-1)<j||Z(l-x)<j?(l+x)/2:St(U,G),f=t(o,s),E=f[0],d=f[1],S=E-i,h=d-r,c=O*S-z*h;(c*c/k>e||Z((z*S+O*h)/k-.5)>.3||a*m+p*_+T*I<bn)&&(n(i,r,l,a,p,T,E,d,o,G/=C,U/=C,N,b,L),L.point(E,d),n(E,d,o,G,U,N,y,w,x,m,_,I,b,L))}}return function(i){var r,l,a,p,T,y,w,x,m,_,I,b,L={point:z,lineStart:O,lineEnd:G,polygonStart:function(){i.polygonStart(),L.lineStart=U},polygonEnd:function(){i.polygonEnd(),L.lineStart=O}};function z(s,o){s=t(s,o),i.point(s[0],s[1])}function O(){x=NaN,L.point=k,i.lineStart()}function k(s,o){var f=xt([s,o]),E=t(s,o);n(x,m,w,_,I,b,x=E[0],m=E[1],w=s,_=f[0],I=f[1],b=f[2],ke,i),i.point(x,m)}function G(){L.point=z,i.lineEnd()}function U(){O(),L.point=N,L.lineEnd=C}function N(s,o){k(r=s,o),l=x,a=m,p=_,T=I,y=b,L.point=k}function C(){n(x,m,w,_,I,b,l,a,r,p,T,y,ke,i),L.lineEnd=G,G()}return L}}var qn=tn({point:function(t,e){this.stream.point(t*ot,e*ot)}});function Gn(t){return Dn(function(){return t})()}function Dn(t){var e,n=150,i=480,r=250,l,a,p=0,T=0,y=0,w=0,x=0,m,_,I=null,b=be,L=null,z,O,k,G=Ae,U=.5,N=Be(E,U),C,s;function o(h){return h=_(h[0]*ot,h[1]*ot),[h[0]*n+l,a-h[1]*n]}function f(h){return h=_.invert((h[0]-l)/n,(a-h[1])/n),h&&[h[0]*yt,h[1]*yt]}function E(h,c){return h=e(h,c),[h[0]*n+l,a-h[1]*n]}o.stream=function(h){return C&&s===h?C:C=qn(b(m,N(G(s=h))))},o.clipAngle=function(h){return arguments.length?(b=+h?An(I=h*ot,6*ot):(I=null,be),S()):I*yt},o.clipExtent=function(h){return arguments.length?(G=h==null?(L=z=O=k=null,Ae):Rn(L=+h[0][0],z=+h[0][1],O=+h[1][0],k=+h[1][1]),S()):L==null?null:[[L,z],[O,k]]},o.scale=function(h){return arguments.length?(n=+h,d()):n},o.translate=function(h){return arguments.length?(i=+h[0],r=+h[1],d()):[i,r]},o.center=function(h){return arguments.length?(p=h[0]%360*ot,T=h[1]%360*ot,d()):[p*yt,T*yt]},o.rotate=function(h){return arguments.length?(y=h[0]%360*ot,w=h[1]%360*ot,x=h.length>2?h[2]%360*ot:0,d()):[y*yt,w*yt,x*yt]},o.precision=function(h){return arguments.length?(N=Be(E,U=h*h),S()):Tt(U)},o.fitExtent=function(h,c){return en(o,h,c)},o.fitSize=function(h,c){return Cn(o,h,c)};function d(){_=Xe(m=wn(y,w,x),e);var h=e(p,T);return l=i-h[0]*n,a=r+h[1]*n,S()}function S(){return C=s=null,o}return function(){return e=t.apply(this,arguments),o.invert=e.invert&&f,d()}}function nn(t){return function(e,n){var i=X(e),r=X(n),l=t(i*r);return[l*r*Y(e),l*Y(n)]}}function rn(t){return function(e,n){var i=Tt(e*e+n*n),r=t(i),l=Y(r),a=X(r);return[St(e*l,i*a),wt(i&&n*l/i)]}}var zn=nn(function(t){return Tt(2/(1+t))});zn.invert=rn(function(t){return 2*wt(t/2)});var sn=nn(function(t){return(t=Ke(t))&&t/Y(t)});sn.invert=rn(function(t){return t});function ci(){return Gn(sn).scale(79.4188).clipAngle(180-.001)}function qe(t,e){return[t,e]}qe.invert=qe;var Fn=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,se=Math.ceil,rt=Math.floor,tt="[BigNumber Error] ",Ge=tt+"Number primitive has more than 15 significant digits: ",lt=1e14,D=14,De=9007199254740991,oe=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],vt=1e7,et=1e9;function on(t){var e,n,i,r=O.prototype={constructor:O,toString:null,valueOf:null},l=new O(1),a=20,p=4,T=-7,y=21,w=-1e7,x=1e7,m=!1,_=1,I=0,b={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},L="0123456789abcdefghijklmnopqrstuvwxyz",z=!0;function O(s,o){var f,E,d,S,h,c,u,v,g=this;if(!(g instanceof O))return new O(s,o);if(o==null){if(s&&s._isBigNumber===!0){g.s=s.s,!s.c||s.e>x?g.c=g.e=null:s.e<w?g.c=[g.e=0]:(g.e=s.e,g.c=s.c.slice());return}if((c=typeof s=="number")&&s*0==0){if(g.s=1/s<0?(s=-s,-1):1,s===~~s){for(S=0,h=s;h>=10;h/=10,S++);S>x?g.c=g.e=null:(g.e=S,g.c=[s]);return}v=String(s)}else{if(!Fn.test(v=String(s)))return i(g,v,c);g.s=v.charCodeAt(0)==45?(v=v.slice(1),-1):1}(S=v.indexOf("."))>-1&&(v=v.replace(".","")),(h=v.search(/e/i))>0?(S<0&&(S=h),S+=+v.slice(h+1),v=v.substring(0,h)):S<0&&(S=v.length)}else{if(K(o,2,L.length,"Base"),o==10&&z)return g=new O(s),N(g,a+g.e+1,p);if(v=String(s),c=typeof s=="number"){if(s*0!=0)return i(g,v,c,o);if(g.s=1/s<0?(v=v.slice(1),-1):1,O.DEBUG&&v.replace(/^0\.0*|\./,"").length>15)throw Error(Ge+s)}else g.s=v.charCodeAt(0)===45?(v=v.slice(1),-1):1;for(f=L.slice(0,o),S=h=0,u=v.length;h<u;h++)if(f.indexOf(E=v.charAt(h))<0){if(E=="."){if(h>S){S=u;continue}}else if(!d&&(v==v.toUpperCase()&&(v=v.toLowerCase())||v==v.toLowerCase()&&(v=v.toUpperCase()))){d=!0,h=-1,S=0;continue}return i(g,String(s),c,o)}c=!1,v=n(v,o,10,g.s),(S=v.indexOf("."))>-1?v=v.replace(".",""):S=v.length}for(h=0;v.charCodeAt(h)===48;h++);for(u=v.length;v.charCodeAt(--u)===48;);if(v=v.slice(h,++u)){if(u-=h,c&&O.DEBUG&&u>15&&(s>De||s!==rt(s)))throw Error(Ge+g.s*s);if((S=S-h-1)>x)g.c=g.e=null;else if(S<w)g.c=[g.e=0];else{if(g.e=S,g.c=[],h=(S+1)%D,S<0&&(h+=D),h<u){for(h&&g.c.push(+v.slice(0,h)),u-=D;h<u;)g.c.push(+v.slice(h,h+=D));h=D-(v=v.slice(h)).length}else h-=u;for(;h--;v+="0");g.c.push(+v)}}else g.c=[g.e=0]}O.clone=on,O.ROUND_UP=0,O.ROUND_DOWN=1,O.ROUND_CEIL=2,O.ROUND_FLOOR=3,O.ROUND_HALF_UP=4,O.ROUND_HALF_DOWN=5,O.ROUND_HALF_EVEN=6,O.ROUND_HALF_CEIL=7,O.ROUND_HALF_FLOOR=8,O.EUCLID=9,O.config=O.set=function(s){var o,f;if(s!=null)if(typeof s=="object"){if(s.hasOwnProperty(o="DECIMAL_PLACES")&&(f=s[o],K(f,0,et,o),a=f),s.hasOwnProperty(o="ROUNDING_MODE")&&(f=s[o],K(f,0,8,o),p=f),s.hasOwnProperty(o="EXPONENTIAL_AT")&&(f=s[o],f&&f.pop?(K(f[0],-1e9,0,o),K(f[1],0,et,o),T=f[0],y=f[1]):(K(f,-1e9,et,o),T=-(y=f<0?-f:f))),s.hasOwnProperty(o="RANGE"))if(f=s[o],f&&f.pop)K(f[0],-1e9,-1,o),K(f[1],1,et,o),w=f[0],x=f[1];else if(K(f,-1e9,et,o),f)w=-(x=f<0?-f:f);else throw Error(tt+o+" cannot be zero: "+f);if(s.hasOwnProperty(o="CRYPTO"))if(f=s[o],f===!!f)if(f)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))m=f;else throw m=!f,Error(tt+"crypto unavailable");else m=f;else throw Error(tt+o+" not true or false: "+f);if(s.hasOwnProperty(o="MODULO_MODE")&&(f=s[o],K(f,0,9,o),_=f),s.hasOwnProperty(o="POW_PRECISION")&&(f=s[o],K(f,0,et,o),I=f),s.hasOwnProperty(o="FORMAT"))if(f=s[o],typeof f=="object")b=f;else throw Error(tt+o+" not an object: "+f);if(s.hasOwnProperty(o="ALPHABET"))if(f=s[o],typeof f=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(f))z=f.slice(0,10)=="0123456789",L=f;else throw Error(tt+o+" invalid: "+f)}else throw Error(tt+"Object expected: "+s);return{DECIMAL_PLACES:a,ROUNDING_MODE:p,EXPONENTIAL_AT:[T,y],RANGE:[w,x],CRYPTO:m,MODULO_MODE:_,POW_PRECISION:I,FORMAT:b,ALPHABET:L}},O.isBigNumber=function(s){if(!s||s._isBigNumber!==!0)return!1;if(!O.DEBUG)return!0;var o,f,E=s.c,d=s.e,S=s.s;t:if({}.toString.call(E)=="[object Array]"){if((S===1||S===-1)&&d>=-1e9&&d<=et&&d===rt(d)){if(E[0]===0){if(d===0&&E.length===1)return!0;break t}if(o=(d+1)%D,o<1&&(o+=D),String(E[0]).length==o){for(o=0;o<E.length;o++)if(f=E[o],f<0||f>=lt||f!==rt(f))break t;if(f!==0)return!0}}}else if(E===null&&d===null&&(S===null||S===1||S===-1))return!0;throw Error(tt+"Invalid BigNumber: "+s)},O.maximum=O.max=function(){return G(arguments,-1)},O.minimum=O.min=function(){return G(arguments,1)},O.random=function(){var s=9007199254740992,o=Math.random()*s&2097151?function(){return rt(Math.random()*s)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(f){var E,d,S,h,c,u=0,v=[],g=new O(l);if(f==null?f=a:K(f,0,et),h=se(f/D),m)if(crypto.getRandomValues){for(E=crypto.getRandomValues(new Uint32Array(h*=2));u<h;)c=E[u]*131072+(E[u+1]>>>11),c>=9e15?(d=crypto.getRandomValues(new Uint32Array(2)),E[u]=d[0],E[u+1]=d[1]):(v.push(c%1e14),u+=2);u=h/2}else if(crypto.randomBytes){for(E=crypto.randomBytes(h*=7);u<h;)c=(E[u]&31)*281474976710656+E[u+1]*1099511627776+E[u+2]*4294967296+E[u+3]*16777216+(E[u+4]<<16)+(E[u+5]<<8)+E[u+6],c>=9e15?crypto.randomBytes(7).copy(E,u):(v.push(c%1e14),u+=7);u=h/7}else throw m=!1,Error(tt+"crypto unavailable");if(!m)for(;u<h;)c=o(),c<9e15&&(v[u++]=c%1e14);for(h=v[--u],f%=D,h&&f&&(c=oe[D-f],v[u]=rt(h/c)*c);v[u]===0;v.pop(),u--);if(u<0)v=[S=0];else{for(S=-1;v[0]===0;v.splice(0,1),S-=D);for(u=1,c=v[0];c>=10;c/=10,u++);u<D&&(S-=D-u)}return g.e=S,g.c=v,g}}(),O.sum=function(){for(var s=1,o=arguments,f=new O(o[0]);s<o.length;)f=f.plus(o[s++]);return f},n=function(){var s="0123456789";function o(f,E,d,S){for(var h,c=[0],u,v=0,g=f.length;v<g;){for(u=c.length;u--;c[u]*=E);for(c[0]+=S.indexOf(f.charAt(v++)),h=0;h<c.length;h++)c[h]>d-1&&(c[h+1]==null&&(c[h+1]=0),c[h+1]+=c[h]/d|0,c[h]%=d)}return c.reverse()}return function(f,E,d,S,h){var c,u,v,g,R,P,M,B,F=f.indexOf("."),$=a,q=p;for(F>=0&&(g=I,I=0,f=f.replace(".",""),B=new O(E),P=B.pow(f.length-F),I=g,B.c=o(pt(it(P.c),P.e,"0"),10,d,s),B.e=B.c.length),M=o(f,E,d,h?(c=L,s):(c=s,L)),v=g=M.length;M[--g]==0;M.pop());if(!M[0])return c.charAt(0);if(F<0?--v:(P.c=M,P.e=v,P.s=S,P=e(P,B,$,q,d),M=P.c,R=P.r,v=P.e),u=v+$+1,F=M[u],g=d/2,R=R||u<0||M[u+1]!=null,R=q<4?(F!=null||R)&&(q==0||q==(P.s<0?3:2)):F>g||F==g&&(q==4||R||q==6&&M[u-1]&1||q==(P.s<0?8:7)),u<1||!M[0])f=R?pt(c.charAt(1),-$,c.charAt(0)):c.charAt(0);else{if(M.length=u,R)for(--d;++M[--u]>d;)M[u]=0,u||(++v,M=[1].concat(M));for(g=M.length;!M[--g];);for(F=0,f="";F<=g;f+=c.charAt(M[F++]));f=pt(f,v,c.charAt(0))}return f}}(),e=function(){function s(E,d,S){var h,c,u,v,g=0,R=E.length,P=d%vt,M=d/vt|0;for(E=E.slice();R--;)u=E[R]%vt,v=E[R]/vt|0,h=M*u+v*P,c=P*u+h%vt*vt+g,g=(c/S|0)+(h/vt|0)+M*v,E[R]=c%S;return g&&(E=[g].concat(E)),E}function o(E,d,S,h){var c,u;if(S!=h)u=S>h?1:-1;else for(c=u=0;c<S;c++)if(E[c]!=d[c]){u=E[c]>d[c]?1:-1;break}return u}function f(E,d,S,h){for(var c=0;S--;)E[S]-=c,c=E[S]<d[S]?1:0,E[S]=c*h+E[S]-d[S];for(;!E[0]&&E.length>1;E.splice(0,1));}return function(E,d,S,h,c){var u,v,g,R,P,M,B,F,$,q,V,Q,At,Qt,Jt,ut,Rt,nt=E.s==d.s?1:-1,J=E.c,W=d.c;if(!J||!J[0]||!W||!W[0])return new O(!E.s||!d.s||(J?W&&J[0]==W[0]:!W)?NaN:J&&J[0]==0||!W?nt*0:nt/0);for(F=new O(nt),$=F.c=[],v=E.e-d.e,nt=S+v+1,c||(c=lt,v=st(E.e/D)-st(d.e/D),nt=nt/D|0),g=0;W[g]==(J[g]||0);g++);if(W[g]>(J[g]||0)&&v--,nt<0)$.push(1),R=!0;else{for(Qt=J.length,ut=W.length,g=0,nt+=2,P=rt(c/(W[0]+1)),P>1&&(W=s(W,P,c),J=s(J,P,c),ut=W.length,Qt=J.length),At=ut,q=J.slice(0,ut),V=q.length;V<ut;q[V++]=0);Rt=W.slice(),Rt=[0].concat(Rt),Jt=W[0],W[1]>=c/2&&Jt++;do{if(P=0,u=o(W,q,ut,V),u<0){if(Q=q[0],ut!=V&&(Q=Q*c+(q[1]||0)),P=rt(Q/Jt),P>1)for(P>=c&&(P=c-1),M=s(W,P,c),B=M.length,V=q.length;o(M,q,B,V)==1;)P--,f(M,ut<B?Rt:W,B,c),B=M.length,u=1;else P==0&&(u=P=1),M=W.slice(),B=M.length;if(B<V&&(M=[0].concat(M)),f(q,M,V,c),V=q.length,u==-1)for(;o(W,q,ut,V)<1;)P++,f(q,ut<V?Rt:W,V,c),V=q.length}else u===0&&(P++,q=[0]);$[g++]=P,q[0]?q[V++]=J[At]||0:(q=[J[At]],V=1)}while((At++<Qt||q[0]!=null)&&nt--);R=q[0]!=null,$[0]||$.splice(0,1)}if(c==lt){for(g=1,nt=$[0];nt>=10;nt/=10,g++);N(F,S+(F.e=g+v*D-1)+1,h,R)}else F.e=v,F.r=+R;return F}}();function k(s,o,f,E){var d,S,h,c,u;if(f==null?f=p:K(f,0,8),!s.c)return s.toString();if(d=s.c[0],h=s.e,o==null)u=it(s.c),u=E==1||E==2&&(h<=T||h>=y)?zt(u,h):pt(u,h,"0");else if(s=N(new O(s),o,f),S=s.e,u=it(s.c),c=u.length,E==1||E==2&&(o<=S||S<=T)){for(;c<o;u+="0",c++);u=zt(u,S)}else if(o-=h,u=pt(u,S,"0"),S+1>c){if(--o>0)for(u+=".";o--;u+="0");}else if(o+=S-c,o>0)for(S+1==c&&(u+=".");o--;u+="0");return s.s<0&&d?"-"+u:u}function G(s,o){for(var f,E,d=1,S=new O(s[0]);d<s.length;d++)E=new O(s[d]),(!E.s||(f=Et(S,E))===o||f===0&&S.s===o)&&(S=E);return S}function U(s,o,f){for(var E=1,d=o.length;!o[--d];o.pop());for(d=o[0];d>=10;d/=10,E++);return(f=E+f*D-1)>x?s.c=s.e=null:f<w?s.c=[s.e=0]:(s.e=f,s.c=o),s}i=function(){var s=/^(-?)0([xbo])(?=\w[\w.]*$)/i,o=/^([^.]+)\.$/,f=/^\.([^.]+)$/,E=/^-?(Infinity|NaN)$/,d=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(S,h,c,u){var v,g=c?h:h.replace(d,"");if(E.test(g))S.s=isNaN(g)?null:g<0?-1:1;else{if(!c&&(g=g.replace(s,function(R,P,M){return v=(M=M.toLowerCase())=="x"?16:M=="b"?2:8,!u||u==v?P:R}),u&&(v=u,g=g.replace(o,"$1").replace(f,"0.$1")),h!=g))return new O(g,v);if(O.DEBUG)throw Error(tt+"Not a"+(u?" base "+u:"")+" number: "+h);S.s=null}S.c=S.e=null}}();function N(s,o,f,E){var d,S,h,c,u,v,g,R=s.c,P=oe;if(R){t:{for(d=1,c=R[0];c>=10;c/=10,d++);if(S=o-d,S<0)S+=D,h=o,u=R[v=0],g=rt(u/P[d-h-1]%10);else if(v=se((S+1)/D),v>=R.length)if(E){for(;R.length<=v;R.push(0));u=g=0,d=1,S%=D,h=S-D+1}else break t;else{for(u=c=R[v],d=1;c>=10;c/=10,d++);S%=D,h=S-D+d,g=h<0?0:rt(u/P[d-h-1]%10)}if(E=E||o<0||R[v+1]!=null||(h<0?u:u%P[d-h-1]),E=f<4?(g||E)&&(f==0||f==(s.s<0?3:2)):g>5||g==5&&(f==4||E||f==6&&(S>0?h>0?u/P[d-h]:0:R[v-1])%10&1||f==(s.s<0?8:7)),o<1||!R[0])return R.length=0,E?(o-=s.e+1,R[0]=P[(D-o%D)%D],s.e=-o||0):R[0]=s.e=0,s;if(S==0?(R.length=v,c=1,v--):(R.length=v+1,c=P[D-S],R[v]=h>0?rt(u/P[d-h]%P[h])*c:0),E)for(;;)if(v==0){for(S=1,h=R[0];h>=10;h/=10,S++);for(h=R[0]+=c,c=1;h>=10;h/=10,c++);S!=c&&(s.e++,R[0]==lt&&(R[0]=1));break}else{if(R[v]+=c,R[v]!=lt)break;R[v--]=0,c=1}for(S=R.length;R[--S]===0;R.pop());}s.e>x?s.c=s.e=null:s.e<w&&(s.c=[s.e=0])}return s}function C(s){var o,f=s.e;return f===null?s.toString():(o=it(s.c),o=f<=T||f>=y?zt(o,f):pt(o,f,"0"),s.s<0?"-"+o:o)}return r.absoluteValue=r.abs=function(){var s=new O(this);return s.s<0&&(s.s=1),s},r.comparedTo=function(s,o){return Et(this,new O(s,o))},r.decimalPlaces=r.dp=function(s,o){var f,E,d,S=this;if(s!=null)return K(s,0,et),o==null?o=p:K(o,0,8),N(new O(S),s+S.e+1,o);if(!(f=S.c))return null;if(E=((d=f.length-1)-st(this.e/D))*D,d=f[d])for(;d%10==0;d/=10,E--);return E<0&&(E=0),E},r.dividedBy=r.div=function(s,o){return e(this,new O(s,o),a,p)},r.dividedToIntegerBy=r.idiv=function(s,o){return e(this,new O(s,o),0,1)},r.exponentiatedBy=r.pow=function(s,o){var f,E,d,S,h,c,u,v,g,R=this;if(s=new O(s),s.c&&!s.isInteger())throw Error(tt+"Exponent not an integer: "+C(s));if(o!=null&&(o=new O(o)),c=s.e>14,!R.c||!R.c[0]||R.c[0]==1&&!R.e&&R.c.length==1||!s.c||!s.c[0])return g=new O(Math.pow(+C(R),c?s.s*(2-Dt(s)):+C(s))),o?g.mod(o):g;if(u=s.s<0,o){if(o.c?!o.c[0]:!o.s)return new O(NaN);E=!u&&R.isInteger()&&o.isInteger(),E&&(R=R.mod(o))}else{if(s.e>9&&(R.e>0||R.e<-1||(R.e==0?R.c[0]>1||c&&R.c[1]>=24e7:R.c[0]<8e13||c&&R.c[0]<=9999975e7)))return S=R.s<0&&Dt(s)?-0:0,R.e>-1&&(S=1/S),new O(u?1/S:S);I&&(S=se(I/D+2))}for(c?(f=new O(.5),u&&(s.s=1),v=Dt(s)):(d=Math.abs(+C(s)),v=d%2),g=new O(l);;){if(v){if(g=g.times(R),!g.c)break;S?g.c.length>S&&(g.c.length=S):E&&(g=g.mod(o))}if(d){if(d=rt(d/2),d===0)break;v=d%2}else if(s=s.times(f),N(s,s.e+1,1),s.e>14)v=Dt(s);else{if(d=+C(s),d===0)break;v=d%2}R=R.times(R),S?R.c&&R.c.length>S&&(R.c.length=S):E&&(R=R.mod(o))}return E?g:(u&&(g=l.div(g)),o?g.mod(o):S?N(g,I,p,h):g)},r.integerValue=function(s){var o=new O(this);return s==null?s=p:K(s,0,8),N(o,o.e+1,s)},r.isEqualTo=r.eq=function(s,o){return Et(this,new O(s,o))===0},r.isFinite=function(){return!!this.c},r.isGreaterThan=r.gt=function(s,o){return Et(this,new O(s,o))>0},r.isGreaterThanOrEqualTo=r.gte=function(s,o){return(o=Et(this,new O(s,o)))===1||o===0},r.isInteger=function(){return!!this.c&&st(this.e/D)>this.c.length-2},r.isLessThan=r.lt=function(s,o){return Et(this,new O(s,o))<0},r.isLessThanOrEqualTo=r.lte=function(s,o){return(o=Et(this,new O(s,o)))===-1||o===0},r.isNaN=function(){return!this.s},r.isNegative=function(){return this.s<0},r.isPositive=function(){return this.s>0},r.isZero=function(){return!!this.c&&this.c[0]==0},r.minus=function(s,o){var f,E,d,S,h=this,c=h.s;if(s=new O(s,o),o=s.s,!c||!o)return new O(NaN);if(c!=o)return s.s=-o,h.plus(s);var u=h.e/D,v=s.e/D,g=h.c,R=s.c;if(!u||!v){if(!g||!R)return g?(s.s=-o,s):new O(R?h:NaN);if(!g[0]||!R[0])return R[0]?(s.s=-o,s):new O(g[0]?h:p==3?-0:0)}if(u=st(u),v=st(v),g=g.slice(),c=u-v){for((S=c<0)?(c=-c,d=g):(v=u,d=R),d.reverse(),o=c;o--;d.push(0));d.reverse()}else for(E=(S=(c=g.length)<(o=R.length))?c:o,c=o=0;o<E;o++)if(g[o]!=R[o]){S=g[o]<R[o];break}if(S&&(d=g,g=R,R=d,s.s=-s.s),o=(E=R.length)-(f=g.length),o>0)for(;o--;g[f++]=0);for(o=lt-1;E>c;){if(g[--E]<R[E]){for(f=E;f&&!g[--f];g[f]=o);--g[f],g[E]+=lt}g[E]-=R[E]}for(;g[0]==0;g.splice(0,1),--v);return g[0]?U(s,g,v):(s.s=p==3?-1:1,s.c=[s.e=0],s)},r.modulo=r.mod=function(s,o){var f,E,d=this;return s=new O(s,o),!d.c||!s.s||s.c&&!s.c[0]?new O(NaN):!s.c||d.c&&!d.c[0]?new O(d):(_==9?(E=s.s,s.s=1,f=e(d,s,0,3),s.s=E,f.s*=E):f=e(d,s,0,_),s=d.minus(f.times(s)),!s.c[0]&&_==1&&(s.s=d.s),s)},r.multipliedBy=r.times=function(s,o){var f,E,d,S,h,c,u,v,g,R,P,M,B,F,$,q=this,V=q.c,Q=(s=new O(s,o)).c;if(!V||!Q||!V[0]||!Q[0])return!q.s||!s.s||V&&!V[0]&&!Q||Q&&!Q[0]&&!V?s.c=s.e=s.s=null:(s.s*=q.s,!V||!Q?s.c=s.e=null:(s.c=[0],s.e=0)),s;for(E=st(q.e/D)+st(s.e/D),s.s*=q.s,u=V.length,R=Q.length,u<R&&(B=V,V=Q,Q=B,d=u,u=R,R=d),d=u+R,B=[];d--;B.push(0));for(F=lt,$=vt,d=R;--d>=0;){for(f=0,P=Q[d]%$,M=Q[d]/$|0,h=u,S=d+h;S>d;)v=V[--h]%$,g=V[h]/$|0,c=M*v+g*P,v=P*v+c%$*$+B[S]+f,f=(v/F|0)+(c/$|0)+M*g,B[S--]=v%F;B[S]=f}return f?++E:B.splice(0,1),U(s,B,E)},r.negated=function(){var s=new O(this);return s.s=-s.s||null,s},r.plus=function(s,o){var f,E=this,d=E.s;if(s=new O(s,o),o=s.s,!d||!o)return new O(NaN);if(d!=o)return s.s=-o,E.minus(s);var S=E.e/D,h=s.e/D,c=E.c,u=s.c;if(!S||!h){if(!c||!u)return new O(d/0);if(!c[0]||!u[0])return u[0]?s:new O(c[0]?E:d*0)}if(S=st(S),h=st(h),c=c.slice(),d=S-h){for(d>0?(h=S,f=u):(d=-d,f=c),f.reverse();d--;f.push(0));f.reverse()}for(d=c.length,o=u.length,d-o<0&&(f=u,u=c,c=f,o=d),d=0;o;)d=(c[--o]=c[o]+u[o]+d)/lt|0,c[o]=lt===c[o]?0:c[o]%lt;return d&&(c=[d].concat(c),++h),U(s,c,h)},r.precision=r.sd=function(s,o){var f,E,d,S=this;if(s!=null&&s!==!!s)return K(s,1,et),o==null?o=p:K(o,0,8),N(new O(S),s,o);if(!(f=S.c))return null;if(d=f.length-1,E=d*D+1,d=f[d]){for(;d%10==0;d/=10,E--);for(d=f[0];d>=10;d/=10,E++);}return s&&S.e+1>E&&(E=S.e+1),E},r.shiftedBy=function(s){return K(s,-9007199254740991,De),this.times("1e"+s)},r.squareRoot=r.sqrt=function(){var s,o,f,E,d,S=this,h=S.c,c=S.s,u=S.e,v=a+4,g=new O("0.5");if(c!==1||!h||!h[0])return new O(!c||c<0&&(!h||h[0])?NaN:h?S:1/0);if(c=Math.sqrt(+C(S)),c==0||c==1/0?(o=it(h),(o.length+u)%2==0&&(o+="0"),c=Math.sqrt(+o),u=st((u+1)/2)-(u<0||u%2),c==1/0?o="5e"+u:(o=c.toExponential(),o=o.slice(0,o.indexOf("e")+1)+u),f=new O(o)):f=new O(c+""),f.c[0]){for(u=f.e,c=u+v,c<3&&(c=0);;)if(d=f,f=g.times(d.plus(e(S,d,v,1))),it(d.c).slice(0,c)===(o=it(f.c)).slice(0,c))if(f.e<u&&--c,o=o.slice(c-3,c+1),o=="9999"||!E&&o=="4999"){if(!E&&(N(d,d.e+a+2,0),d.times(d).eq(S))){f=d;break}v+=4,c+=4,E=1}else{(!+o||!+o.slice(1)&&o.charAt(0)=="5")&&(N(f,f.e+a+2,1),s=!f.times(f).eq(S));break}}return N(f,f.e+a+1,p,s)},r.toExponential=function(s,o){return s!=null&&(K(s,0,et),s++),k(this,s,o,1)},r.toFixed=function(s,o){return s!=null&&(K(s,0,et),s=s+this.e+1),k(this,s,o)},r.toFormat=function(s,o,f){var E,d=this;if(f==null)s!=null&&o&&typeof o=="object"?(f=o,o=null):s&&typeof s=="object"?(f=s,s=o=null):f=b;else if(typeof f!="object")throw Error(tt+"Argument not an object: "+f);if(E=d.toFixed(s,o),d.c){var S,h=E.split("."),c=+f.groupSize,u=+f.secondaryGroupSize,v=f.groupSeparator||"",g=h[0],R=h[1],P=d.s<0,M=P?g.slice(1):g,B=M.length;if(u&&(S=c,c=u,u=S,B-=S),c>0&&B>0){for(S=B%c||c,g=M.substr(0,S);S<B;S+=c)g+=v+M.substr(S,c);u>0&&(g+=v+M.slice(S)),P&&(g="-"+g)}E=R?g+(f.decimalSeparator||"")+((u=+f.fractionGroupSize)?R.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(f.fractionGroupSeparator||"")):R):g}return(f.prefix||"")+E+(f.suffix||"")},r.toFraction=function(s){var o,f,E,d,S,h,c,u,v,g,R,P,M=this,B=M.c;if(s!=null&&(c=new O(s),!c.isInteger()&&(c.c||c.s!==1)||c.lt(l)))throw Error(tt+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+C(c));if(!B)return new O(M);for(o=new O(l),v=f=new O(l),E=u=new O(l),P=it(B),S=o.e=P.length-M.e-1,o.c[0]=oe[(h=S%D)<0?D+h:h],s=!s||c.comparedTo(o)>0?S>0?o:v:c,h=x,x=1/0,c=new O(P),u.c[0]=0;g=e(c,o,0,1),d=f.plus(g.times(E)),d.comparedTo(s)!=1;)f=E,E=d,v=u.plus(g.times(d=v)),u=d,o=c.minus(g.times(d=o)),c=d;return d=e(s.minus(f),E,0,1),u=u.plus(d.times(v)),f=f.plus(d.times(E)),u.s=v.s=M.s,S=S*2,R=e(v,E,S,p).minus(M).abs().comparedTo(e(u,f,S,p).minus(M).abs())<1?[v,E]:[u,f],x=h,R},r.toNumber=function(){return+C(this)},r.toPrecision=function(s,o){return s!=null&&K(s,1,et),k(this,s,o,2)},r.toString=function(s){var o,f=this,E=f.s,d=f.e;return d===null?E?(o="Infinity",E<0&&(o="-"+o)):o="NaN":(s==null?o=d<=T||d>=y?zt(it(f.c),d):pt(it(f.c),d,"0"):s===10&&z?(f=N(new O(f),a+d+1,p),o=pt(it(f.c),f.e,"0")):(K(s,2,L.length,"Base"),o=n(pt(it(f.c),d,"0"),10,s,E,!0)),E<0&&f.c[0]&&(o="-"+o)),o},r.valueOf=r.toJSON=function(){return C(this)},r._isBigNumber=!0,r[Symbol.toStringTag]="BigNumber",r[Symbol.for("nodejs.util.inspect.custom")]=r.valueOf,t!=null&&O.set(t),O}function st(t){var e=t|0;return t>0||t===e?e:e-1}function it(t){for(var e,n,i=1,r=t.length,l=t[0]+"";i<r;){for(e=t[i++]+"",n=D-e.length;n--;e="0"+e);l+=e}for(r=l.length;l.charCodeAt(--r)===48;);return l.slice(0,r+1||1)}function Et(t,e){var n,i,r=t.c,l=e.c,a=t.s,p=e.s,T=t.e,y=e.e;if(!a||!p)return null;if(n=r&&!r[0],i=l&&!l[0],n||i)return n?i?0:-p:a;if(a!=p)return a;if(n=a<0,i=T==y,!r||!l)return i?0:!r^n?1:-1;if(!i)return T>y^n?1:-1;for(p=(T=r.length)<(y=l.length)?T:y,a=0;a<p;a++)if(r[a]!=l[a])return r[a]>l[a]^n?1:-1;return T==y?0:T>y^n?1:-1}function K(t,e,n,i){if(t<e||t>n||t!==rt(t))throw Error(tt+(i||"Argument")+(typeof t=="number"?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function Dt(t){var e=t.c.length-1;return st(t.e/D)==e&&t.c[e]%2!=0}function zt(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function pt(t,e,n){var i,r;if(e<0){for(r=n+".";++e;r+=n);t=r+t}else if(i=t.length,++e>i){for(r=n,e-=i;--e;r+=n);t+=r}else e<i&&(t=t.slice(0,e)+"."+t.slice(e));return t}var at=on(),Un=class{constructor(t){A(this,"key");A(this,"left",null);A(this,"right",null);this.key=t}},_t=class extends Un{constructor(t){super(t)}},$n=class{constructor(){A(this,"size",0);A(this,"modificationCount",0);A(this,"splayCount",0)}splay(t){const e=this.root;if(e==null)return this.compare(t,t),-1;let n=null,i=null,r=null,l=null,a=e;const p=this.compare;let T;for(;;)if(T=p(a.key,t),T>0){let y=a.left;if(y==null||(T=p(y.key,t),T>0&&(a.left=y.right,y.right=a,a=y,y=a.left,y==null)))break;n==null?i=a:n.left=a,n=a,a=y}else if(T<0){let y=a.right;if(y==null||(T=p(y.key,t),T<0&&(a.right=y.left,y.left=a,a=y,y=a.right,y==null)))break;r==null?l=a:r.right=a,r=a,a=y}else break;return r!=null&&(r.right=a.left,a.left=l),n!=null&&(n.left=a.right,a.right=i),this.root!==a&&(this.root=a,this.splayCount++),T}splayMin(t){let e=t,n=e.left;for(;n!=null;){const i=n;e.left=i.right,i.right=e,e=i,n=e.left}return e}splayMax(t){let e=t,n=e.right;for(;n!=null;){const i=n;e.right=i.left,i.left=e,e=i,n=e.right}return e}_delete(t){if(this.root==null||this.splay(t)!=0)return null;let n=this.root;const i=n,r=n.left;if(this.size--,r==null)this.root=n.right;else{const l=n.right;n=this.splayMax(r),n.right=l,this.root=n}return this.modificationCount++,i}addNewRoot(t,e){this.size++,this.modificationCount++;const n=this.root;if(n==null){this.root=t;return}e<0?(t.left=n,t.right=n.right,n.right=null):(t.right=n,t.left=n.left,n.left=null),this.root=t}_first(){const t=this.root;return t==null?null:(this.root=this.splayMin(t),this.root)}_last(){const t=this.root;return t==null?null:(this.root=this.splayMax(t),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(t){return this.validKey(t)&&this.splay(t)==0}defaultCompare(){return(t,e)=>t<e?-1:t>e?1:0}wrap(){return{getRoot:()=>this.root,setRoot:t=>{this.root=t},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:t=>{this.splayCount=t},splay:t=>this.splay(t),has:t=>this.has(t)}}},Ve,je,Yt=class Nt extends $n{constructor(n,i){super();A(this,"root",null);A(this,"compare");A(this,"validKey");A(this,Ve,"[object Set]");this.compare=n??this.defaultCompare(),this.validKey=i??(r=>r!=null&&r!=null)}delete(n){return this.validKey(n)?this._delete(n)!=null:!1}deleteAll(n){for(const i of n)this.delete(i)}forEach(n){const i=this[Symbol.iterator]();let r;for(;r=i.next(),!r.done;)n(r.value,r.value,this)}add(n){const i=this.splay(n);return i!=0&&this.addNewRoot(new _t(n),i),this}addAndReturn(n){const i=this.splay(n);return i!=0&&this.addNewRoot(new _t(n),i),this.root.key}addAll(n){for(const i of n)this.add(i)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)<0)return this.root.key;let r=this.root.left;if(r==null)return null;let l=r.right;for(;l!=null;)r=l,l=r.right;return r.key}firstAfter(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)>0)return this.root.key;let r=this.root.right;if(r==null)return null;let l=r.left;for(;l!=null;)r=l,l=r.left;return r.key}retainAll(n){const i=new Nt(this.compare,this.validKey),r=this.modificationCount;for(const l of n){if(r!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(l)&&this.splay(l)==0&&i.add(this.root.key)}i.size!=this.size&&(this.root=i.root,this.size=i.size,this.modificationCount++)}lookup(n){return!this.validKey(n)||this.splay(n)!=0?null:this.root.key}intersection(n){const i=new Nt(this.compare,this.validKey);for(const r of this)n.has(r)&&i.add(r);return i}difference(n){const i=new Nt(this.compare,this.validKey);for(const r of this)n.has(r)||i.add(r);return i}union(n){const i=this.clone();return i.addAll(n),i}clone(){const n=new Nt(this.compare,this.validKey);return n.size=this.size,n.root=this.copyNode(this.root),n}copyNode(n){if(n==null)return null;function i(l,a){let p,T;do{if(p=l.left,T=l.right,p!=null){const y=new _t(p.key);a.left=y,i(p,y)}if(T!=null){const y=new _t(T.key);a.right=y,l=T,a=y}}while(T!=null)}const r=new _t(n.key);return i(n,r),r}toSet(){return this.clone()}entries(){return new Vn(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(je=Symbol.iterator,Ve=Symbol.toStringTag,je)](){return new Hn(this.wrap())}},ln=class{constructor(t){A(this,"tree");A(this,"path",new Array);A(this,"modificationCount",null);A(this,"splayCount");this.tree=t,this.splayCount=t.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const t=this.path[this.path.length-1];return this.getValue(t)}rebuildPath(t){this.path.splice(0,this.path.length),this.tree.splay(t),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(t){for(;t!=null;)this.path.push(t),t=t.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let n=this.tree.getRoot();for(;n!=null;)this.path.push(n),n=n.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let t=this.path[this.path.length-1],e=t.right;if(e!=null){for(;e!=null;)this.path.push(e),e=e.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===t;)t=this.path.pop();return this.path.length>0}},Hn=class extends ln{getValue(t){return t.key}},Vn=class extends ln{getValue(t){return[t.key,t.key]}},un=t=>()=>t,he=t=>{const e=t?(n,i)=>i.minus(n).abs().isLessThanOrEqualTo(t):un(!1);return(n,i)=>e(n,i)?0:n.comparedTo(i)};function jn(t){const e=t?(n,i,r,l,a)=>n.exponentiatedBy(2).isLessThanOrEqualTo(l.minus(i).exponentiatedBy(2).plus(a.minus(r).exponentiatedBy(2)).times(t)):un(!1);return(n,i,r)=>{const l=n.x,a=n.y,p=r.x,T=r.y,y=a.minus(T).times(i.x.minus(p)).minus(l.minus(p).times(i.y.minus(T)));return e(y,l,a,p,T)?0:y.comparedTo(0)}}var Kn=t=>t,Xn=t=>{if(t){const e=new Yt(he(t)),n=new Yt(he(t)),i=(l,a)=>a.addAndReturn(l),r=l=>({x:i(l.x,e),y:i(l.y,n)});return r({x:new at(0),y:new at(0)}),r}return Kn},pe=t=>({set:e=>{gt=pe(e)},reset:()=>pe(t),compare:he(t),snap:Xn(t),orient:jn(t)}),gt=pe(),It=(t,e)=>t.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(t.ur.x)&&t.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(t.ur.y),ge=(t,e)=>{if(e.ur.x.isLessThan(t.ll.x)||t.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(t.ll.y)||t.ur.y.isLessThan(e.ll.y))return null;const n=t.ll.x.isLessThan(e.ll.x)?e.ll.x:t.ll.x,i=t.ur.x.isLessThan(e.ur.x)?t.ur.x:e.ur.x,r=t.ll.y.isLessThan(e.ll.y)?e.ll.y:t.ll.y,l=t.ur.y.isLessThan(e.ur.y)?t.ur.y:e.ur.y;return{ll:{x:n,y:r},ur:{x:i,y:l}}},Ut=(t,e)=>t.x.times(e.y).minus(t.y.times(e.x)),fn=(t,e)=>t.x.times(e.x).plus(t.y.times(e.y)),Wt=t=>fn(t,t).sqrt(),Yn=(t,e,n)=>{const i={x:e.x.minus(t.x),y:e.y.minus(t.y)},r={x:n.x.minus(t.x),y:n.y.minus(t.y)};return Ut(r,i).div(Wt(r)).div(Wt(i))},Wn=(t,e,n)=>{const i={x:e.x.minus(t.x),y:e.y.minus(t.y)},r={x:n.x.minus(t.x),y:n.y.minus(t.y)};return fn(r,i).div(Wt(r)).div(Wt(i))},ze=(t,e,n)=>e.y.isZero()?null:{x:t.x.plus(e.x.div(e.y).times(n.minus(t.y))),y:n},Fe=(t,e,n)=>e.x.isZero()?null:{x:n,y:t.y.plus(e.y.div(e.x).times(n.minus(t.x)))},Zn=(t,e,n,i)=>{if(e.x.isZero())return Fe(n,i,t.x);if(i.x.isZero())return Fe(t,e,n.x);if(e.y.isZero())return ze(n,i,t.y);if(i.y.isZero())return ze(t,e,n.y);const r=Ut(e,i);if(r.isZero())return null;const l={x:n.x.minus(t.x),y:n.y.minus(t.y)},a=Ut(l,e).div(r),p=Ut(l,i).div(r),T=t.x.plus(p.times(e.x)),y=n.x.plus(a.times(i.x)),w=t.y.plus(p.times(e.y)),x=n.y.plus(a.times(i.y)),m=T.plus(y).div(2),_=w.plus(x).div(2);return{x:m,y:_}},ft=class cn{constructor(e,n){A(this,"point");A(this,"isLeft");A(this,"segment");A(this,"otherSE");A(this,"consumedBy");e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}static compare(e,n){const i=cn.comparePoints(e.point,n.point);return i!==0?i:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:Zt.compare(e.segment,n.segment))}static comparePoints(e,n){return e.x.isLessThan(n.x)?-1:e.x.isGreaterThan(n.x)?1:e.y.isLessThan(n.y)?-1:e.y.isGreaterThan(n.y)?1:0}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const n=e.point.events;for(let i=0,r=n.length;i<r;i++){const l=n[i];this.point.events.push(l),l.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let n=0;n<e;n++){const i=this.point.events[n];if(i.segment.consumedBy===void 0)for(let r=n+1;r<e;r++){const l=this.point.events[r];l.consumedBy===void 0&&i.otherSE.point.events===l.otherSE.point.events&&i.segment.consume(l.segment)}}}getAvailableLinkedEvents(){const e=[];for(let n=0,i=this.point.events.length;n<i;n++){const r=this.point.events[n];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&e.push(r)}return e}getLeftmostComparator(e){const n=new Map,i=r=>{const l=r.otherSE;n.set(r,{sine:Yn(this.point,e.point,l.point),cosine:Wn(this.point,e.point,l.point)})};return(r,l)=>{n.has(r)||i(r),n.has(l)||i(l);const{sine:a,cosine:p}=n.get(r),{sine:T,cosine:y}=n.get(l);return a.isGreaterThanOrEqualTo(0)&&T.isGreaterThanOrEqualTo(0)?p.isLessThan(y)?1:p.isGreaterThan(y)?-1:0:a.isLessThan(0)&&T.isLessThan(0)?p.isLessThan(y)?-1:p.isGreaterThan(y)?1:0:T.isLessThan(a)?-1:T.isGreaterThan(a)?1:0}}},Qn=class ye{constructor(e){A(this,"events");A(this,"poly");A(this,"_isExteriorRing");A(this,"_enclosingRing");this.events=e;for(let n=0,i=e.length;n<i;n++)e[n].segment.ringOut=this;this.poly=null}static factory(e){const n=[];for(let i=0,r=e.length;i<r;i++){const l=e[i];if(!l.isInResult()||l.ringOut)continue;let a=null,p=l.leftSE,T=l.rightSE;const y=[p],w=p.point,x=[];for(;a=p,p=T,y.push(p),p.point!==w;)for(;;){const m=p.getAvailableLinkedEvents();if(m.length===0){const b=y[0].point,L=y[y.length-1].point;throw new Error(`Unable to complete output ring starting at [${b.x}, ${b.y}]. Last matching segment found ends at [${L.x}, ${L.y}].`)}if(m.length===1){T=m[0].otherSE;break}let _=null;for(let b=0,L=x.length;b<L;b++)if(x[b].point===p.point){_=b;break}if(_!==null){const b=x.splice(_)[0],L=y.splice(b.index);L.unshift(L[0].otherSE),n.push(new ye(L.reverse()));continue}x.push({index:y.length,point:p.point});const I=p.getLeftmostComparator(a);T=m.sort(I)[0].otherSE;break}n.push(new ye(y))}return n}getGeom(){let e=this.events[0].point;const n=[e];for(let y=1,w=this.events.length-1;y<w;y++){const x=this.events[y].point,m=this.events[y+1].point;gt.orient(x,e,m)!==0&&(n.push(x),e=x)}if(n.length===1)return null;const i=n[0],r=n[1];gt.orient(i,e,r)===0&&n.shift(),n.push(n[0]);const l=this.isExteriorRing()?1:-1,a=this.isExteriorRing()?0:n.length-1,p=this.isExteriorRing()?n.length:-1,T=[];for(let y=a;y!=p;y+=l)T.push([n[y].x.toNumber(),n[y].y.toNumber()]);return T}isExteriorRing(){if(this._isExteriorRing===void 0){const e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var r,l;let e=this.events[0];for(let a=1,p=this.events.length;a<p;a++){const T=this.events[a];ft.compare(e,T)>0&&(e=T)}let n=e.segment.prevInResult(),i=n?n.prevInResult():null;for(;;){if(!n)return null;if(!i)return n.ringOut;if(i.ringOut!==n.ringOut)return((r=i.ringOut)==null?void 0:r.enclosingRing())!==n.ringOut?n.ringOut:(l=n.ringOut)==null?void 0:l.enclosingRing();n=i.prevInResult(),i=n?n.prevInResult():null}}},Ue=class{constructor(t){A(this,"exteriorRing");A(this,"interiorRings");this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=this.exteriorRing.getGeom();if(t===null)return null;const e=[t];for(let n=0,i=this.interiorRings.length;n<i;n++){const r=this.interiorRings[n].getGeom();r!==null&&e.push(r)}return e}},Jn=class{constructor(t){A(this,"rings");A(this,"polys");this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const i=this.polys[e].getGeom();i!==null&&t.push(i)}return t}_composePolys(t){var n;const e=[];for(let i=0,r=t.length;i<r;i++){const l=t[i];if(!l.poly)if(l.isExteriorRing())e.push(new Ue(l));else{const a=l.enclosingRing();a!=null&&a.poly||e.push(new Ue(a)),(n=a==null?void 0:a.poly)==null||n.addInterior(l)}}return e}},ti=class{constructor(t,e=Zt.compare){A(this,"queue");A(this,"tree");A(this,"segments");this.queue=t,this.tree=new Yt(e),this.segments=[]}process(t){const e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.delete(t.otherSE):this.tree.delete(e),n;t.isLeft&&this.tree.add(e);let i=e,r=e;do i=this.tree.lastBefore(i);while(i!=null&&i.consumedBy!=null);do r=this.tree.firstAfter(r);while(r!=null&&r.consumedBy!=null);if(t.isLeft){let l=null;if(i){const p=i.getIntersection(e);if(p!==null&&(e.isAnEndpoint(p)||(l=p),!i.isAnEndpoint(p))){const T=this._splitSafely(i,p);for(let y=0,w=T.length;y<w;y++)n.push(T[y])}}let a=null;if(r){const p=r.getIntersection(e);if(p!==null&&(e.isAnEndpoint(p)||(a=p),!r.isAnEndpoint(p))){const T=this._splitSafely(r,p);for(let y=0,w=T.length;y<w;y++)n.push(T[y])}}if(l!==null||a!==null){let p=null;l===null?p=a:a===null?p=l:p=ft.comparePoints(l,a)<=0?l:a,this.queue.delete(e.rightSE),n.push(e.rightSE);const T=e.split(p);for(let y=0,w=T.length;y<w;y++)n.push(T[y])}n.length>0?(this.tree.delete(e),n.push(t)):(this.segments.push(e),e.prev=i)}else{if(i&&r){const l=i.getIntersection(r);if(l!==null){if(!i.isAnEndpoint(l)){const a=this._splitSafely(i,l);for(let p=0,T=a.length;p<T;p++)n.push(a[p])}if(!r.isAnEndpoint(l)){const a=this._splitSafely(r,l);for(let p=0,T=a.length;p<T;p++)n.push(a[p])}}}this.tree.delete(e)}return n}_splitSafely(t,e){this.tree.delete(t);const n=t.rightSE;this.queue.delete(n);const i=t.split(e);return i.push(n),t.consumedBy===void 0&&this.tree.add(t),i}},ei=class{constructor(){A(this,"type");A(this,"numMultiPolys")}run(t,e,n){Mt.type=t;const i=[new He(e,!0)];for(let y=0,w=n.length;y<w;y++)i.push(new He(n[y],!1));if(Mt.numMultiPolys=i.length,Mt.type==="difference"){const y=i[0];let w=1;for(;w<i.length;)ge(i[w].bbox,y.bbox)!==null?w++:i.splice(w,1)}if(Mt.type==="intersection")for(let y=0,w=i.length;y<w;y++){const x=i[y];for(let m=y+1,_=i.length;m<_;m++)if(ge(x.bbox,i[m].bbox)===null)return[]}const r=new Yt(ft.compare);for(let y=0,w=i.length;y<w;y++){const x=i[y].getSweepEvents();for(let m=0,_=x.length;m<_;m++)r.add(x[m])}const l=new ti(r);let a=null;for(r.size!=0&&(a=r.first(),r.delete(a));a;){const y=l.process(a);for(let w=0,x=y.length;w<x;w++){const m=y[w];m.consumedBy===void 0&&r.add(m)}r.size!=0?(a=r.first(),r.delete(a)):a=null}gt.reset();const p=Qn.factory(l.segments);return new Jn(p).getGeom()}},Mt=new ei,ve=Mt,ni=0,Zt=class $t{constructor(e,n,i,r){A(this,"id");A(this,"leftSE");A(this,"rightSE");A(this,"rings");A(this,"windings");A(this,"ringOut");A(this,"consumedBy");A(this,"prev");A(this,"_prevInResult");A(this,"_beforeState");A(this,"_afterState");A(this,"_isInResult");this.id=++ni,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=i,this.windings=r}static compare(e,n){const i=e.leftSE.point.x,r=n.leftSE.point.x,l=e.rightSE.point.x,a=n.rightSE.point.x;if(a.isLessThan(i))return 1;if(l.isLessThan(r))return-1;const p=e.leftSE.point.y,T=n.leftSE.point.y,y=e.rightSE.point.y,w=n.rightSE.point.y;if(i.isLessThan(r)){if(T.isLessThan(p)&&T.isLessThan(y))return 1;if(T.isGreaterThan(p)&&T.isGreaterThan(y))return-1;const x=e.comparePoint(n.leftSE.point);if(x<0)return 1;if(x>0)return-1;const m=n.comparePoint(e.rightSE.point);return m!==0?m:-1}if(i.isGreaterThan(r)){if(p.isLessThan(T)&&p.isLessThan(w))return-1;if(p.isGreaterThan(T)&&p.isGreaterThan(w))return 1;const x=n.comparePoint(e.leftSE.point);if(x!==0)return x;const m=e.comparePoint(n.rightSE.point);return m<0?1:m>0?-1:1}if(p.isLessThan(T))return-1;if(p.isGreaterThan(T))return 1;if(l.isLessThan(a)){const x=n.comparePoint(e.rightSE.point);if(x!==0)return x}if(l.isGreaterThan(a)){const x=e.comparePoint(n.rightSE.point);if(x<0)return 1;if(x>0)return-1}if(!l.eq(a)){const x=y.minus(p),m=l.minus(i),_=w.minus(T),I=a.minus(r);if(x.isGreaterThan(m)&&_.isLessThan(I))return 1;if(x.isLessThan(m)&&_.isGreaterThan(I))return-1}return l.isGreaterThan(a)?1:l.isLessThan(a)||y.isLessThan(w)?-1:y.isGreaterThan(w)?1:e.id<n.id?-1:e.id>n.id?1:0}static fromRing(e,n,i){let r,l,a;const p=ft.comparePoints(e,n);if(p<0)r=e,l=n,a=1;else if(p>0)r=n,l=e,a=-1;else throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);const T=new ft(r,!0),y=new ft(l,!1);return new $t(T,y,[i],[a])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e.isLessThan(n)?e:n},ur:{x:this.rightSE.point.x,y:e.isGreaterThan(n)?e:n}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(e){return e.x.eq(this.leftSE.point.x)&&e.y.eq(this.leftSE.point.y)||e.x.eq(this.rightSE.point.x)&&e.y.eq(this.rightSE.point.y)}comparePoint(e){return gt.orient(this.leftSE.point,e,this.rightSE.point)}getIntersection(e){const n=this.bbox(),i=e.bbox(),r=ge(n,i);if(r===null)return null;const l=this.leftSE.point,a=this.rightSE.point,p=e.leftSE.point,T=e.rightSE.point,y=It(n,p)&&this.comparePoint(p)===0,w=It(i,l)&&e.comparePoint(l)===0,x=It(n,T)&&this.comparePoint(T)===0,m=It(i,a)&&e.comparePoint(a)===0;if(w&&y)return m&&!x?a:!m&&x?T:null;if(w)return x&&l.x.eq(T.x)&&l.y.eq(T.y)?null:l;if(y)return m&&a.x.eq(p.x)&&a.y.eq(p.y)?null:p;if(m&&x)return null;if(m)return a;if(x)return T;const _=Zn(l,this.vector(),p,e.vector());return _===null||!It(r,_)?null:gt.snap(_)}split(e){const n=[],i=e.events!==void 0,r=new ft(e,!0),l=new ft(e,!1),a=this.rightSE;this.replaceRightSE(l),n.push(l),n.push(r);const p=new $t(r,a,this.rings.slice(),this.windings.slice());return ft.comparePoints(p.leftSE.point,p.rightSE.point)>0&&p.swapEvents(),ft.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(r.checkForConsuming(),l.checkForConsuming()),n}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,i=this.windings.length;n<i;n++)this.windings[n]*=-1}consume(e){let n=this,i=e;for(;n.consumedBy;)n=n.consumedBy;for(;i.consumedBy;)i=i.consumedBy;const r=$t.compare(n,i);if(r!==0){if(r>0){const l=n;n=i,i=l}if(n.prev===i){const l=n;n=i,i=l}for(let l=0,a=i.rings.length;l<a;l++){const p=i.rings[l],T=i.windings[l],y=n.rings.indexOf(p);y===-1?(n.rings.push(p),n.windings.push(T)):n.windings[y]+=T}i.rings=null,i.windings=null,i.consumedBy=n,i.leftSE.consumedBy=n.leftSE,i.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,i=this._afterState.windings,r=this._afterState.multiPolys;for(let p=0,T=this.rings.length;p<T;p++){const y=this.rings[p],w=this.windings[p],x=n.indexOf(y);x===-1?(n.push(y),i.push(w)):i[x]+=w}const l=[],a=[];for(let p=0,T=n.length;p<T;p++){if(i[p]===0)continue;const y=n[p],w=y.poly;if(a.indexOf(w)===-1)if(y.isExterior)l.push(w);else{a.indexOf(w)===-1&&a.push(w);const x=l.indexOf(y.poly);x!==-1&&l.splice(x,1)}}for(let p=0,T=l.length;p<T;p++){const y=l[p].multiPoly;r.indexOf(y)===-1&&r.push(y)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const e=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(ve.type){case"union":{const i=e.length===0,r=n.length===0;this._isInResult=i!==r;break}case"intersection":{let i,r;e.length<n.length?(i=e.length,r=n.length):(i=n.length,r=e.length),this._isInResult=r===ve.numMultiPolys&&i<r;break}case"xor":{const i=Math.abs(e.length-n.length);this._isInResult=i%2===1;break}case"difference":{const i=r=>r.length===1&&r[0].isSubject;this._isInResult=i(e)!==i(n);break}}return this._isInResult}},$e=class{constructor(t,e,n){A(this,"poly");A(this,"isExterior");A(this,"segments");A(this,"bbox");if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=n,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const i=gt.snap({x:new at(t[0][0]),y:new at(t[0][1])});this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};let r=i;for(let l=1,a=t.length;l<a;l++){if(typeof t[l][0]!="number"||typeof t[l][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const p=gt.snap({x:new at(t[l][0]),y:new at(t[l][1])});p.x.eq(r.x)&&p.y.eq(r.y)||(this.segments.push(Zt.fromRing(r,p,this)),p.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=p.x),p.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=p.y),p.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=p.x),p.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=p.y),r=p)}(!i.x.eq(r.x)||!i.y.eq(r.y))&&this.segments.push(Zt.fromRing(r,i,this))}getSweepEvents(){const t=[];for(let e=0,n=this.segments.length;e<n;e++){const i=this.segments[e];t.push(i.leftSE),t.push(i.rightSE)}return t}},ii=class{constructor(t,e){A(this,"multiPoly");A(this,"exteriorRing");A(this,"interiorRings");A(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new $e(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let n=1,i=t.length;n<i;n++){const r=new $e(t[n],this,!1);r.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=r.bbox.ll.x),r.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=r.bbox.ll.y),r.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=r.bbox.ur.x),r.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=r.bbox.ur.y),this.interiorRings.push(r)}this.multiPoly=e}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let e=0,n=this.interiorRings.length;e<n;e++){const i=this.interiorRings[e].getSweepEvents();for(let r=0,l=i.length;r<l;r++)t.push(i[r])}return t}},He=class{constructor(t,e){A(this,"isSubject");A(this,"polys");A(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:new at(Number.POSITIVE_INFINITY),y:new at(Number.POSITIVE_INFINITY)},ur:{x:new at(Number.NEGATIVE_INFINITY),y:new at(Number.NEGATIVE_INFINITY)}};for(let n=0,i=t.length;n<i;n++){const r=new ii(t[n],this);r.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=r.bbox.ll.x),r.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=r.bbox.ll.y),r.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=r.bbox.ur.x),r.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=r.bbox.ur.y),this.polys.push(r)}this.isSubject=e}getSweepEvents(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const i=this.polys[e].getSweepEvents();for(let r=0,l=i.length;r<l;r++)t.push(i[r])}return t}},ai=(t,...e)=>ve.run("intersection",t,e);gt.set;export{si as a,oi as b,ui as c,ci as d,ai as e,pn as g,fi as i,li as r};
